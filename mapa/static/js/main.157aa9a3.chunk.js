(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{222:function(e,a,t){e.exports=t(534)},227:function(e,a,t){},534:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(28),o=t.n(c),l=(t(227),t(228),t(229),t(230),t(221)),i=t(23),s=t(37),m=t(67),u=t(68),p=t(72),d=t(69),E=t(73),g=t(44),f=t(54),h=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(p.a)(this,Object(d.a)(a).call(this,e))).updateHandler=e.updateHandler,t}return Object(E.a)(a,e),Object(u.a)(a,[{key:"componentDidUpdate",value:function(e){this.updateHandler&&this.updateHandler(this.props,e)}},{key:"render",value:function(){return this.props.children}}]),a}(r.a.Component),b=Object(f.d)(h),v=t(220),y=t.n(v),N=t(136),C=t.n(N),k=t(101),w=t(135),j=t.n(w),O=t(139),P=t.n(O),M=t(194),S=t.n(M);var I={loadGFont:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Roboto",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"300,400,500,600",t=document.createElement("link");t.href="https://fonts.googleapis.com/css?family=".concat(e,":").concat(a),t.rel="stylesheet",document.head.appendChild(t),new S.a(e).load().then(function(){return document.documentElement.classList.add(e.replace(" ","-").toLowerCase())}).catch(function(a){return console.error("Unable to load ".concat(e," font due to: ").concat(a))})},handleFetchErrors:function(e){if(!e.ok)throw Error(e.statusText||"Error desconegut");return e},sumAll:function(e){return Object.values(e).reduce(function(e,a){return e+a},0)},plainArray:function(e){var a={};return Object.keys(e).forEach(function(t){e[t].forEach(function(e){a[e.id]||(a[e.id]={id:e.id,nom:e.nom,simbol:e.simbol,cursos:[]}),a[e.id].cursos.push(t)})}),Object.values(a).sort(function(e,a){return e.nom.localeCompare(a.nom)})},sortObjectArrayBy:function(e,a){return"string"===typeof a?e.sort(function(e,t){return e[a].localeCompare(t[a])}):e.sort(function(e,t){return a.map(function(a){return e[a]}).join(" ").localeCompare(a.map(function(e){return t[e]}).join(" "))})},cursCurt:function(e){return 9===e.length?"".concat(e.substr(0,5)).concat(e.substr(7,2)):e}},A={programes:new Map,centres:new Map,poligons:new Map,estudis:new Map,nivells:new Map,ambitsCurr:new Map,ambitsInn:new Map,cursosDisp:[]},x={loading:!0,dataLoaded:!1,error:!1,polygons:[],currentPrograms:new Set,programa:null,cursos:[],delayedMapUpdate:!0,updateMap:function(){return null},fuseFuncs:[],menuItems:[],data:A},_=r.a.createContext(x),T=t(198),B=t.n(T),R=t(137),z=t.n(R),F=t(36),L=t.n(F),D=t(199),q=t.n(D),U=t(201),Z=t.n(U),G=t(103),W=t.n(G),Y=t(21),J=t.n(Y),H=t(196),V=t.n(H),X=t(197),Q=t.n(X);var K=function(e){var a=e.closeFn,t=void 0===a?function(){return null}:a,n=e.history,c=e.mini,o=void 0!==c&&c,l=r.a.useState(""),s=Object(i.a)(l,2),m=s[0],u=s[1],p=function(e){e.preventDefault(),t(),n.push("/cerca/".concat(m)),u("")};return r.a.createElement("form",{className:"search-bar",onSubmit:p},r.a.createElement(L.a,{className:"search-btn",color:"inherit","aria-label":"Cerca",title:"Cerca",onClick:p},r.a.createElement(W.a,null)),r.a.createElement(V.a,{"aria-label":"Cerca text...",title:"Cerca text...",className:"search-text",value:m,InputProps:{disableUnderline:!0},onChange:function(e){return u(e.target.value)}}),!o&&r.a.createElement(L.a,{className:"search-close",color:"inherit","aria-label":"Tanca",title:"Tanca",onClick:t},r.a.createElement(Q.a,null)))},$=t(200),ee=t.n($),ae=t(32),te=t.n(ae),ne=t(31),re=t.n(ne),ce=t(33),oe=t.n(ce),le=t(106),ie=t.n(le);var se=Object(f.d)(function(e){var a=e.history,t=e.location,n=r.a.useState(!1),c=Object(i.a)(n,2),o=c[0],l=c[1],s=r.a.useState(!1),m=Object(i.a)(s,2),u=m[0],p=m[1];return r.a.createElement(_.Consumer,null,function(e){var n=e.menuItems,c=(e.searchFn,n&&n.length>0),i=function(e){return function(){l(!1),e.path&&a.push(e.path)}};return n.forEach(function(e){return e.current=e.path===t.pathname}),r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{className:"header",position:"fixed"},r.a.createElement(z.a,{disableGutters:!0},c&&r.a.createElement(L.a,{className:"main-menu-button",color:"inherit","aria-label":"Seccions",title:"Seccions",onClick:function(){return l(!0)}},r.a.createElement(q.a,null)),r.a.createElement("div",{className:"main-header-block"},r.a.createElement("div",{className:"top-bar"},r.a.createElement("a",{className:"logo-gencat",href:"https://web.gencat.cat/",title:"Generalitat de Catalunya",target:"_top"},"gencat.cat"),r.a.createElement(K,{className:"search-bar",history:a,mini:!0})),r.a.createElement(J.a,{className:"main-title",variant:"h6",color:"inherit",noWrap:!0},"Mapa de la innovaci\xf3 pedag\xf2gica"),r.a.createElement("ul",{className:"nav-bar"},n.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"nav-label",role:"button",current:e.current?"true":"false",onClick:i(e)},e.name))}))),r.a.createElement(L.a,{className:"search-btn-small",color:"inherit","aria-label":"Cerca",title:"Cerca",onClick:function(){return p(!u)}},r.a.createElement(W.a,null))),u&&r.a.createElement(K,{closeFn:function(){return p(!1)},history:a})),c&&r.a.createElement(ee.a,{variant:"persistent",anchor:"left",open:o},r.a.createElement(te.a,null,r.a.createElement(re.a,{component:"li",divider:!0,button:!0,onClick:function(){return l(!1)}},r.a.createElement(ie.a,null,r.a.createElement(Z.a,null)),r.a.createElement(oe.a,{primary:"Tanca el men\xfa"})),n.map(function(e){return r.a.createElement(re.a,{component:"li",button:!0,key:e.id,onClick:i(e)},r.a.createElement(oe.a,{primary:e.name}))}))))})}),me=t(75),ue=t.n(me),pe=t(24),de=t.n(pe),Ee=t(19),ge=t.n(Ee),fe='\n<img src="logos/portada.png" style="max-width:100%;text-align:center;" alt="Mapa de la innovaci\xf3 pedag\xf2gica" />\n\n\xc9s voluntat del Departament d\u2019Educaci\xf3 acompanyar els centres educatius del pa\xeds en el proc\xe9s de\ntransformaci\xf3 educativa per donar resposta a les necessitats del segle XXI i recon\xe8ixer els esfor\xe7os\nque s\u2019estan fent en termes d\u2019innovaci\xf3 pedag\xf2gica.\n\nEl mapa de la innovaci\xf3 pedag\xf2gica de Catalunya \xe9s un instrument que situa en el territori i\nvisibilitza totes les iniciatives vinculades a la innovaci\xf3 i a la recerca educativa que es desenvolupa\nen els centres educatius i que han estat reconegudes pel Departament d\u2019Educaci\xf3 des del 2015, d\u2019acord\namb el <a href="http://xtec.gencat.cat/ca/innovacio/" target="_blank" rel="noopener noreferrer">Marc de la Innovaci\xf3 Pedag\xf2gica de Catalunya</a>. \n\nAmb el mapa de la innovaci\xf3 es pret\xe9n impulsar el treball en xarxa entre els centres que comparteixen\nobjectius al llarg del territori i posar en valor la informaci\xf3 que faciliti la presa de decisions a\ntota la comunitat educativa, a l\u2019administraci\xf3 i a altres agents. Aquesta presa de decisions ha de\npermetre promoure la inclusi\xf3, la cohesi\xf3 i l\u2019equitat, i facilitar la participaci\xf3 de tots els centres\nen l\u2019\xe8xit educatiu i la innovaci\xf3 per a la millora.\n\n',he={escapeHtml:!1};var be=function(e){var a=e.history;return r.a.createElement(_.Consumer,null,function(){return r.a.createElement("section",{className:"seccio presenta"},r.a.createElement(de.a,{className:"paper"},r.a.createElement(ue.a,he,fe),r.a.createElement(ge.a,{className:"close-intro-btn",variant:"outlined",onClick:function(){return a.push("/programes")}},"Acc\xe9s al mapa")))})},ve=t(191),ye=t(188),Ne=t(134),Ce=t(187),ke=t(190),we=t(189),je=t(186),Oe={osm:{attribution:'&amp;copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},mapbox:{attribution:'Dades del mapa \xa9 contribu\xefdors de <a href="https://www.openstreetmap.org/">OpenStreetMap</a>, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imatges \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',url:"https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",id:"mapbox.streets",accessToken:"pk.eyJ1IjoiZnJuY2VzYyIsImEiOiJjanU1b3BkZ2owYThsNDR0M3A2MzBjczg2In0.5zKGaoSJeQOeiWZyOj8ByQ"},wikimedia:{attribution:'<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>',url:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png",minZoom:1,maxZoom:19}},Pe={};var Me=function(e){var a=e.type,t=void 0===a?"wikimedia":a;return Pe[t]||(Pe[t]=r.a.createElement(je.a,Oe[t])),Pe[t]},Se=t(30),Ie=t(8),Ae=t(9),xe=t.n(Ae);t(491);var _e=function(e){function a(){return Object(m.a)(this,a),Object(p.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(E.a)(a,e),Object(u.a)(a,[{key:"createLeafletElement",value:function(e){var a=e.clusterProps,t=void 0===a?{}:a,n=new xe.a.markerClusterGroup(Object(s.a)({},e,t));return this.contextValue=Object(s.a)({},e.leaflet,{layerContainer:n}),n}}]),a}(Se.a),Te=Object(Ie.d)(_e),Be=t(202),Re=t.n(Be),ze="wikimedia",Fe=!0,Le=[[40.5,.15],[42.9,3.34]],De=[[39.5,-.85],[43.9,4.34]],qe={showCoverageOnHover:!1,maxClusterRadius:30};function Ue(e){var a,t=e.points,n=void 0===t?[]:t,c=e.polygons,o=void 0===c?[]:c,l=e.estudis,i=void 0===l?[]:l,s=e.programa,m=void 0===s?null:s,u=e.poli,p=void 0===u?null:u,d=e.zoom,E=void 0===d?8:d,f=e.maxZoom,h=void 0===f?13:f,b=e.updateMap,v=[{name:"Mostra la participaci\xf3 per zones",flag:"showDensity",default:!1},{name:"Mostra els centres",flag:"showCentres",default:!0}],y=window.localStorage,N=function(e){return"true"===y.getItem(e)},C=function(e,a){return y.setItem(e,a)},k=window.sessionStorage,w=Fe&&null===p,j=w&&function(){var e=k.getItem("mapBounds");if(!e)return null;var a=e.split(",");return 4!==a.length?null:[[Number(a[1]),Number(a[0])],[Number(a[3]),Number(a[2])]]}(),O=function(e){var a;w&&e.target&&e.target.getBounds&&(a=e.target.getBounds(),k.setItem("mapBounds",a.toBBoxString()))},P=function(e){return function(a){var t=v.findIndex(function(e){return e.name===a.name});if(t>=0){var n="add"===e;y.setItem(v[t].flag,n),0===t&&n&&b({},!1)}}},M=(a="currentLayer",Number(y.getItem(a)));C("currentLayer",M),v.forEach(function(e){var a=y.getItem(e.flag);C(e.flag,null===a?e.default:a)});var S=function(e){var a=e.centresPart.size,t=I.sumAll(e.estudisPart),n=I.sumAll(e.estudisBase),c=(n>0?t/n*100:0).toFixed(1);return r.a.createElement(ve.a,null,r.a.createElement("h4",null,r.a.createElement(g.b,{to:"/zona/".concat(e.key)},e.nom)),a&&r.a.createElement("p",null,r.a.createElement("span",null,"Centres participants ".concat(m?"al programa seleccionat":"als programes seleccionats",": ").concat(a)),r.a.createElement("br",null),r.a.createElement("span",null,"\xcdndex de participaci\xf3: ".concat(c,"%")))||r.a.createElement("p",null,"No hi ha cap centre que participi als programes seleccionats."))};return r.a.createElement(ye.a,Object.assign({className:"mapa markercluster-map"},{maxZoom:h,minZoom:E,bounds:p&&p.bounds||j||Le,maxBounds:De,onBaseLayerChange:function(e){var a=o.findIndex(function(a){return a.name===e.name});a>=0&&(C("currentLayer",a),N(v[0].flag)&&b({},!1))},onOverlayAdd:P("add"),onOverlayRemove:P("remove"),onZoomEnd:O,onMoveEnd:O}),r.a.createElement(Me,{type:ze}),r.a.createElement(Ne.b,{position:"topright"},o.map(function(e,a){return r.a.createElement(Ne.b.BaseLayer,{name:e.name,key:a,checked:null!==p?a===("SEZ"===p.tipus?1:0):a===M},r.a.createElement(Ce.a,null,e.shapes.filter(function(e){return null===p||p===e}).map(function(e,a){return r.a.createElement(ke.a,{key:a,positions:e.poligons,weight:2,fillOpacity:0},S(e))})))}),r.a.createElement(Ne.b.Overlay,{name:v[0].name,checked:null===p&&N(v[0].flag)},r.a.createElement(Ce.a,null,o[M].shapes.filter(function(e){return null===p||p===e}).map(function(e,a){return r.a.createElement(ke.a,{key:a,positions:e.poligons,weight:0,fillOpacity:e.density},S(e))}))),r.a.createElement(Ne.b.Overlay,{name:v[1].name,checked:null!==p||N(v[1].flag)},r.a.createElement(Te,{clusterProps:qe},n.map(function(e){return r.a.createElement(we.a,{key:e.id,position:[e.lat,e.lng]},(a=e,r.a.createElement(ve.a,null,r.a.createElement("h4",null,r.a.createElement(g.b,{to:"/centre/".concat(a.id)},a.nom)),r.a.createElement("p",null,a.adreca,r.a.createElement("br",null),r.a.createElement("a",{href:a.web,target:"_blank",rel:"noopener noreferrer"},a.web)),r.a.createElement("p",null,a.estudis.map(function(e){return i.get(e)}).join(", "),"."))));var a})))),r.a.createElement(Re.a,{position:"topleft",title:"Mostra el mapa a pantalla completa",titleCancel:"Surt de la pantalla completa"}))}var Ze="wikimedia",Ge=[[40.5,.15],[42.9,3.34]];function We(e){var a=e.point,t=e.center,n=void 0===t?[41.7,1.8]:t,c=e.zoom,o=void 0===c?8:c,l=e.maxZoom,i=void 0===l?19:l;return r.a.createElement(ye.a,Object.assign({className:"mapa-centre"},{center:n,zoom:o,maxZoom:i,minZoom:8,maxBounds:Ge}),r.a.createElement(Me,{type:Ze}),r.a.createElement(we.a,{key:a.id,position:[a.lat,a.lng]}))}var Ye=t(203),Je=t.n(Ye),He=t(204),Ve=t.n(He),Xe=t(205),Qe=t.n(Xe);var Ke=function(e){var a=e.data,t=a.programes,n=a.centres,c=a.poligons,o=a.estudis,l=a.cursosDisp,i=e.programa,s=e.centre,m=e.zona,u=e.cursos,p=e.currentPrograms,d=e.polygons,E=e.mapChanged,g=e.updateMap,f=s?n.get(s):null,h=m?c.get(m):null,b=window.innerWidth,v=b<600?7:b<820?8:b<1300?7:8,y=function(e,a){var n=t.get(e);return n&&Object.keys(n.centres).forEach(function(e){u&&!u.includes(e)||n.centres[e].forEach(function(e){h&&!h.centresInn.has(e)||a.find(function(a){return a.id===e.id})||a.push(e)})}),a},N=[];return E||(f?N.push(f):i?y(i,N):p.forEach(function(e){return y(e,N)})),r.a.createElement("section",{className:"seccio smapa"},r.a.createElement(de.a,{className:f?"paper":"paper no-padding-top"},f&&r.a.createElement(We,{point:f,center:[f.lat,f.lng],zoom:15,maxZoom:19})||r.a.createElement(r.a.Fragment,null,r.a.createElement(Je.a,{className:"cursos",nonLinear:!0,alternativeLabel:!0,activeStep:null},l.map(function(e,a){return r.a.createElement(Ve.a,{key:e},r.a.createElement(Qe.a,{onClick:(t=e,function(e){var a=[];l.forEach(function(e){(t===e&&!u.includes(e)||t!==e&&u.includes(e))&&a.push(e)}),g({cursos:a},!0,!0)}),completed:u.includes(e)},I.cursCurt(e)));var t})),r.a.createElement(Ue,{points:N,polygons:d,programa:i,poli:h,zoom:v,maxZoom:19,estudis:o,updateMap:g}))))},$e=t(211),ea=t.n($e),aa=t(110),ta=t.n(aa),na=t(212),ra=t.n(na),ca=t(111),oa=t.n(ca),la=t(210),ia=t.n(la),sa=t(102),ma=t(206),ua=t.n(ma),pa=t(209),da=t.n(pa),Ea=t(208),ga=t.n(Ea),fa=t(207),ha=t.n(fa),ba=t(105),va=t.n(ba),ya=t(104),Na=t.n(ya),Ca=t(83),ka=t.n(Ca),wa=t(76),ja=t.n(wa),Oa=t(109),Pa=t.n(Oa),Ma=t(108),Sa=t.n(Ma);var Ia=function(e){var a=e.dlgOpen,t=e.setDlgOpen,n=e.data,c=n.programes,o=n.ambitsCurr,l=n.ambitsInn,m=n.nivells,u=e.updateMap,p=r.a.useState(""),d=Object(i.a)(p,2),E=d[0],g=d[1],f=r.a.useState(""),h=Object(i.a)(f,2),b=h[0],v=h[1],y=r.a.useState(Array.from(m).reduce(function(e,a){return e[Object(i.a)(a,1)[0]]=!0,e},{})),N=Object(i.a)(y,2),C=N[0],k=N[1],w=r.a.useState(new Set),j=Object(i.a)(w,2),O=j[0],P=j[1],M=function(){var e=new Set;c.forEach(function(a,t){""!==E&&!a.ambInn.includes(E)||""!==b&&!a.ambCurr.includes(b)||!Object.keys(C).find(function(e){return C[e]&&m.get(e).find(function(e){return a.tipus.includes(e)})})||e.add(t)}),P(e)};r.a.useMemo(M,[E,b,C]);var S=function(e){return function(a){e(a.target.value)}},I=function(e){return function(a){e&&u({currentPrograms:O},!0,!0),t(!1)}};return r.a.createElement(ua.a,{open:a,onEnter:M,"aria-labelledby":"dialog-title",classes:{paper:"stretch-dlg"}},r.a.createElement(ha.a,{id:"dialog-title"},"Tipus de programes"),r.a.createElement(ga.a,{className:"dialog-content"},r.a.createElement("div",{className:"nivells"},Array.from(m).map(function(e){var a,t=Object(i.a)(e,1)[0];return r.a.createElement(Sa.a,{key:t,className:"select-nivell",control:r.a.createElement(Pa.a,{onChange:(a=t,function(e){k(Object(s.a)({},C,Object(sa.a)({},a,e.target.checked)))}),value:t,checked:C[t]}),label:t})})),r.a.createElement(va.a,{className:"select-list"},r.a.createElement(Na.a,{htmlFor:"select-ambit-curr"},"\xc0mbit curricular"),r.a.createElement(ka.a,{value:b,onChange:S(v),inputProps:{name:"ambitCurr",id:"select-ambit-curr"}},r.a.createElement(ja.a,{value:""},r.a.createElement("em",null,"Tots els \xe0mbits")),Array.from(o.keys()).sort().map(function(e){return r.a.createElement(ja.a,{key:e,value:e},o.get(e))}))),r.a.createElement(va.a,{className:"select-list"},r.a.createElement(Na.a,{htmlFor:"select-ambit-inn"},"\xc0mbit d'innovaci\xf3"),r.a.createElement(ka.a,{value:E,onChange:S(g),inputProps:{name:"ambitInn",id:"select-ambit-inn"}},r.a.createElement(ja.a,{value:""},r.a.createElement("em",null,"Tots els \xe0mbits")),Array.from(l.keys()).sort().map(function(e){return r.a.createElement(ja.a,{key:e,value:e},l.get(e))}))),r.a.createElement(J.a,{className:"info"},O.size," ",1===O.size?"programa seleccionat":"programes seleccionats")),r.a.createElement(da.a,null,r.a.createElement(ge.a,{onClick:I(!0),color:"primary"},"Aplica la selecci\xf3"),r.a.createElement(ge.a,{onClick:I(!1),color:"primary"},"Cancel\xb7la")))};var Aa=function(e){var a=e.history,t=r.a.useState(!1),n=Object(i.a)(t,2),c=n[0],o=n[1];return r.a.createElement(_.Consumer,null,function(e){var t=e.data,n=e.data,l=n.programes,i=n.ambitsCurr,s=n.ambitsInn,m=n.nivells,u=e.cursos,p=e.currentPrograms,d=e.polygons,E=e.mapChanged,g=e.updateMap,f=p.size===l.size,h=function(e){return function(){return a.push("/programa/".concat(e))}},b=function(e){return function(a){p[p.has(e)?"delete":"add"](e),g({currentPrograms:p,ambitCurr:"",ambitInn:"",nivell:""},!0,!0)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{className:"gomap","aria-label":"Mapa",onClick:function(){return document.querySelector(".smapa").scrollIntoView()}},r.a.createElement(ia.a,{className:"left-icon"}),"Mapa"),r.a.createElement("section",{className:"seccio programes"},r.a.createElement(Ia,{dlgOpen:c,setDlgOpen:o,data:{programes:l,ambitsCurr:i,ambitsInn:s,nivells:m},updateMap:g}),r.a.createElement(de.a,{className:"paper"},r.a.createElement("div",{className:"select-progs"},r.a.createElement(ge.a,{variant:"outlined",color:"primary",onClick:function(){return o(!0)}},"Selecciona per tipus"),r.a.createElement(Sa.a,{className:"select-all",labelPlacement:"start",control:r.a.createElement(Pa.a,{onChange:function(e){e.target.checked?l.forEach(function(e,a){return p.add(a)}):p.clear(),g({currentPrograms:p},!0,!0)},checked:f}),label:"Selecciona'ls tots"})),r.a.createElement(te.a,{className:"prog-list"},Array.from(l.values()).map(function(e,a){var t=e.id,n=e.nom,c=e.simbol,o=e.centres;return r.a.createElement(re.a,{key:a,button:!0,className:"list-button"},r.a.createElement(ta.a,null,r.a.createElement(oa.a,{src:"logos/".concat(c),alt:n})),r.a.createElement(oe.a,{primary:n,secondary:"Centres: "+Object.keys(o).sort().map(function(e){return"".concat(I.cursCurt(e),": ").concat(o[e].length)}).join(", "),onClick:h(t)}),r.a.createElement(ea.a,null,r.a.createElement(ra.a,{onChange:b(t),checked:p.has(t)})))})))),r.a.createElement(Ke,{data:t,programa:null,centre:null,zona:null,cursos:u,currentPrograms:p,polygons:d,mapChanged:E,updateMap:g}))})},xa=t(85),_a=t.n(xa),Ta=t(86),Ba=t.n(Ta),Ra=t(88),za=t.n(Ra),Fa=t(87),La=t.n(Fa),Da=t(45),qa=t.n(Da),Ua=t(215),Za=t.n(Ua),Ga=t(70),Wa=t.n(Ga),Ya=t(71),Ja=t.n(Ya),Ha=t(213),Va=t.n(Ha),Xa=t(214),Qa=t.n(Xa);var Ka=function(e){var a=e.error,t=e.history,n=e.refetch;return r.a.createElement("div",{className:"err-msg"},r.a.createElement(J.a,null,r.a.createElement(Va.a,{className:"err-icon",color:"secondary"}),a||"Error desconegut!"),n&&r.a.createElement(ge.a,{className:"action-btn","aria-label":"Reintenta",onClick:n,variant:"outlined"},r.a.createElement(Qa.a,{className:"left-icon"}),"Reintenta")||t&&t.length>1&&r.a.createElement(ge.a,{className:"action-btn","aria-label":"Torna",variant:"outlined",onClick:function(){return t.goBack()}},r.a.createElement(qa.a,{className:"left-icon"}),"Torna"))},$a={escapeHtml:!1};function et(e,a,t){return r.a.createElement(_a.a,{className:e},r.a.createElement(Ba.a,{className:"small-padding-h",expandIcon:r.a.createElement(La.a,null)},r.a.createElement("h4",{style:{marginTop:0}},a)),r.a.createElement(za.a,{className:"small-padding-h"},t))}function at(e,a,t){return et(e,a,r.a.createElement("div",null,r.a.createElement(ue.a,$a,t)))}var tt=function(e){var a=e.history,t=e.match.params.id;return r.a.createElement(_.Consumer,null,function(e){var n=e.data,c=e.cursos,o=e.currentPrograms,l=e.polygons,i=e.mapChanged,s=e.updateMap,m=n.programes,u=n.estudis,p=n.ambitsCurr,d=n.ambitsInn,E=m.get(t);if(!E)return r.a.createElement(Ka,{error:"No hi ha cap programa amb el codi: ".concat(t),history:a});var g=E.nom,f=E.descripcio,h=E.link,b=E.ambCurr,v=E.ambInn,y=E.fitxa,N=E.video,C=E.objectius,k=E.requisits,w=E.compromisos,j=E.contacte,O=E.normativa,P=E.arees,M=E.simbol,S=E.tipus,I=E.centres;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(qa.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio programa"},r.a.createElement(de.a,{className:"paper"},r.a.createElement("div",{className:"logo-nom-seccio"},M&&r.a.createElement("img",{className:"seccio-logo",src:"logos/".concat(M),alt:g}),r.a.createElement("div",{className:"nom-seccio"},r.a.createElement(J.a,{variant:"h4"},g))),r.a.createElement("div",{id:"descripcio"},r.a.createElement(ue.a,$a,f)),r.a.createElement("div",{id:"info"},y&&r.a.createElement(ge.a,{variant:"contained",className:"info-btn",href:y,title:"Descarrega la fitxa del projecte"},r.a.createElement(Za.a,{className:"left-icon"}),"Fitxa"),h&&r.a.createElement(ge.a,{variant:"contained",className:"info-btn",href:h,target:"_blank",rel:"noopener noreferrer",title:h},r.a.createElement(Wa.a,{className:"left-icon"}),"Web"),j&&r.a.createElement(ge.a,{variant:"contained",className:"info-btn",href:"mailto:".concat(j),target:"_blank",rel:"noopener noreferrer",title:j},r.a.createElement(Ja.a,{className:"left-icon"}),"Contacte"),N&&r.a.createElement("div",{className:"prog-video"},r.a.createElement("br",null),r.a.createElement(ue.a,$a,N))),C&&at("prog-objectius","Objectius",C),k&&at("prog-requisits","Requisits",k),w&&at("prog-compromisos","Compromisos",w),O&&at("prog-normativa","Normativa",O),et("prog-ambits","\xc0mbits, \xe0rees i nivells",r.a.createElement("div",null,v.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"\xc0mbits d'innovaci\xf3:"),r.a.createElement("ul",null,v.map(function(e){return r.a.createElement("li",{key:e},d.get(e))}))),b.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"\xc0mbits curriculars:"),r.a.createElement("ul",null,b.map(function(e){return r.a.createElement("li",{key:e},p.get(e))}))),P.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"\xc0rees curriculars:"),r.a.createElement("ul",null,P.map(function(e,a){return r.a.createElement("li",{key:a},e)}))),S.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"Nivells educatius:"),r.a.createElement("ul",null,S.map(function(e,a){return r.a.createElement("li",{key:a},u.get(e))}))))),r.a.createElement("br",null),Object.keys(I).map(function(e,a){return r.a.createElement(_a.a,{key:a},r.a.createElement(Ba.a,{className:"small-padding-left",expandIcon:r.a.createElement(La.a,null)},r.a.createElement(J.a,{className:"wider"},"CURS ".concat(e)),r.a.createElement(J.a,null,"".concat(I[e].length," ").concat(1===I[e].length?"centre":"centres"))),r.a.createElement(za.a,{className:"small-padding-h"},r.a.createElement(te.a,{dense:!0},I[e].sort(function(e,a){return e.nom.localeCompare(a.nom)}).map(function(e,a){var n=e.id,c=e.nom,o=e.municipi,l=e.titols;return r.a.createElement(re.a,{key:a,button:!0,component:"a",href:"#/centre/".concat(n),className:"small-padding-h"},r.a.createElement(oe.a,{primary:"".concat(c," (").concat(o,")"),secondary:l&&l[t]?l[t]:null}))}))))}))),r.a.createElement(Ke,{data:n,programa:t,centre:null,zona:null,cursos:c,currentPrograms:o,polygons:l,mapChanged:i,updateMap:s}))})},nt="agregat",rt="https://clic.xtec.cat/pub/logos/";var ct=function(e){var a=e.history,t=e.match.params.codi;return r.a.createElement(_.Consumer,null,function(e){var n=e.data,c=e.currentPrograms,o=e.polygons,l=e.mapChanged,i=e.updateMap,s=n.centres.get(t);if(!s)return r.a.createElement(Ka,{error:"No hi ha cap programa amb el codi: ".concat(t),history:a});var m=s.nom,u=s.municipi,p=s.comarca,d=s.estudis,E=s.adreca,f=s.web,h=s.logo,b=s.nodes,v=s.web_propi,y=s.tel,N=s.mail,C=s.twitter,k=s.sstt,w=s.se,j=s.public,O=s.programes,P=s.titols,M=b||f||v,S=function(e){return function(){return a.push("/programa/".concat(e))}},A=n.poligons.get(k),x=n.poligons.get(w);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(qa.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio centre"},r.a.createElement(de.a,{className:"paper"},r.a.createElement("div",{className:"logo-nom-seccio"},h&&r.a.createElement("img",{className:"seccio-logo",src:"".concat(/^http.?:\/\//.test(h)?"":rt).concat(h),alt:m}),r.a.createElement("div",{className:"nom-seccio"},r.a.createElement(J.a,{variant:"h4"},m),r.a.createElement("div",{id:"tipus"},"Centre ",j?"p\xfablic":"privat concertat"))),r.a.createElement("div",{className:"adreca"},r.a.createElement("p",null,E,r.a.createElement("br",null),"".concat(u," (").concat(p,")"),r.a.createElement("br",null),y&&r.a.createElement(r.a.Fragment,null,"Tel. ".concat(y)))),r.a.createElement("div",{id:"info"},M&&r.a.createElement(ge.a,{variant:"contained",className:"info-btn",href:M,target:"_blank",rel:"noopener noreferrer",title:M},r.a.createElement(Wa.a,{className:"left-icon"}),"Web"),C&&r.a.createElement(ge.a,{variant:"contained",className:"info-btn",href:"https://twitter.com/".concat(C),target:"_blank",rel:"noopener noreferrer",title:C},"Twitter"),N&&r.a.createElement(ge.a,{variant:"contained",className:"info-btn",href:"mailto:".concat(N),target:"_blank",rel:"noopener noreferrer",title:N},r.a.createElement(Ja.a,{className:"left-icon"}),"Contacte")),r.a.createElement("div",{id:"estudis"},r.a.createElement("h4",null,"Estudis"),r.a.createElement("ul",null,d.map(function(e,a){return r.a.createElement("li",{key:a},n.estudis.get(e))}))),r.a.createElement("div",{id:"zones"},r.a.createElement("h4",null,"Zones:"),r.a.createElement("ul",null,A&&r.a.createElement("li",null,r.a.createElement(g.b,{to:"/zona/".concat(k)},A.nom)),x&&r.a.createElement("li",null,r.a.createElement(g.b,{to:"/zona/".concat(w)},x.nom)))),r.a.createElement("h4",null,"Programes d'innovaci\xf3 educativa on participa:"),r.a.createElement("br",null),"perCurs"===nt&&Object.keys(O).map(function(e,a){return r.a.createElement(_a.a,{key:a},r.a.createElement(Ba.a,{expandIcon:r.a.createElement(La.a,null)},r.a.createElement(J.a,{className:"wider"},"CURS ",e),r.a.createElement(J.a,null,"".concat(O[e].length," ").concat(1===O[e].length?"programa":"programes"))),r.a.createElement(za.a,null,r.a.createElement("ul",null,O[e].map(function(e,a){var t=e.id,n=e.nom;return r.a.createElement("li",{key:a},r.a.createElement(ge.a,{onClick:S(t)},n,P&&P[t]?" - ".concat(P[t]):""))}))))})||r.a.createElement(te.a,null,I.plainArray(O).map(function(e,a){var t=e.id,n=e.nom,c=e.simbol,o=e.cursos;return r.a.createElement(re.a,{key:a,button:!0,className:"no-padding-h-small"},r.a.createElement(ta.a,null,r.a.createElement(oa.a,{src:"logos/".concat(c),alt:n})),r.a.createElement(oe.a,{primary:n,secondary:P&&P[t]||"".concat(o.sort().join(", ")),onClick:S(t)}))})))),r.a.createElement(Ke,{data:n,programa:null,centre:t,zona:null,currentPrograms:c,polygons:o,mapChanged:l,updateMap:i}))})};var ot=function(e){var a=e.history,t=e.match.params.key;return r.a.createElement(_.Consumer,null,function(e){var n=e.data,c=e.cursos,o=e.currentPrograms,l=e.polygons,i=e.mapChanged,s=e.updateMap,m=n.poligons.get(t);if(!m)return r.a.createElement(Ka,{error:"No hi ha cap zona amb el codi: ".concat(t),history:a});var u=m.tipus,p=m.nom,d=m.logo,E=m.cp,g=m.adreca,f=m.municipi,h=m.comarca,b=m.tel,v=m.fax,y=m.correu,N=m.web,C=m.centresInn,k=function(e){return function(){return a.push("/centre/".concat(e))}},w=function(e){return function(){return a.push("/programa/".concat(e))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(qa.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio zona"},r.a.createElement(de.a,{className:"paper"},r.a.createElement("div",{className:"logo-nom-seccio"},d&&r.a.createElement("img",{className:"seccio-logo ".concat("ST"===u?"":"se-logo"),src:d,alt:p}),r.a.createElement("div",{className:"nom-seccio"},r.a.createElement(J.a,{variant:"h4"},p))),r.a.createElement("div",{className:"adreca"},r.a.createElement("p",null,g,r.a.createElement("br",null),"".concat(E," ").concat(f," (").concat(h,")"),r.a.createElement("br",null),b&&r.a.createElement(r.a.Fragment,null,"Tel. ".concat(b),r.a.createElement("br",null)),v&&r.a.createElement(r.a.Fragment,null,"Fax. ".concat(v),r.a.createElement("br",null)))),r.a.createElement("div",{id:"info"},N&&r.a.createElement(ge.a,{variant:"contained",className:"info-btn",href:N,target:"_blank",rel:"noopener noreferrer",title:N},r.a.createElement(Wa.a,{className:"left-icon"}),"Web"),y&&r.a.createElement(ge.a,{variant:"contained",className:"info-btn",href:"mailto:".concat(y),target:"_blank",rel:"noopener noreferrer",title:y},r.a.createElement(Ja.a,{className:"left-icon"}),"Contacte")),r.a.createElement("h4",null,"Centres d'aquest servei que participen en programes d'innovaci\xf3:"),r.a.createElement(te.a,null,Array.from(C).sort(function(e,a){return e.nom.localeCompare(a.nom)}).map(function(e,a){var t=e.id,n=e.nom,c=e.municipi,o=e.programes,l=e.titols;return r.a.createElement(re.a,{key:a,button:!0,className:"small-padding-h"},r.a.createElement(oe.a,{primary:"".concat(n," (").concat(c,")"),onClick:k(t)}),r.a.createElement("div",{className:"prog-icons"},I.plainArray(o).map(function(e,a){var t=e.id,n=e.nom,c=e.simbol,o="".concat(n).concat(l&&l[t]?": ".concat(l[t]):"");return r.a.createElement(L.a,{key:a,className:"prog-icon","aria-label":o,onClick:w(t)},r.a.createElement("img",{src:"logos/".concat(c),alt:o,title:o}))})))})))),r.a.createElement(Ke,{data:n,programa:null,centre:null,zona:t,cursos:c,currentPrograms:o,polygons:l,mapChanged:i,updateMap:s}))})},lt=t(216),it=t.n(lt);var st=function(){return r.a.createElement("div",{className:"err-msg"},r.a.createElement(J.a,null,"S'estan carregant les dades..."),r.a.createElement(it.a,{className:"progress"}))},mt=t(56);var ut=function(){return r.a.createElement("footer",null,r.a.createElement("div",{className:"footer-content"},r.a.createElement("a",{className:"logo-gencat",href:"https://web.gencat.cat/",title:"Generalitat de Catalunya",target:"_top"},"gencat.cat"),r.a.createElement(J.a,{variant:"body2",className:"copyright"},r.a.createElement("a",{href:"https://innovacio.xtec.cat/"},mt.c," v",mt.d),r.a.createElement("br",null),r.a.createElement("a",{href:"http://www.xtec.cat"},"\xa9 2019 Departament d'Educaci\xf3 de la Generalitat de Catalunya"),r.a.createElement("br",null),r.a.createElement("a",{href:"https://spdx.org/licenses/".concat(mt.a,".html")},"Llic\xe8ncia P\xfablica de la Uni\xf3 Europea ",mt.a),r.a.createElement("br",null),r.a.createElement("a",{href:mt.b.url},mt.b.url),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("a",{href:"https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/"},r.a.createElement("strong",null,"Av\xeds legal")),": D\u2019acord amb l\u2019article 17.1 de la Llei 19/2014, la \xa9Generalitat de Catalunya permet la reutilitzaci\xf3 dels continguts i de les dades sempre que se'n citi la font i la data d'actualitzaci\xf3 i que no es desnaturalitzi la informaci\xf3 (article 8 de la Llei 37/2007) i tamb\xe9 que no es contradigui amb una llic\xe8ncia espec\xedfica.")))},pt=t(219),dt=t.n(pt),Et=t(217),gt=t.n(Et),ft=t(218),ht=t.n(ft),bt=Number("25");var vt=function(e){var a=e.history,t=e.match.params.query,n=r.a.useState(0),c=Object(i.a)(n,2),o=c[0],l=c[1],s=r.a.useState(bt),m=Object(i.a)(s,2),u=m[0],p=m[1],d=r.a.useState([]),E=Object(i.a)(d,2),g=E[0],f=E[1],h=r.a.useState(""),b=Object(i.a)(h,2),v=b[0],y=b[1];return r.a.createElement(_.Consumer,null,function(e){var n=e.fuseFuncs;t!==v&&(y(t),f(n.reduce(function(e,a){return e.concat(a.search(t))},[])));var c=function(e,t){return function(n){a.push("/".concat(e,"/").concat(t))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(qa.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio cerca"},r.a.createElement(de.a,{className:"paper"},r.a.createElement("h2",null,'Resultats de la cerca "',v,'"'),0===g.length&&r.a.createElement("p",null,"No s'ha trobat cap element co\xefncident amb el criteri de cerca!")||r.a.createElement("div",null,r.a.createElement(te.a,{component:"ul"},g.slice(o*u,(o+1)*u).map(function(e,a){var t=e.item,n=t.nom,o=t.id,l=t.tipus;return r.a.createElement(re.a,{key:a,button:!0,onClick:c(l,o)},r.a.createElement(ie.a,null,"programa"===l?r.a.createElement(gt.a,null):r.a.createElement(ht.a,null)),r.a.createElement(oe.a,{primary:n}))})),r.a.createElement("hr",null),r.a.createElement(dt.a,{classes:{spacer:"hidden",toolbar:"no-padding"},component:"nav",page:o,rowsPerPage:u,onChangeRowsPerPage:function(e){return p(e.target.value)},count:g.length,onChangePage:function(e,a){return l(a)},labelDisplayedRows:function(e){var a=e.from,t=e.to,n=e.count;return"Resultats ".concat(a," al ").concat(t," de ").concat(n)},labelRowsPerPage:"Resultats per p\xe0gina:"})))))})},yt="0.8",Nt="0.000001",Ct="0.4",kt=Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_TILE_LAYER:"wikimedia",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiZnJuY2VzYyIsImEiOiJjanU1b3BkZ2owYThsNDR0M3A2MzBjczg2In0.5zKGaoSJeQOeiWZyOj8ByQ",REACT_APP_PRESERVE_MAP_BOUNDS:"true",REACT_APP_MAX_DENSITY:"0.8",REACT_APP_MIN_DENSITY:"0.000001",REACT_APP_MINMAX_DENSITY:"0.4",REACT_APP_MODE_PROG_CENTRE:"agregat",REACT_APP_ITEMS_PER_PAGE:"25",REACT_APP_LOGO_BASE:"https://clic.xtec.cat/pub/logos/"}).REACT_APP_DEBUG_GLOBAL_VAR||"",wt=Object(k.createMuiTheme)({palette:{primary:{main:"#333"},secondary:{main:"#c00000"},error:{main:j.a[500]}},typography:{fontFamily:["Open Sans","Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(","),useNextVariants:!0},overrides:{MuiStepIcon:{completed:{color:"#c00000 !important"}}}}),jt=function(e){function a(){var e;return Object(m.a)(this,a),(e=Object(p.a)(this,Object(d.a)(a).call(this))).updateMap=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.setStateMod(Object(s.a)({},a,{mapChanged:t,currentProgramsChanged:n})),window.requestAnimationFrame(function(){n&&e.updateLayersDensity(e.state.programa?new Set([e.state.programa]):e.state.currentPrograms,e.state.cursos),t&&window.setTimeout(function(){return e.setStateMod({mapChanged:!1})},0)})},e.contentUpdated=function(a,t){a.location.pathname!==t.location.pathname&&(e.checkForLayerUpdate(a.location.pathname),window.scrollTo(0,0))},e.checkForLayerUpdate=function(a){if(/^\/(programes|programa\/|centre\/|zona\/)/.test(a)){var t=/^\/programa\/(.*)$/.exec(a),n=t&&2===t.length?t[1]:null;e.updateMap({programa:n},!0,!0)}},e.updateLayersDensity=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.state.data,r=n.poligons,c=n.programes;r.forEach(function(e){e.density=Nt,e.estudisBase={},e.estudisPart={},e.centresPart=new Set});var o={};a.forEach(function(e){var a=c.get(e);a&&a.tipus.length&&Object.keys(a.centres).length&&(a.tipus.forEach(function(e){r.forEach(function(a){a.estudisBase[e]=a.centres[e]||0})}),Object.keys(a.centres).forEach(function(e){t&&!t.includes(e)||a.centres[e].forEach(function(e){o[e.id]=e})}))}),Object.values(o).forEach(function(e){var a=r.get(e.sstt),t=r.get(e.se);e.estudis.forEach(function(n){a&&a.estudisBase[n]&&(a.estudisPart[n]=a.estudisPart[n]?a.estudisPart[n]+1:1,a.centresPart.add(e.id)),t&&t.estudisBase[n]&&(t.estudisPart[n]=t.estudisPart[n]?t.estudisPart[n]+1:1,t.centresPart.add(e.id))})});var l=0,i=0;r.forEach(function(e){var a=0,t=0;Object.keys(e.estudisPart).forEach(function(n){e.estudisBase[n]&&(a+=e.estudisPart[n],t+=e.estudisBase[n])}),t>0&&(e.density=a/t,"ST"===e.tipus?l=Math.max(l,e.density):i=Math.max(i,e.density))});var s=l>Nt&&l<Ct?Ct/l:l>yt?yt/l:1,m=i>Nt&&i<Ct?Ct/i:i>yt?yt/i:1;r.forEach(function(e){return e.density*="ST"===e.tipus?s:m})},e.menuItems=[{id:"presenta",name:"Presentaci\xf3",path:"/"},{id:"programes",name:"Programes",path:"/programes"}],e.state=Object(s.a)({},x,{updateMap:e.updateMap,fuseFuncs:[],menuItems:e.menuItems}),e}return Object(E.a)(a,e),Object(u.a)(a,[{key:"setStateMod",value:function(e){var a=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.setState(e,function(){kt&&(window[kt]=a.state),t&&t()})}},{key:"loadData",value:function(){var e=this;return this.setStateMod({loading:!0}),Promise.all(["data/programes.json","data/instancies.json","data/centres.json","data/poligons.json","data/estudis.json"].map(function(e){return fetch(e,{method:"GET",credentials:"same-origin"}).then(I.handleFetchErrors).then(function(e){return e.json()})})).then(function(a){var t=Object(i.a)(a,5),n=t[0],r=t[1],c=t[2],o=t[3],m=t[4];c=I.sortObjectArrayBy(c,["sstt","municipi","nom"]),n=I.sortObjectArrayBy(n,"nom"),o=I.sortObjectArrayBy(o,["tipus","id","key"]),c.forEach(function(e){e.programes=[]}),o.forEach(function(e){e.poligons=e.poligons.map(function(e){return e.split(",").map(function(e){return e.split("|").map(function(e){return Number(e)})})}),e.centresInn=new Set,e.density=Nt,e.estudisBase={},e.estudisPart={},e.centresPart=new Set});var u=new Set;n.forEach(function(e){if(u.add(e.id),e.centres={},0===e.tipus.length){var a="".concat(e.nom," ").concat(e.nomCurt," ").concat(e.descripcio);/(FP|fp|[pP]rofessio)/.test(a)?e.tipus=["CFPM","CFPS"]:/(infantil|prim\xe0ria|escola)/.test(a)?e.tipus=["EINF2C","EPRI"]:e.tipus=["EINF2C","EPRI","ESO"]}});var p=new Map(c.map(function(e){return[e.id,e]})),d=new Map(n.map(function(e){return[e.id,e]})),E=new Map(o.map(function(e){return[e.key,e]}));r.forEach(function(e){var a=d.get(e.programa),t=p.get(e.centre);a&&t?((a.centres[e.curs]=a.centres[e.curs]||[]).push(t),(t.programes[e.curs]=t.programes[e.curs]||[]).push(a),t.sstt&&E.get(t.sstt).centresInn.add(t),t.se&&E.get(t.se).centresInn.add(t),e.titol&&(a.titols||(a.titols={}),a.titols[t.id]="".concat(a.titols[t.id]?"".concat(a.titols[t.id],", "):"",'"').concat(e.titol,'" (').concat(e.curs,")"),t.titols||(t.titols={}),t.titols[a.id]="".concat(t.titols[a.id]?"".concat(t.titols[a.id],", "):"",'"').concat(e.titol,'" (').concat(e.curs,")"))):console.log("WARNING: Inst\xe0ncia amb programa o centre desconegut: ".concat(e.programa," - ").concat(e.centre," - ").concat(e.curs))});var g={caseSensitive:!1,shouldSort:!0,tokenize:!0,matchAllTokens:!0,includeScore:!0,includeMatches:!0,threshold:.3,location:0,distance:4,maxPatternLength:32,minMatchCharLength:2},f=[new P.a(n.map(function(e){var a=e.id,t=e.nom,n=e.descripcio,r=e.titols,c=e.ambCurr,o=(e.ambInn,e.arees),l=e.objectius,i=e.requisits,s=e.compromisos,u=e.contacte,p=e.normativa;return{id:a,nom:t,descripcio:n,titols:r?Object.values(r).join(", "):"",ambCurr:c.map(function(e){return m.ambitsCurr[e]}).join(", "),ambInn:c.map(function(e){return m.ambitsInn[e]}).join(", "),arees:o.join(", "),objectius:l,requisits:i,compromisos:s,contacte:u,normativa:p,tipus:"programa"}}),Object(s.a)({},g,{keys:["id","nom","descripcio","titols","ambCurr","ambInn","arees","objectius","requisits","compromisos","contacte","normativa"]})),new P.a(c.map(function(e){var a=e.id,t=e.nom,n=e.municipi,r=e.comarca,c=e.titols;return{id:a,nom:"".concat(t," (").concat(n,")"),comarca:r,titols:c?Object.values(c).join(", "):"",tipus:"centre"}}),Object(s.a)({},g,{keys:["id","nom","comarca","titols"]}))],h=Object(s.a)({},e.state.data,{programes:d,centres:p,poligons:E,estudis:new Map(Object.entries(m.estudis)),nivells:new Map(Object.entries(m.nivells)),ambitsCurr:new Map(Object.entries(m.ambitsCurr)),ambitsInn:new Map(Object.entries(m.ambitsInn)),cursosDisp:m.cursos});e.setStateMod({data:h,dataLoaded:!0,polygons:[{name:"Serveis Territorials",shapes:o.filter(function(e){return"ST"===e.tipus})},{name:"Serveis Educatius de Zona",shapes:o.filter(function(e){return"SEZ"===e.tipus})}],cursos:Object(l.a)(h.cursosDisp),fuseFuncs:f,currentPrograms:u,loading:!1,error:!1})}).catch(function(a){console.log(a),e.setStateMod({error:a.toString()})})}},{key:"componentDidMount",value:function(){var e=this;I.loadGFont("Open Sans"),this.loadData().then(function(){e.checkForLayerUpdate(window.location.hash?window.location.hash.substr(1):"/")})}},{key:"render",value:function(){var e=this.state,a=e.error,t=e.loading;return r.a.createElement(g.a,{basename:window.location.pathname},r.a.createElement(y.a,null,r.a.createElement(C.a,{theme:wt},r.a.createElement(_.Provider,{value:this.state},r.a.createElement(b,{updateHandler:this.contentUpdated},r.a.createElement(se,null),r.a.createElement("div",{id:"filler"}),r.a.createElement("main",null,t&&r.a.createElement(st,null)||a&&r.a.createElement(Ka,{error:a,refetch:this.loadData})||r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{exact:!0,path:"/",component:be}),r.a.createElement(f.a,{path:"/programes",component:Aa}),r.a.createElement(f.a,{path:"/centre/:codi",component:ct}),r.a.createElement(f.a,{path:"/programa/:id",component:tt}),r.a.createElement(f.a,{path:"/zona/:key",component:ot}),r.a.createElement(f.a,{path:"/cerca/:query",component:vt}))),r.a.createElement(ut,null))))))}}]),a}(n.Component);jt.contextType=_;var Ot=jt,Pt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Mt(e,a){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(Ot,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var a="".concat(".","/service-worker.js");Pt?(function(e,a){fetch(e).then(function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Mt(e,a)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(a,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Mt(a,e)})}}()},56:function(e){e.exports={c:"Mapa de la Innovaci\xf3 Educativa a Catalunya",d:"1.0.26-beta",b:{type:"git",url:"https://github.com/projectestac/mapa-innovacio-edu"},a:"EUPL-1.2"}}},[[222,1,2]]]);
//# sourceMappingURL=main.157aa9a3.chunk.js.map