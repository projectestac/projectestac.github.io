(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{232:function(e,a,t){e.exports=t(550)},237:function(e,a,t){},550:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(29),o=t.n(c),l=(t(237),t(238),t(239),t(240),t(231)),i=t(24),s=t(39),m=t(69),u=t(70),p=t(73),d=t(71),f=t(74),g=t(26),E=t(56),h=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(p.a)(this,Object(d.a)(a).call(this,e))).updateHandler=e.updateHandler,t}return Object(f.a)(a,e),Object(u.a)(a,[{key:"componentDidUpdate",value:function(e){this.updateHandler&&this.updateHandler(this.props,e)}},{key:"render",value:function(){return this.props.children}}]),a}(r.a.Component),b=Object(E.f)(h),v=t(230),y=t.n(v),N=t(139),w=t.n(N),k=t(104),C=t(138),j=t.n(C),O=t(142),x=t.n(O),M=t(200),P=t.n(M);function S(e){if(!e.ok)throw Error(e.statusText||"Error desconegut");return e}function T(e){return Object.values(e).reduce(function(e,a){return e+a},0)}function I(e){return 9===e.length?"".concat(e.substr(0,5)).concat(e.substr(7,2)):e}function z(e,a,t){return r.a.createElement(r.a.Fragment,null,e.map(function(n,c){var o=n.titol,l=n.fitxa,i=n.video,s=n.curs;return r.a.createElement("span",{key:c},l||i?r.a.createElement("span",null,r.a.createElement(g.b,{to:"/projecte/".concat(a,"|").concat(t,"|").concat(c)},'"'.concat(o,'"'))," (".concat(s,")")):r.a.createElement("span",null,'"'.concat(o,'" (').concat(s,")")),c<e.length-1&&r.a.createElement("span",null,", "))}))}function F(e){return!(!e||!e.find(function(e){return e.fitxa||e.video}))}var B=Object.entries({autoplay:0,cc_lang_pref:"ca",hl:"ca",fs:1,modestbranding:1,rel:0}).map(function(e){return"".concat(e[0],"=").concat(e[1])}).join("&");function A(e){var a=e.url,t=e.title,n=void 0===t?"":t,c=e.width,o=void 0===c?800:c,l=e.height,i=void 0===l?600:l,s=e.className,m=a||"",u=/(youtu\.be\/|[?&]v=)([^&]+)/.exec(a);if(u&&3===u.length){var p=u[2];m="https://www.youtube.com/embed/".concat(p,"?").concat(B)}return r.a.createElement("iframe",{className:s,title:n,src:m,width:o,height:i,type:"text/html",allowFullScreen:!0})}var L={programes:new Map,centres:new Map,poligons:new Map,estudis:new Map,nivells:new Map,ambitsCurr:new Map,ambitsInn:new Map,cursosDisp:[]},_={loading:!0,dataLoaded:!1,error:!1,polygons:[],currentPrograms:new Set,programa:null,cursos:[],mapChanged:!0,tabMode:!1,currentTab:0,currentPrjTab:0,dlgOpen:!1,updateMap:function(){return null},fuseFuncs:[],menuItems:[],data:L},q=r.a.createContext(_),D=t(204),R=t.n(D),W=t(140),Z=t.n(W),U=t(48),G=t.n(U),H=t(205),J=t.n(H),V=t(207),Y=t.n(V),Q=t(106),X=t.n(Q),$=t(19),K=t.n($),ee=t(202),ae=t.n(ee),te=t(203),ne=t.n(te);var re=function(e){var a=e.closeFn,t=void 0===a?function(){return null}:a,n=e.history,c=e.mini,o=void 0!==c&&c,l=r.a.useState(""),s=Object(i.a)(l,2),m=s[0],u=s[1],p=function(e){e.preventDefault(),t(),n.push("/cerca/".concat(m)),u("")};return r.a.createElement("form",{className:"search-bar",onSubmit:p},r.a.createElement(G.a,{className:"search-btn",color:"inherit","aria-label":"Cerca",title:"Cerca",onClick:p},r.a.createElement(X.a,null)),r.a.createElement(ae.a,{"aria-label":"Cerca text...",title:"Cerca text...",className:"search-text",value:m,InputProps:{disableUnderline:!0},onChange:function(e){return u(e.target.value)}}),!o&&r.a.createElement(G.a,{className:"search-close",color:"inherit","aria-label":"Tanca",title:"Tanca",onClick:t},r.a.createElement(ne.a,null)))},ce=t(206),oe=t.n(ce),le=t(33),ie=t.n(le),se=t(32),me=t.n(se),ue=t(34),pe=t.n(ue),de=t(109),fe=t.n(de);var ge=Object(E.f)(function(e){var a=e.history,t=e.location,n=r.a.useState(!1),c=Object(i.a)(n,2),o=c[0],l=c[1],s=r.a.useState(!1),m=Object(i.a)(s,2),u=m[0],p=m[1];return r.a.createElement(q.Consumer,null,function(e){var n=e.menuItems,c=(e.searchFn,n&&n.length>0),i=function(e){return function(){l(!1),e.path&&a.push(e.path)}};return n.forEach(function(e){return e.current=e.path===t.pathname}),r.a.createElement(r.a.Fragment,null,r.a.createElement(R.a,{className:"header",position:"fixed"},r.a.createElement(Z.a,{disableGutters:!0},c&&r.a.createElement(G.a,{className:"main-menu-button",color:"inherit","aria-label":"Seccions",title:"Seccions",onClick:function(){return l(!0)}},r.a.createElement(J.a,null)),r.a.createElement("div",{className:"main-header-block"},r.a.createElement("div",{className:"top-bar"},r.a.createElement("a",{className:"logo-gencat",href:"https://web.gencat.cat/",title:"Generalitat de Catalunya",target:"_top"},"gencat.cat"),r.a.createElement(re,{className:"search-bar",history:a,mini:!0})),r.a.createElement(K.a,{className:"main-title",variant:"h6",color:"inherit",noWrap:!0},"Mapa de la innovaci\xf3 pedag\xf2gica"),r.a.createElement("ul",{className:"nav-bar"},n.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"nav-label",role:"button",current:e.current?"true":"false",onClick:i(e)},e.name))}))),r.a.createElement(G.a,{className:"search-btn-small",color:"inherit","aria-label":"Cerca",title:"Cerca",onClick:function(){return p(!u)}},r.a.createElement(X.a,null))),u&&r.a.createElement(re,{closeFn:function(){return p(!1)},history:a})),c&&r.a.createElement(oe.a,{variant:"persistent",anchor:"left",open:o},r.a.createElement(ie.a,null,r.a.createElement(me.a,{component:"li",divider:!0,button:!0,onClick:function(){return l(!1)}},r.a.createElement(fe.a,null,r.a.createElement(Y.a,null)),r.a.createElement(pe.a,{primary:"Tanca el men\xfa"})),n.map(function(e){return r.a.createElement(me.a,{component:"li",button:!0,key:e.id,onClick:i(e)},r.a.createElement(pe.a,{primary:e.name}))}))))})}),Ee=t(76),he=t.n(Ee),be=t(23),ve=t.n(be),ye=t(20),Ne=t.n(ye),we='\n<img src="logos/portada.png" style="max-width:100%;text-align:center;" alt="Mapa de la innovaci\xf3 pedag\xf2gica" />\n\n\xc9s voluntat del Departament d\u2019Educaci\xf3 acompanyar els centres educatius del pa\xeds en el proc\xe9s de\ntransformaci\xf3 educativa per donar resposta a les necessitats del segle XXI i recon\xe8ixer els esfor\xe7os\nque s\u2019estan fent en termes d\u2019innovaci\xf3 pedag\xf2gica.\n\nEl mapa de la innovaci\xf3 pedag\xf2gica de Catalunya \xe9s un instrument que situa en el territori i\nvisibilitza totes les iniciatives vinculades a la innovaci\xf3 i a la recerca educativa que es desenvolupa\nen els centres educatius i que han estat reconegudes pel Departament d\u2019Educaci\xf3 des del 2015, d\u2019acord\namb el <a href="http://xtec.gencat.cat/ca/innovacio/" target="_blank" rel="noopener noreferrer">Marc de la Innovaci\xf3 Pedag\xf2gica de Catalunya</a>. \n\nAmb el mapa de la innovaci\xf3 es pret\xe9n impulsar el treball en xarxa entre els centres que comparteixen\nobjectius al llarg del territori i posar en valor la informaci\xf3 que faciliti la presa de decisions a\ntota la comunitat educativa, a l\u2019administraci\xf3 i a altres agents. Aquesta presa de decisions ha de\npermetre promoure la inclusi\xf3, la cohesi\xf3 i l\u2019equitat, i facilitar la participaci\xf3 de tots els centres\nen l\u2019\xe8xit educatiu i la innovaci\xf3 per a la millora.\n\n',ke={escapeHtml:!1};var Ce=function(e){var a=e.history;return r.a.createElement(q.Consumer,null,function(e){var t=e.data;return r.a.createElement("section",{className:"seccio presenta"},r.a.createElement(ve.a,{className:"paper"},r.a.createElement(he.a,ke,we),r.a.createElement(Ne.a,{className:"close-intro-btn",variant:"outlined",onClick:function(){return a.push("/programes")}},"Acc\xe9s al mapa"),r.a.createElement("div",{className:"hidden"},t.programes&&Array.from(t.programes.values()).map(function(e,a){return r.a.createElement("div",{key:a},r.a.createElement("img",{alt:"",src:"logos/".concat(e.simbol)}),r.a.createElement("img",{alt:"",src:"logos/mini/".concat(e.simbol)}))}))))})},je=t(194),Oe=t(191),xe=t(136),Me=t(190),Pe=t(193),Se=t(192),Te=t(189),Ie={osm:{attribution:'&amp;copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},mapbox:{attribution:'Dades del mapa \xa9 contribu\xefdors de <a href="https://www.openstreetmap.org/">OpenStreetMap</a>, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imatges \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',url:"https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",id:"mapbox.streets",accessToken:"pk.eyJ1IjoiZnJuY2VzYyIsImEiOiJjanU1b3BkZ2owYThsNDR0M3A2MzBjczg2In0.5zKGaoSJeQOeiWZyOj8ByQ"},wikimedia:{attribution:'<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>',url:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png",minZoom:1,maxZoom:19}},ze={};var Fe=function(e){var a=e.type,t=void 0===a?"wikimedia":a;return ze[t]||(ze[t]=r.a.createElement(Te.a,Ie[t])),ze[t]},Be=t(31),Ae=t(8),Le=t(9),_e=t.n(Le);t(501);var qe=function(e){function a(){return Object(m.a)(this,a),Object(p.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(f.a)(a,e),Object(u.a)(a,[{key:"createLeafletElement",value:function(e){var a=e.clusterProps,t=void 0===a?{}:a,n=new _e.a.markerClusterGroup(Object(s.a)({},e,t));return this.contextValue=Object(s.a)({},e.leaflet,{layerContainer:n}),n}}]),a}(Be.a),De=Object(Ae.d)(qe),Re=t(208),We=t.n(Re),Ze="wikimedia",Ue=!0,Ge=[[40.5,.15],[42.9,3.34]],He=[[39.5,-.85],[43.9,4.34]],Je={showCoverageOnHover:!1,maxClusterRadius:30};function Ve(e){var a,t=e.points,n=void 0===t?[]:t,c=e.polygons,o=void 0===c?[]:c,l=e.estudis,i=void 0===l?[]:l,s=e.programa,m=void 0===s?null:s,u=e.poli,p=void 0===u?null:u,d=e.zoom,f=void 0===d?8:d,E=e.maxZoom,h=void 0===E?13:E,b=e.updateMap,v=[{name:"Mostra la participaci\xf3 per zones",flag:"showDensity",default:!1},{name:"Mostra els centres",flag:"showCentres",default:!0}],y=window.localStorage,N=function(e){return"true"===y.getItem(e)},w=function(e,a){return y.setItem(e,a)},k=window.sessionStorage,C=Ue&&null===p,j=C&&function(){var e=k.getItem("mapBounds");if(!e)return null;var a=e.split(",");return 4!==a.length?null:[[Number(a[1]),Number(a[0])],[Number(a[3]),Number(a[2])]]}(),O=function(e){var a;C&&e.target&&e.target.getBounds&&(a=e.target.getBounds(),k.setItem("mapBounds",a.toBBoxString()))},x=function(e){return function(a){var t=v.findIndex(function(e){return e.name===a.name});if(t>=0){var n="add"===e;y.setItem(v[t].flag,n),0===t&&n&&b({},!1,!1)}}},M=(a="currentLayer",Number(y.getItem(a)));w("currentLayer",M),v.forEach(function(e){var a=y.getItem(e.flag);w(e.flag,null===a?e.default:a)});var P=function(e){var a=e.centresPart.size,t=T(e.estudisPart),n=T(e.estudisBase),c=(n>0?t/n*100:0).toFixed(1);return r.a.createElement(je.a,null,r.a.createElement("h4",null,r.a.createElement(g.b,{to:"/zona/".concat(e.key)},e.nom)),a&&r.a.createElement("p",null,r.a.createElement("span",null,"Centres participants ".concat(m?"al programa seleccionat":"als programes seleccionats",": ").concat(a)),r.a.createElement("br",null),r.a.createElement("span",null,"\xcdndex de participaci\xf3: ".concat(c,"%")))||r.a.createElement("p",null,"No hi ha cap centre que participi als programes seleccionats."))};return r.a.createElement(Oe.a,Object.assign({className:"mapa markercluster-map"},{maxZoom:h,minZoom:f,bounds:p&&p.bounds||j||Ge,maxBounds:He,onBaseLayerChange:function(e){var a=o.findIndex(function(a){return a.name===e.name});a>=0&&(w("currentLayer",a),N(v[0].flag)&&b({},!1))},onOverlayAdd:x("add"),onOverlayRemove:x("remove"),onZoomEnd:O,onMoveEnd:O}),r.a.createElement(Fe,{type:Ze}),r.a.createElement(xe.b,{position:"topright"},o.map(function(e,a){return r.a.createElement(xe.b.BaseLayer,{name:e.name,key:a,checked:null!==p?a===("SEZ"===p.tipus?1:0):a===M},r.a.createElement(Me.a,null,e.shapes.filter(function(e){return null===p||p===e}).map(function(e,a){return r.a.createElement(Pe.a,{key:a,positions:e.poligons,weight:2,fillOpacity:0},P(e))})))}),r.a.createElement(xe.b.Overlay,{name:v[0].name,checked:null===p&&N(v[0].flag)},r.a.createElement(Me.a,null,o[M].shapes.filter(function(e){return null===p||p===e}).map(function(e,a){return r.a.createElement(Pe.a,{key:a,positions:e.poligons,weight:0,fillOpacity:e.density},P(e))}))),r.a.createElement(xe.b.Overlay,{name:v[1].name,checked:null!==p||N(v[1].flag)},r.a.createElement(De,{clusterProps:Je},n.map(function(e){return r.a.createElement(Se.a,{key:e.id,position:[e.lat,e.lng]},(a=e,r.a.createElement(je.a,null,r.a.createElement("h4",null,r.a.createElement(g.b,{to:"/centre/".concat(a.id)},a.nom)),r.a.createElement("p",null,a.adreca,r.a.createElement("br",null),r.a.createElement("a",{href:a.web,target:"_blank",rel:"noopener noreferrer"},a.web)),r.a.createElement("p",null,"".concat(a.estudis.map(function(e){return i.get(e)}).join(", "),".")))));var a})))),r.a.createElement(We.a,{position:"topleft",title:"Mostra el mapa a pantalla completa",titleCancel:"Surt de la pantalla completa"}))}var Ye="wikimedia",Qe=[[40.5,.15],[42.9,3.34]];function Xe(e){var a=e.point,t=e.center,n=void 0===t?[41.7,1.8]:t,c=e.zoom,o=void 0===c?8:c,l=e.maxZoom,i=void 0===l?19:l;return r.a.createElement(Oe.a,Object.assign({className:"mapa-centre"},{center:n,zoom:o,maxZoom:i,minZoom:8,maxBounds:Qe}),r.a.createElement(Fe,{type:Ye}),r.a.createElement(Se.a,{key:a.id,position:[a.lat,a.lng]}))}var $e=t(209),Ke=t.n($e),ea=t(210),aa=t.n(ea),ta=t(211),na=t.n(ta);var ra=function(e){var a=e.data,t=a.programes,n=a.centres,c=a.poligons,o=a.estudis,l=a.cursosDisp,i=e.programa,s=e.centre,m=e.zona,u=e.cursos,p=e.currentPrograms,d=e.polygons,f=e.mapChanged,g=e.updateMap,E=s?n.get(s):null,h=m?c.get(m):null,b=window.innerWidth,v=b<600?7:b<820?8:b<1300?7:8,y=function(e,a){var n=t.get(e);return n&&Object.keys(n.centres).forEach(function(e){u&&!u.includes(e)||n.centres[e].forEach(function(e){h&&!h.centresInn.has(e)||a.find(function(a){return a.id===e.id})||a.push(e)})}),a},N=[];return f||(E?N.push(E):i?y(i,N):p.forEach(function(e){return y(e,N)})),r.a.createElement("section",{className:"seccio smapa"},r.a.createElement(ve.a,{className:E?"paper":"paper no-padding-top"},E&&r.a.createElement(Xe,{point:E,center:[E.lat,E.lng],zoom:15,maxZoom:19})||r.a.createElement(r.a.Fragment,null,r.a.createElement(Ke.a,{className:"cursos",nonLinear:!0,alternativeLabel:!0,activeStep:null},l.map(function(e,a){return r.a.createElement(aa.a,{key:e},r.a.createElement(na.a,{onClick:(t=e,function(e){var a=[];l.forEach(function(e){(t===e&&!u.includes(e)||t!==e&&u.includes(e))&&a.push(e)}),g({cursos:a},!0,!0)}),completed:u.includes(e)},I(e)));var t})),r.a.createElement(Ve,{points:N,polygons:d,programa:i,poli:h,zoom:v,maxZoom:19,estudis:o,updateMap:g}))))},ca=t(216),oa=t.n(ca),la=t(114),ia=t.n(la),sa=t(217),ma=t.n(sa),ua=t(52),pa=t.n(ua),da=t(105),fa=t(212),ga=t.n(fa),Ea=t(215),ha=t.n(Ea),ba=t(214),va=t.n(ba),ya=t(213),Na=t.n(ya),wa=t(108),ka=t.n(wa),Ca=t(107),ja=t.n(Ca),Oa=t(87),xa=t.n(Oa),Ma=t(77),Pa=t.n(Ma),Sa=t(112),Ta=t.n(Sa),Ia=t(111),za=t.n(Ia);var Fa=function(e){var a=e.dlgOpen,t=e.data,n=t.programes,c=t.ambitsCurr,o=t.ambitsInn,l=t.nivells,m=e.updateMap,u=r.a.useState(""),p=Object(i.a)(u,2),d=p[0],f=p[1],g=r.a.useState(""),E=Object(i.a)(g,2),h=E[0],b=E[1],v=r.a.useState(Array.from(l).reduce(function(e,a){return e[Object(i.a)(a,1)[0]]=!0,e},{})),y=Object(i.a)(v,2),N=y[0],w=y[1],k=r.a.useState(new Set),C=Object(i.a)(k,2),j=C[0],O=C[1],x=function(){var e=new Set;n.forEach(function(a,t){""!==d&&!a.ambInn.includes(d)||""!==h&&!a.ambCurr.includes(h)||!Object.keys(N).find(function(e){return N[e]&&l.get(e).find(function(e){return a.tipus.includes(e)})})||e.add(t)}),O(e)};r.a.useMemo(x,[d,h,N]);var M=function(e){return function(a){e(a.target.value)}},P=function(e){return function(a){m(Object.assign({dlgOpen:!1},e&&{currentPrograms:j}||{}),!0,e)}};return r.a.createElement(ga.a,{open:a,onEnter:x,"aria-labelledby":"dialog-title",classes:{paper:"stretch-dlg"}},r.a.createElement(Na.a,{id:"dialog-title"},"Tipus de programes"),r.a.createElement(va.a,{className:"dialog-content"},r.a.createElement("div",{className:"nivells"},Array.from(l).map(function(e){var a,t=Object(i.a)(e,1)[0];return r.a.createElement(za.a,{key:t,className:"select-nivell",control:r.a.createElement(Ta.a,{onChange:(a=t,function(e){w(Object(s.a)({},N,Object(da.a)({},a,e.target.checked)))}),value:t,checked:N[t]}),label:t})})),r.a.createElement(ka.a,{className:"select-list"},r.a.createElement(ja.a,{htmlFor:"select-ambit-curr"},"\xc0mbit curricular"),r.a.createElement(xa.a,{value:h,onChange:M(b),inputProps:{name:"ambitCurr",id:"select-ambit-curr"}},r.a.createElement(Pa.a,{value:""},r.a.createElement("em",null,"Tots els \xe0mbits")),Array.from(c.keys()).sort().map(function(e){return r.a.createElement(Pa.a,{key:e,value:e},c.get(e))}))),r.a.createElement(ka.a,{className:"select-list"},r.a.createElement(ja.a,{htmlFor:"select-ambit-inn"},"\xc0mbit d'innovaci\xf3"),r.a.createElement(xa.a,{value:d,onChange:M(f),inputProps:{name:"ambitInn",id:"select-ambit-inn"}},r.a.createElement(Pa.a,{value:""},r.a.createElement("em",null,"Tots els \xe0mbits")),Array.from(o.keys()).sort().map(function(e){return r.a.createElement(Pa.a,{key:e,value:e},o.get(e))}))),r.a.createElement(K.a,{className:"info"},j.size," ",1===j.size?"programa seleccionat":"programes seleccionats")),r.a.createElement(ha.a,null,r.a.createElement(Ne.a,{onClick:P(!0),color:"primary"},"Aplica la selecci\xf3"),r.a.createElement(Ne.a,{onClick:P(!1),color:"primary"},"Cancel\xb7la")))},Ba=t(113),Aa=t.n(Ba),La=t(78),_a=t.n(La);var qa=function(e){var a=e.history;return r.a.createElement(q.Consumer,null,function(e){var t=e.data,n=e.data,c=n.programes,o=n.ambitsCurr,l=n.ambitsInn,i=n.nivells,s=e.cursos,m=e.currentPrograms,u=e.polygons,p=e.mapChanged,d=e.updateMap,f=e.tabMode,g=e.currentTab,E=e.dlgOpen,h=m.size===c.size,b=function(e){return function(){return a.push("/programa/".concat(e))}},v=function(e){return function(a){m[m.has(e)?"delete":"add"](e),d({currentPrograms:m,ambitCurr:"",ambitInn:"",nivell:""},!0,!0)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Fa,{dlgOpen:E,data:{programes:c,ambitsCurr:o,ambitsInn:l,nivells:i},updateMap:d}),f&&r.a.createElement(Aa.a,{className:"prog-tabs",value:g,onChange:function(e,a){return d({currentTab:a})},variant:"fullWidth"},r.a.createElement(_a.a,{label:"Mapa"}),r.a.createElement(_a.a,{label:"Programes"})),(!f||1===g)&&r.a.createElement("section",{className:"seccio programes"},r.a.createElement(ve.a,{className:"paper"},r.a.createElement("div",{className:"select-progs"},r.a.createElement(Ne.a,{variant:"outlined",color:"primary",onClick:function(){return d({dlgOpen:!0})}},"Selecciona per tipus"),r.a.createElement(za.a,{className:"select-all",labelPlacement:"start",control:r.a.createElement(Ta.a,{onChange:function(e){e.target.checked?c.forEach(function(e,a){return m.add(a)}):m.clear(),d({currentPrograms:m},!0,!0)},checked:h}),label:"Selecciona'ls tots"})),r.a.createElement(ie.a,{className:"prog-list"},Array.from(c.values()).map(function(e,a){var t=e.id,n=e.nom,c=e.simbol,o=e.centres;return r.a.createElement(me.a,{key:a,button:!0,className:"list-button"},r.a.createElement(ia.a,null,r.a.createElement(pa.a,{src:"logos/mini/".concat(c),alt:n})),r.a.createElement(pe.a,{primary:n,secondary:"Centres "+Object.keys(o).sort().map(function(e){return"".concat(I(e),": ").concat(o[e].length)}).join(", "),onClick:b(t)}),r.a.createElement(oa.a,null,r.a.createElement(ma.a,{onChange:v(t),checked:m.has(t)})))})))),(!f||0===g)&&r.a.createElement(ra,{data:t,programa:null,centre:null,zona:null,cursos:s,currentPrograms:m,polygons:u,mapChanged:p,updateMap:d}))})},Da=t(89),Ra=t.n(Da),Wa=t(90),Za=t.n(Wa),Ua=t(92),Ga=t.n(Ua),Ha=t(222),Ja=t.n(Ha),Va=t(91),Ya=t.n(Va),Qa=t(36),Xa=t.n(Qa),$a=t(220),Ka=t.n($a),et=t(221),at=t.n(et),tt=t(72),nt=t.n(tt),rt=t(218),ct=t.n(rt),ot=t(219),lt=t.n(ot);var it=function(e){var a=e.error,t=e.history,n=e.refetch;return r.a.createElement("div",{className:"err-msg"},r.a.createElement(K.a,null,r.a.createElement(ct.a,{className:"err-icon",color:"secondary"}),a||"Error desconegut!"),n&&r.a.createElement(Ne.a,{className:"action-btn","aria-label":"Reintenta",onClick:n,variant:"outlined"},r.a.createElement(lt.a,{className:"left-icon"}),"Reintenta")||t&&t.length>1&&r.a.createElement(Ne.a,{className:"action-btn","aria-label":"Torna",variant:"outlined",onClick:function(){return t.goBack()}},r.a.createElement(Xa.a,{className:"left-icon"}),"Torna"))},st="https://clic.xtec.cat/pub/fitxes/",mt={escapeHtml:!1};function ut(e,a,t){return r.a.createElement(Ra.a,{className:e},r.a.createElement(Za.a,{className:"small-padding-h",expandIcon:r.a.createElement(Ya.a,null)},r.a.createElement("h4",{style:{marginTop:0}},a)),r.a.createElement(Ga.a,{className:"small-padding-h"},t))}function pt(e,a,t){return ut(e,a,r.a.createElement("div",null,r.a.createElement(he.a,mt,t)))}var dt=function(e){var a=e.history,t=e.match.params.id;return r.a.createElement(q.Consumer,null,function(e){var n=e.data,c=e.cursos,o=e.currentPrograms,l=e.polygons,i=e.mapChanged,s=e.updateMap,m=n.programes,u=n.estudis,p=n.ambitsCurr,d=n.ambitsInn,f=m.get(t);if(!f)return r.a.createElement(it,{error:"No hi ha cap programa amb el codi: ".concat(t),history:a});var g=f.nom,E=f.descripcio,h=f.link,b=f.ambCurr,v=f.ambInn,y=f.fitxa,N=f.video,w=f.objectius,k=f.requisits,C=f.compromisos,j=f.contacte,O=f.normativa,x=f.arees,M=f.simbol,P=f.tipus,S=f.centres;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(Xa.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio programa"},r.a.createElement(ve.a,{className:"paper"},r.a.createElement("div",{className:"logo-nom-seccio"},M&&r.a.createElement("img",{className:"seccio-logo",src:"logos/".concat(M),alt:g}),r.a.createElement("div",{className:"nom-seccio"},r.a.createElement(K.a,{variant:"h4"},g))),r.a.createElement("div",{id:"descripcio"},r.a.createElement(he.a,mt,E)),r.a.createElement("div",{id:"info"},y&&r.a.createElement(Ne.a,{variant:"contained",className:"info-btn",href:"".concat(/^http.?:\/\//.test(y)?"":st).concat(y),title:"Descarrega la fitxa del projecte"},r.a.createElement(Ka.a,{className:"left-icon"}),"Fitxa"),h&&r.a.createElement(Ne.a,{variant:"contained",className:"info-btn",href:h,target:"_blank",rel:"noopener noreferrer",title:h},r.a.createElement(at.a,{className:"left-icon"}),"Web"),j&&r.a.createElement(Ne.a,{variant:"contained",className:"info-btn",href:"mailto:".concat(j),target:"_blank",rel:"noopener noreferrer",title:j},r.a.createElement(nt.a,{className:"left-icon"}),"Contacte"),N&&r.a.createElement("div",{className:"prog-video"},r.a.createElement("br",null),r.a.createElement(he.a,mt,N))),w&&pt("prog-objectius","Objectius",w),k&&pt("prog-requisits","Requisits",k),C&&pt("prog-compromisos","Compromisos",C),O&&pt("prog-normativa","Normativa",O),ut("prog-ambits","\xc0mbits, \xe0rees i nivells",r.a.createElement("div",null,v.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"\xc0mbits d'innovaci\xf3:"),r.a.createElement("ul",null,v.map(function(e){return r.a.createElement("li",{key:e},d.get(e))}))),b.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"\xc0mbits curriculars:"),r.a.createElement("ul",null,b.map(function(e){return r.a.createElement("li",{key:e},p.get(e))}))),x.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"\xc0rees curriculars:"),r.a.createElement("ul",null,x.map(function(e,a){return r.a.createElement("li",{key:a},e)}))),P.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"Nivells educatius:"),r.a.createElement("ul",null,P.map(function(e,a){return r.a.createElement("li",{key:a},u.get(e))}))))),r.a.createElement("br",null),Object.keys(S).sort().map(function(e,a){var n=!1;return r.a.createElement(Ra.a,{key:a},r.a.createElement(Za.a,{className:"small-padding-left",expandIcon:r.a.createElement(Ya.a,null)},r.a.createElement(K.a,{className:"wider"},"CURS ".concat(e)),r.a.createElement(K.a,null,"".concat(S[e].length," ").concat(1===S[e].length?"centre":"centres"))),r.a.createElement(Ga.a,{className:"small-padding-h flow-v"},r.a.createElement(ie.a,{className:"wider"},S[e].sort(function(e,a){return e.nom.localeCompare(a.nom)}).map(function(a,c){var o=a.id,l=a.nom,i=a.municipi,s=a.info,m=a.notCert,u=s&&F(s[t])?null:"#/centre/".concat(o),p=m.has("".concat(t,"|").concat(e));return n=n||p,r.a.createElement(me.a,{key:c,button:!0,component:u?"a":"div",href:u,className:"small-padding-h"},r.a.createElement(pe.a,{primary:"".concat(l," (").concat(i,")").concat(p?" *":""),secondary:s&&s[t]&&z(s[t],t,o)}))})),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Ja.a,null),r.a.createElement(K.a,{className:"padding-one"},"*: Participaci\xf3 en curs, pendent de certificar"))))}))),r.a.createElement(ra,{data:n,programa:t,centre:null,zona:null,cursos:c,currentPrograms:o,polygons:l,mapChanged:i,updateMap:s}))})},ft=t(115),gt=t.n(ft),Et=t(223),ht=t.n(Et),bt="https://clic.xtec.cat/pub/logos/";var vt=function(e){var a=e.history,t=e.match.params.codi;return r.a.createElement(q.Consumer,null,function(e){var n=e.data,c=e.currentPrograms,o=e.polygons,l=e.mapChanged,i=e.updateMap,s=n.centres.get(t);if(!s)return r.a.createElement(it,{error:"No hi ha cap programa amb el codi: ".concat(t),history:a});var m=s.nom,u=s.municipi,p=s.comarca,d=s.estudis,f=s.adreca,E=s.web,h=s.logo,b=s.nodes,v=s.web_propi,y=s.tel,N=s.mail,w=s.twitter,k=s.sstt,C=s.se,j=s.public,O=s.programes,x=s.info,M=s.notCert,P=b||E||v,S=n.poligons.get(k),T=n.poligons.get(C),I=!1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(Xa.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio centre"},r.a.createElement(ve.a,{className:"paper"},r.a.createElement("div",{className:"logo-nom-seccio"},h&&r.a.createElement("img",{className:"seccio-logo",src:"".concat(/^http.?:\/\//.test(h)?"":bt).concat(h),alt:m}),r.a.createElement("div",{className:"nom-seccio"},r.a.createElement(K.a,{variant:"h4"},m),r.a.createElement("div",{id:"tipus"},"Centre ",j?"p\xfablic":"privat concertat"))),r.a.createElement("div",{className:"adreca"},r.a.createElement("p",null,f,r.a.createElement("br",null),"".concat(u," (").concat(p,")"),r.a.createElement("br",null),y&&r.a.createElement(r.a.Fragment,null,"Tel. ".concat(y)))),r.a.createElement("div",{id:"info"},P&&r.a.createElement(Ne.a,{variant:"contained",className:"info-btn",href:P,target:"_blank",rel:"noopener noreferrer",title:P},r.a.createElement(gt.a,{className:"left-icon"}),"Web"),w&&r.a.createElement(Ne.a,{variant:"contained",className:"info-btn",href:"https://twitter.com/".concat(w),target:"_blank",rel:"noopener noreferrer",title:w},r.a.createElement(ht.a,{className:"left-icon"}),"Twitter"),N&&r.a.createElement(Ne.a,{variant:"contained",className:"info-btn",href:"mailto:".concat(N),target:"_blank",rel:"noopener noreferrer",title:N},r.a.createElement(nt.a,{className:"left-icon"}),"Contacte")),r.a.createElement("div",{id:"estudis"},r.a.createElement("h4",null,"Estudis"),r.a.createElement("ul",null,d.map(function(e,a){return r.a.createElement("li",{key:a},n.estudis.get(e))}))),r.a.createElement("div",{id:"zones"},r.a.createElement("h4",null,"Zones:"),r.a.createElement("ul",null,S&&r.a.createElement("li",null,r.a.createElement(g.b,{to:"/zona/".concat(k)},S.nom)),T&&r.a.createElement("li",null,r.a.createElement(g.b,{to:"/zona/".concat(C)},T.nom)))),r.a.createElement("h4",null,"Programes on participa:"),r.a.createElement("br",null),r.a.createElement(ie.a,null,function(e){var a={};return Object.keys(e).forEach(function(t){e[t].forEach(function(e){a[e.id]||(a[e.id]={id:e.id,nom:e.nom,simbol:e.simbol,cursos:[]}),a[e.id].cursos.push(t)})}),Object.values(a).sort(function(e,a){return e.nom.localeCompare(a.nom)})}(O).map(function(e,a){var n=e.id,c=e.nom,o=e.simbol,l=e.cursos,i=x&&F(x[n])?null:"#/programa/".concat(n);return r.a.createElement(me.a,{key:a,button:!0,className:"no-padding-h-small",component:i?"a":"div",href:i},r.a.createElement(ia.a,null,r.a.createElement(pa.a,{src:"logos/mini/".concat(o),alt:c})),r.a.createElement(pe.a,{primary:c,secondary:x&&x[n]&&z(x[n],n,t)||"".concat(1===l.length?"Curs":"Cursos"," ").concat(l.sort().map(function(e){var a=M.has("".concat(n,"|").concat(e));return I=I||a,"".concat(e).concat(a?" *":"")}).join(", "))}))})),I&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(K.a,null,"*: Participaci\xf3 en curs, pendent de certificar")))),r.a.createElement(ra,{data:n,programa:null,centre:t,zona:null,currentPrograms:c,polygons:o,mapChanged:l,updateMap:i}))})};var yt=function(e){var a=e.history,t=e.match.params.key;return r.a.createElement(q.Consumer,null,function(e){var n=e.data,c=e.cursos,o=e.currentPrograms,l=e.polygons,i=e.mapChanged,s=e.updateMap,m=n.poligons.get(t);if(!m)return r.a.createElement(it,{error:"No hi ha cap zona amb el codi: ".concat(t),history:a});var u=m.tipus,p=m.nom,d=m.logo,f=m.cp,E=m.adreca,h=m.municipi,b=m.comarca,v=m.tel,y=m.fax,N=m.correu,w=m.web,k=m.centresInn,C=m.programes,j=Array.from(C).sort(function(e,a){return e.nom.localeCompare(a.nom)});return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(Xa.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio zona"},r.a.createElement(ve.a,{className:"paper"},r.a.createElement("div",{className:"logo-nom-seccio"},d&&r.a.createElement("img",{className:"seccio-logo ".concat("ST"===u?"":"se-logo"),src:d,alt:p}),r.a.createElement("div",{className:"nom-seccio"},r.a.createElement(K.a,{variant:"h4"},p))),r.a.createElement("div",{className:"adreca"},r.a.createElement("p",null,E,r.a.createElement("br",null),"".concat(f," ").concat(h," (").concat(b,")"),r.a.createElement("br",null),v&&r.a.createElement(r.a.Fragment,null,"Tel. ".concat(v),r.a.createElement("br",null)),y&&r.a.createElement(r.a.Fragment,null,"Fax. ".concat(y),r.a.createElement("br",null)))),r.a.createElement("div",{id:"info"},w&&r.a.createElement(Ne.a,{variant:"contained",className:"info-btn",href:w,target:"_blank",rel:"noopener noreferrer",title:w},r.a.createElement(gt.a,{className:"left-icon"}),"Web"),N&&r.a.createElement(Ne.a,{variant:"contained",className:"info-btn",href:"mailto:".concat(N),target:"_blank",rel:"noopener noreferrer",title:N},r.a.createElement(nt.a,{className:"left-icon"}),"Contacte")),r.a.createElement("h4",null,"Programes amb pres\xe8ncia en aquest territori:"),r.a.createElement("br",null),j.map(function(e,a){var t=e.allCentres.filter(function(e){return k.has(e)}),n=t.length;return r.a.createElement(Ra.a,{key:a},r.a.createElement(Za.a,{classes:{root:"small-padding-left",content:"zona-prog"},expandIcon:r.a.createElement(Ya.a,null)},r.a.createElement(g.b,{className:"zona-prog-logo",to:"/programa/".concat(e.id)},r.a.createElement(pa.a,{src:"logos/mini/".concat(e.simbol),alt:e.nom})),r.a.createElement(K.a,{className:"wider"},e.nom),r.a.createElement(K.a,null,"".concat(n," centre").concat(1===n?"":"s"))),r.a.createElement(Ga.a,{className:"small-padding-h"},r.a.createElement(ie.a,null,t.map(function(a,t){var n=a.id,c=a.nom,o=a.municipi,l=a.info,i=(a.allPrograms,l&&F(l[e.id])?null:"#/centre/".concat(n));return r.a.createElement(me.a,{key:t,button:!0,component:i?"a":"div",href:i,className:"small-padding-h"},r.a.createElement(pe.a,{primary:"".concat(c," (").concat(o,")"),secondary:l&&l[e.id]&&z(l[e.id],e.id,n)}))}))))}))),r.a.createElement(ra,{data:n,programa:null,centre:null,zona:t,cursos:c,currentPrograms:o,polygons:l,mapChanged:i,updateMap:s}))})},Nt=t(225),wt=t.n(Nt),kt=t(224),Ct=t.n(kt),jt="https://clic.xtec.cat/pub/logos/",Ot="https://clic.xtec.cat/pub/projectes/";var xt=function(e){var a=e.history,t=e.match.params.id,n=void 0===t?"":t;return r.a.createElement(q.Consumer,null,function(e){var t,c,o,l,s,m=e.data,u=e.currentPrjTab,p=e.updateMap,d=m.programes,f=m.centres,E=n.split("|"),h=Object(i.a)(E,3),b=h[0],v=h[1],y=h[2];if(!b||!v||!y||isNaN(l=Number(y))||!(t=d.get(b))||!(c=f.get(v))||!(o=t.info[v])||o.length<=l||!(s=o[l]))return r.a.createElement(it,{error:'No hi ha cap projecte amb el codi "'.concat(n,'"'),history:a});var N=s,w=N.titol,k=N.fitxa,C=N.video,j=N.curs,O=c,x=O.id,M=O.nom,P=O.municipi,S=O.logo,T=t,I=T.id,z=T.nom,F=T.simbol,B=!!k&&!!C;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(Xa.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio projecte"},r.a.createElement(ve.a,{className:"paper"},r.a.createElement(K.a,{variant:"h4"},'Projecte "',w,'"'),r.a.createElement("div",{className:"info-proj"},r.a.createElement("img",{src:S?"".concat(/^http.?:\/\//.test(S)?"":jt).concat(S):"logos/logo_".concat(M.startsWith("Escola")?"cole":"insti",".png"),alt:M}),r.a.createElement(K.a,{variant:"h6"}," ",r.a.createElement(g.b,{to:"/centre/".concat(x)},M),r.a.createElement("br",null),P),r.a.createElement("img",{src:"logos/".concat(F),alt:z}),r.a.createElement(K.a,{variant:"h6"}," ",r.a.createElement(g.b,{to:"/programa/".concat(I)},z),r.a.createElement("br",null),"Curs ",j)),r.a.createElement("div",{className:"proj-media"},B&&r.a.createElement(Aa.a,{className:"proj-tabs",value:u,onChange:function(e,a){return p({currentPrjTab:a})},variant:"fullWidth"},r.a.createElement(_a.a,{label:"Video",icon:r.a.createElement(Ct.a,null)}),r.a.createElement(_a.a,{label:"Fitxa",icon:r.a.createElement(wt.a,null)})),C&&(!B||0===u)&&r.a.createElement(A,{className:"proj-video",title:"V\xeddeo del projecte",url:C}),k&&(!B||1===u)&&r.a.createElement("iframe",{className:"proj-pdf",title:"Fitxa del projecte",src:"".concat(/^https?:\/\//.test(k)?"":Ot).concat(k),width:"100%",height:"100%",type:"application/pdf",allowFullScreen:!0})))))})},Mt=t(226),Pt=t.n(Mt);var St=function(){return r.a.createElement("div",{className:"err-msg"},r.a.createElement(K.a,null,"S'estan carregant les dades..."),r.a.createElement(Pt.a,{className:"progress"}))},Tt=t(58);var It=function(){return r.a.createElement("footer",null,r.a.createElement("div",{className:"footer-content"},r.a.createElement("a",{className:"logo-gencat",href:"https://web.gencat.cat/",title:"Generalitat de Catalunya",target:"_top"},"gencat.cat"),r.a.createElement(K.a,{variant:"body2",className:"copyright"},r.a.createElement("a",{href:"https://innovacio.xtec.cat/"},Tt.c," v",Tt.d),r.a.createElement("br",null),r.a.createElement("a",{href:"http://www.xtec.cat"},"\xa9 2019 Departament d'Educaci\xf3 de la Generalitat de Catalunya"),r.a.createElement("br",null),r.a.createElement("a",{href:"https://spdx.org/licenses/".concat(Tt.a,".html")},"Llic\xe8ncia P\xfablica de la Uni\xf3 Europea ",Tt.a),r.a.createElement("br",null),r.a.createElement("a",{href:Tt.b.url},Tt.b.url),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("strong",null,"B\xfastia de contacte"),": ",r.a.createElement("a",{href:"mailto:innovacio@xtec.cat"},"innovacio@xtec.cat"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("a",{href:"https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/"},r.a.createElement("strong",null,"Av\xeds legal")),": D\u2019acord amb l\u2019article 17.1 de la Llei 19/2014, la \xa9Generalitat de Catalunya permet la reutilitzaci\xf3 dels continguts i de les dades sempre que se'n citi la font i la data d'actualitzaci\xf3 i que no es desnaturalitzi la informaci\xf3 (article 8 de la Llei 37/2007) i tamb\xe9 que no es contradigui amb una llic\xe8ncia espec\xedfica.")))},zt=t(229),Ft=t.n(zt),Bt=t(227),At=t.n(Bt),Lt=t(228),_t=t.n(Lt),qt=Number("25");var Dt=function(e){var a=e.history,t=e.match.params.query,n=void 0===t?"":t;n=n.trim();var c=r.a.useState(0),o=Object(i.a)(c,2),l=o[0],s=o[1],m=r.a.useState(qt),u=Object(i.a)(m,2),p=u[0],d=u[1],f=r.a.useState([]),g=Object(i.a)(f,2),E=g[0],h=g[1],b=r.a.useState(""),v=Object(i.a)(b,2),y=v[0],N=v[1];return r.a.createElement(q.Consumer,null,function(e){var t=e.fuseFuncs;n!==y&&(N(n),h(t.reduce(function(e,a){return e.concat(a.search(n))},[])));var c=function(e,t){return function(n){a.push("/".concat(e,"/").concat(t))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(Ne.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(Xa.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio cerca"},r.a.createElement(ve.a,{className:"paper"},r.a.createElement("h2",null,'Resultats de la cerca "',y,'"'),0===E.length&&r.a.createElement("p",null,"No s'ha trobat cap element co\xefncident amb el criteri de cerca!")||r.a.createElement("div",null,r.a.createElement(ie.a,{component:"ul"},E.slice(l*p,(l+1)*p).map(function(e,a){var t=e.item,n=t.nom,o=t.id,l=t.tipus,i=t.simbol;return r.a.createElement(me.a,{key:a,button:!0,onClick:c(l,o)},r.a.createElement(fe.a,null,i?r.a.createElement(pa.a,{src:"logos/mini/".concat(i),alt:n}):"programa"===l?r.a.createElement(At.a,null):r.a.createElement(_t.a,null)),r.a.createElement(pe.a,{primary:n}))})),r.a.createElement("hr",null),r.a.createElement(Ft.a,{classes:{spacer:"hidden",toolbar:"no-padding"},component:"nav",page:l,rowsPerPage:p,onChangeRowsPerPage:function(e){return d(e.target.value)},count:E.length,onChangePage:function(e,a){return s(a)},labelDisplayedRows:function(e){var a=e.from,t=e.to,n=e.count;return"Resultats ".concat(a," al ").concat(t," de ").concat(n)},labelRowsPerPage:"Resultats per p\xe0gina:"})))))})},Rt="0.8",Wt="0.000001",Zt="0.4",Ut=Object(k.createMuiTheme)({palette:{primary:{main:"#333"},secondary:{main:"#c00000"},error:{main:j.a[500]}},typography:{fontFamily:["Open Sans","Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(","),useNextVariants:!0},overrides:{MuiStepIcon:{completed:{color:"#c00000 !important"}}}}),Gt=function(e){function a(){var e;return Object(m.a)(this,a),(e=Object(p.a)(this,Object(d.a)(a).call(this))).updateMap=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.setStateMod(Object(s.a)({},a,{mapChanged:t,currentProgramsChanged:n}),r),window.requestAnimationFrame(function(){n&&e.updateLayersDensity(e.state.programa?new Set([e.state.programa]):e.state.currentPrograms,e.state.cursos),t&&window.setTimeout(function(){return e.setStateMod({mapChanged:!1})},0)})},e.contentUpdated=function(a,t){a.location.pathname!==t.location.pathname&&(e.checkForLayerUpdate(a.location.pathname),window.scrollTo(0,0))},e.checkForLayerUpdate=function(a){if(/^\/(programes|programa\/|centre\/|zona\/)/.test(a)){var t=/^\/programa\/(.*)$/.exec(a),n=t&&2===t.length?t[1]:null;e.updateMap({programa:n},!0,!0)}},e.updateLayersDensity=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.state.data,r=n.poligons,c=n.programes;r.forEach(function(e){e.density=Wt,e.estudisBase={},e.estudisPart={},e.centresPart=new Set});var o={};a.forEach(function(e){var a=c.get(e);a&&a.tipus.length&&Object.keys(a.centres).length&&(a.tipus.forEach(function(e){r.forEach(function(a){a.estudisBase[e]=a.centres[e]||0})}),Object.keys(a.centres).forEach(function(e){t&&!t.includes(e)||a.centres[e].forEach(function(e){o[e.id]=e})}))}),Object.values(o).forEach(function(e){var a=r.get(e.sstt),t=r.get(e.se);e.estudis.forEach(function(n){a&&a.estudisBase[n]&&(a.estudisPart[n]=a.estudisPart[n]?a.estudisPart[n]+1:1,a.centresPart.add(e.id)),t&&t.estudisBase[n]&&(t.estudisPart[n]=t.estudisPart[n]?t.estudisPart[n]+1:1,t.centresPart.add(e.id))})});var l=0,i=0;r.forEach(function(e){var a=0,t=0;Object.keys(e.estudisBase).forEach(function(n){e.estudisBase[n]&&(a+=e.estudisPart[n]||0,t+=e.estudisBase[n])}),t>0&&(e.density=Math.max(Wt,a/t),"ST"===e.tipus?l=Math.max(l,e.density):i=Math.max(i,e.density))});var s=l>Wt&&l<Zt?Zt/l:l>Rt?Rt/l:1,m=i>Wt&&i<Zt?Zt/i:i>Rt?Rt/i:1;r.forEach(function(e){return e.density*="ST"===e.tipus?s:m})},e.menuItems=[{id:"presenta",name:"Presentaci\xf3",path:"/"},{id:"programes",name:"Programes",path:"/programes"},{id:"projectes",name:"Projectes",path:"/programa/1001"}],e.state=Object(s.a)({},_,{updateMap:e.updateMap,fuseFuncs:[],menuItems:e.menuItems}),e}return Object(f.a)(a,e),Object(u.a)(a,[{key:"setStateMod",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.setState(e,function(){a&&a()})}},{key:"loadData",value:function(){var e=this;return this.setStateMod({loading:!0}),Promise.all(["data/programes.json","data/instancies.json","data/centres.json","data/poligons.json","data/estudis.json"].map(function(e){return fetch(e,{method:"GET",credentials:"same-origin"}).then(S).then(function(e){return e.json()})})).then(function(a){var t=Object(i.a)(a,5),n=t[0],r=t[1],c=t[2],o=t[3],m=t[4];c.forEach(function(e){e.programes={},e.allPrograms=new Set,e.notCert=new Set}),o.forEach(function(e){e.poligons=e.poligons.map(function(e){return e.split(",").map(function(e){return e.split("|").map(function(e){return Number(e)})})}),e.centresInn=new Set,e.programes=new Set,e.density=Wt,e.estudisBase={},e.estudisPart={},e.centresPart=new Set});var u=new Set;n.forEach(function(e){u.add(e.id),e.centres={},e.allCentres=new Set});var p=new Map(c.map(function(e){return[e.id,e]})),d=new Map(n.map(function(e){return[e.id,e]})),f=new Map(o.map(function(e){return[e.key,e]}));r.forEach(function(e){var a=e.programa,t=e.centre,n=e.curs,r=e.titol,c=e.cert,o=e.fitxa,l=e.video,i=d.get(a),s=p.get(t);if(i&&s){if((i.centres[n]=i.centres[n]||[]).push(s),i.allCentres.add(s),(s.programes[n]=s.programes[n]||[]).push(i),s.allPrograms.add(i),s.sstt){var m=f.get(s.sstt);m.centresInn.add(s),m.programes.add(i)}if(s.se){var u=f.get(s.se);u.centresInn.add(s),u.programes.add(i)}if(r){var g={titol:r,curs:n};o&&(g.fitxa=o),l&&(g.video=l),i.info||(i.info={}),i.info[s.id]||(i.info[s.id]=[]),i.info[s.id].push(g),s.info||(s.info={}),s.info[i.id]||(s.info[i.id]=[]),s.info[i.id].push(g)}c||s.notCert.add("".concat(a,"|").concat(n))}else console.log("WARNING: Inst\xe0ncia amb programa o centre desconegut: ".concat(a," - ").concat(t," - ").concat(n))}),p.forEach(function(e){e.allPrograms=Array.from(e.allPrograms).sort(function(e,a){return e.nom.localeCompare(a.nom)})}),d.forEach(function(e){e.allCentres=Array.from(e.allCentres).sort(function(e,a){return e.nom.localeCompare(a.nom)})});var g={caseSensitive:!1,shouldSort:!0,tokenize:!0,matchAllTokens:!0,includeScore:!0,includeMatches:!0,threshold:.3,location:0,distance:4,maxPatternLength:32,minMatchCharLength:2},E=[new x.a(n.map(function(e){var a=e.id,t=e.nom,n=e.simbol,r=e.descripcio,c=e.info,o=e.ambCurr,l=e.ambInn,i=e.arees,s=e.objectius,u=e.requisits,p=e.compromisos,d=e.contacte,f=e.normativa;return{id:a,nom:t,simbol:n,descripcio:r,info:c?Object.values(c).map(function(e){return e.map(function(e){return e.titol})}).join(", "):"",ambCurr:o.map(function(e){return m.ambitsCurr[e]}).join(", "),ambInn:l.map(function(e){return m.ambitsInn[e]}).join(", "),arees:i.join(", "),objectius:s,requisits:u,compromisos:p,contacte:d,normativa:f,tipus:"programa"}}),Object(s.a)({},g,{keys:["id","nom","descripcio","info","ambCurr","ambInn","arees","objectius","requisits","compromisos","contacte","normativa"]})),new x.a(c.map(function(e){var a=e.id,t=e.nom,n=e.municipi,r=e.comarca,c=e.info;return{id:a,nom:"".concat(t," (").concat(n,")"),comarca:r,info:c?Object.values(c).map(function(e){return e.map(function(e){return e.titol})}).join(", "):"",tipus:"centre"}}),Object(s.a)({},g,{keys:["id","nom","comarca","info"]}))],h=Object(s.a)({},e.state.data,{programes:d,centres:p,poligons:f,estudis:new Map(Object.entries(m.estudis)),nivells:new Map(Object.entries(m.nivells)),ambitsCurr:new Map(Object.entries(m.ambitsCurr)),ambitsInn:new Map(Object.entries(m.ambitsInn)),cursosDisp:m.cursos});e.setStateMod({data:h,dataLoaded:!0,polygons:[{name:"Serveis Territorials",shapes:o.filter(function(e){return"ST"===e.tipus})},{name:"Serveis Educatius de Zona",shapes:o.filter(function(e){return"SEZ"===e.tipus})}],cursos:Object(l.a)(h.cursosDisp),fuseFuncs:E,currentPrograms:u,loading:!1,error:!1})}).catch(function(a){console.log(a),e.setStateMod({error:a.toString()})})}},{key:"checkTabMode",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=window.matchMedia("(max-width: 840px)").matches;this.state.tabMode!==e&&this.updateMap({tabMode:e})}},{key:"componentDidMount",value:function(){var e=this;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Roboto",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"300,400,500,600",t=document.createElement("link");t.href="https://fonts.googleapis.com/css?family=".concat(e,":").concat(a),t.rel="stylesheet",document.head.appendChild(t),new P.a(e).load().then(function(){return document.documentElement.classList.add(e.replace(" ","-").toLowerCase())}).catch(function(a){return console.error("Unable to load ".concat(e," font due to: ").concat(a))})}("Open Sans"),this.loadData().then(function(){e.checkTabMode(!0),window.addEventListener("resize",e.checkTabMode.bind(e)),window.setTimeout(function(){e.checkForLayerUpdate(window.location.hash?window.location.hash.substr(1):"/")},0)})}},{key:"render",value:function(){var e=this.state,a=e.error,t=e.loading;return r.a.createElement(g.a,{basename:window.location.pathname},r.a.createElement(y.a,null,r.a.createElement(w.a,{theme:Ut},r.a.createElement(q.Provider,{value:this.state},r.a.createElement(b,{updateHandler:this.contentUpdated},r.a.createElement(ge,null),r.a.createElement("div",{className:"filler"}),r.a.createElement("main",null,t&&r.a.createElement(St,null)||a&&r.a.createElement(it,{error:a,refetch:this.loadData})||r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/",component:Ce}),r.a.createElement(E.b,{path:"/programes",component:qa}),r.a.createElement(E.b,{path:"/centre/:codi",component:vt}),r.a.createElement(E.b,{path:"/programa/:id",component:dt}),r.a.createElement(E.b,{path:"/projecte/:id",component:xt}),r.a.createElement(E.b,{path:"/zona/:key",component:yt}),r.a.createElement(E.b,{path:"/cerca/:query",component:Dt}),r.a.createElement(E.a,{to:"/"}))),r.a.createElement(It,null))))))}}]),a}(n.Component);Gt.contextType=q;var Ht=Gt,Jt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Vt(e,a){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(Ht,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var a="".concat(".","/service-worker.js");Jt?(function(e,a){fetch(e).then(function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Vt(e,a)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(a,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Vt(a,e)})}}()},58:function(e){e.exports={c:"Mapa de la innovaci\xf3 pedag\xf2gica de Catalunya",d:"1.0.7",b:{type:"git",url:"https://github.com/projectestac/mapa-innovacio-edu"},a:"EUPL-1.2"}}},[[232,1,2]]]);
//# sourceMappingURL=main.977e7e02.chunk.js.map