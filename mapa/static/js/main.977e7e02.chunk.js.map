{"version":3,"sources":["utils/CheckRouteChanges.js","utils/Utils.js","AppContext.js","components/SearchBar.js","components/Header.js","literals.js","components/Presentacio.js","utils/TileLayer.js","utils/MarkerClusterGroup.js","components/MainMap.js","components/MapaCentre.js","components/MapSection.js","components/SelectProgramsDlg.js","components/Programes.js","components/Error.js","components/FitxaPrograma.js","components/FitxaCentre.js","components/FitxaZona.js","components/FitxaProjecte.js","components/Loading.js","components/Footer.js","components/Cerca.js","App.js","serviceWorker.js","index.js"],"names":["CheckRouteChanges","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","updateHandler","prevProps","children","React","Component","withRouter","handleFetchErrors","response","ok","Error","statusText","sumAll","obj","values","reduce","acc","v","cursCurt","curs","length","concat","substr","getInfoSpan","info","proj","centre","react_default","a","createElement","Fragment","map","_ref","n","titol","fitxa","video","key","react_router_dom","to","hasExtraInfo","find","inf","YOUTUBE_OPTIONS","entries","autoplay","cc_lang_pref","hl","fs","modestbranding","rel","e","join","VideoIframe","_ref2","url","_ref2$title","title","_ref2$width","width","_ref2$height","height","className","src","matches","exec","youTubeId","type","allowFullScreen","DEFAULT_DATA","programes","Map","centres","poligons","estudis","nivells","ambitsCurr","ambitsInn","cursosDisp","DEFAULT_STATE","loading","dataLoaded","error","polygons","currentPrograms","Set","programa","cursos","mapChanged","tabMode","currentTab","currentPrjTab","dlgOpen","updateMap","fuseFuncs","menuItems","data","AppContext","createContext","SearchBar","_ref$closeFn","closeFn","history","_ref$mini","mini","_React$useState","useState","_React$useState2","slicedToArray","searchText","setSearchText","search","ev","preventDefault","push","onSubmit","IconButton_default","color","aria-label","onClick","Search_default","TextField_default","value","InputProps","disableUnderline","onChange","target","Close_default","location","drawerOpened","setDrawerOpened","_React$useState3","_React$useState4","searchOpened","setSearchOpened","src_AppContext","Consumer","hasDrawer","searchFn","itemAction","item","path","forEach","mi","current","pathname","AppBar_default","position","Toolbar_default","disableGutters","Menu_default","href","components_SearchBar","Typography_default","variant","noWrap","id","role","name","Drawer_default","anchor","open","List_default","ListItem_default","component","divider","button","ListItemIcon_default","ChevronLeft_default","ListItemText_default","primary","intro","MD_OPTIONS","escapeHtml","Presentacio","Paper_default","with_html_default","Button_default","Array","from","p","alt","simbol","LAYERS","osm","attribution","mapbox","accessToken","process","wikimedia","minZoom","maxZoom","BUILT_LAYERS","getTileLayer","_ref$type","TileLayer","require","MarkerClusterGroup","_props$clusterProps","clusterProps","el","L","markerClusterGroup","objectSpread","contextValue","leaflet","layerContainer","MapLayer","withLeaflet","TILE_LAYER","PRESERVE_MAP_BOUNDS","MAP_BOUNDS","MAX_BOUNDS","MARKERCLUSTER_PROPS","showCoverageOnHover","maxClusterRadius","MainMap","_ref$points","points","_ref$polygons","_ref$estudis","_ref$programa","_ref$poli","poli","_ref$zoom","zoom","_ref$maxZoom","OVERLAYS","flag","default","OVERLAY_SETTINGS_STORAGE","window","localStorage","getBool","getItem","setVal","val","setItem","MAP_BOUNDS_STORAGE","sessionStorage","preserveBounds","currentlySavedBounds","str","split","Number","getSavedBounds","boundsChanged","bounds","getBounds","toBBoxString","overlayChange","ov","findIndex","overlayVisible","currentLayer","stored","popupZona","zona","centresPart","size","estudisPart","estudisBase","perCent","toFixed","Popup","nom","es_Map","assign","maxBounds","onBaseLayerChange","layerIndex","onOverlayAdd","onOverlayRemove","onZoomEnd","onMoveEnd","utils_TileLayer","LayersControl","i","BaseLayer","checked","tipus","LayerGroup","shapes","filter","sh","Polygon","positions","weight","fillOpacity","Overlay","density","utils_MarkerClusterGroup","pt","Marker","lat","lng","adreca","web","get","dist_default","titleCancel","MapaCentre","point","_ref$center","center","MapSection","_ref$data","singleCentre","w","innerWidth","addSchoolsOfProgram","progId","dest","prog","keys","includes","centresInn","has","c","Stepper_default","nonLinear","alternativeLabel","activeStep","k","Step_default","StepButton_default","result","completed","SelectProgramsDlg","ambitInn","setAmbitInn","ambitCurr","setAmbitCurr","_React$useState5","_React$useState6","nivellsChk","setNivellsChk","_React$useState7","_React$useState8","setCurrentPrograms","updateCurrentPrograms","progs","ambInn","ambCurr","nivell","tag","add","useMemo","listSelection","handle","closeDialog","Dialog_default","onEnter","aria-labelledby","classes","paper","DialogTitle_default","DialogContent_default","_ref4","FormControlLabel_default","control","Checkbox_default","defineProperty","label","FormControl_default","InputLabel_default","htmlFor","Select_default","inputProps","MenuItem_default","sort","DialogActions_default","Programes","_ref2$data","allSelected","handleProgClick","handleProgSelect","components_SelectProgramsDlg","Tabs_default","_ev","Tab_default","labelPlacement","_p","clear","_ref3","ListItemAvatar_default","Avatar_default","secondary","ListItemSecondaryAction_default","Switch_default","components_MapSection","refetch","ReportProblem_default","Refresh_default","goBack","ArrowBack_default","FITXA_BASE","createExpansionPanel","content","ExpansionPanel_default","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","style","marginTop","ExpansionPanelDetails_default","createMDExpansionPanel","mdContent","FitxaPrograma","match","params","components_Error","descripcio","link","objectius","requisits","compromisos","contacte","normativa","arees","test","CloudDownload_default","Info_default","Mail_default","t","hasNc","b","localeCompare","codi","municipi","notCert","nc","Divider_default","LOGO_BASE","FitxaCentre","comarca","logo","nodes","web_propi","tel","mail","twitter","sstt","se","pb","public","servei_territorial","servei_educatiu","Web_default","Twitter_default","container","c1","c2","plainArray","FitxaZona","cp","fax","correu","programesArray","allCentres","numCentres","root","allPrograms","FITXA_PROJ_BASE","FitxaProjecte","_ref$match$params$id","infoGroup","infoIndex","_id$split","_id$split2","prg","projNum","isNaN","_info","_centre","codiCentre","nomCentre","_programa","idProg","nomProg","simbolProg","startsWith","icon","Videocam_default","Assignment_default","Loading","CircularProgress_default","Footer","version","license","repository","DEFAULT_ITEMS_PER_PAGE","Cerca","_ref$match$params$que","query","trim","page","setPage","itemsPerPage","setItemsPerPage","queryResults","setQueryResults","currentQuery","setCurrentQuery","qr","ff","goToElement","slice","_ref3$item","Group_default","MapMarker_default","TablePagination_default","spacer","toolbar","rowsPerPage","onChangeRowsPerPage","count","onChangePage","labelDisplayedRows","labelRowsPerPage","MAX_DENSITY","MIN_DENSITY","MINMAX_DENSITY","theme","createMuiTheme","palette","main","color_error","typography","fontFamily","useNextVariants","overrides","MuiStepIcon","App","state","arguments","undefined","currentProgramsChanged","callback","setStateMod","requestAnimationFrame","updateLayersDensity","setTimeout","contentUpdated","checkForLayerUpdate","scrollTo","check","currentCentres","pid","program","ce","st","maxDensityST","maxDensitySE","d","Math","max","factorST","factorSE","setState","_this3","Promise","all","uri","fetch","method","credentials","then","json","_programes","_instancies","_centres","_poligons","_estudis","pts","vs","cert","cent","console","log","fuseOptions","caseSensitive","shouldSort","tokenize","matchAllTokens","includeScore","includeMatches","threshold","distance","maxPatternLength","minMatchCharLength","Fuse","infos","_ref5","toConsumableArray","catch","toString","tabs","matchMedia","_this4","fontName","weights","document","head","appendChild","FontFaceObserver","load","documentElement","classList","replace","toLowerCase","err","loadGFont","loadData","checkTabMode","addEventListener","bind","hash","_this$state","basename","CssBaseline_default","MuiThemeProvider_default","Provider","utils_CheckRouteChanges","components_Header","components_Loading","react_router","exact","components_Footer","contextType","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","src_App","getElementById","URL","origin","contentType","headers","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.977e7e02.chunk.js","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\n// Scroll to top on each router navigation\n// See: https://reacttraining.com/react-router/web/guides/scroll-restoration\nclass CheckRouteChanges extends React.Component {\n  constructor(props) {\n    super(props);\n    this.updateHandler = props.updateHandler;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.updateHandler)\n      this.updateHandler(this.props, prevProps);\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n\nexport default withRouter(CheckRouteChanges);\n","// From: https://github.com/zeit/next.js/issues/512#issuecomment-322026199\n\nimport React from 'react';\nimport { Link } from 'react-router-dom';\nimport FontFaceObserver from 'fontfaceobserver';\n\n/**\n * Asynchronous loading of Google fonts\n */\nexport function loadGFont(fontName = 'Roboto', weights = '300,400,500,600') {\n  const link = document.createElement('link');\n  link.href = `https://fonts.googleapis.com/css?family=${fontName}:${weights}`;\n  link.rel = 'stylesheet';\n\n  document.head.appendChild(link);\n  const fontLoader = new FontFaceObserver(fontName);\n  fontLoader.load()\n    .then(() => document.documentElement.classList.add(fontName.replace(' ', '-').toLowerCase()))\n    .catch(err => console.error(`Unable to load ${fontName} font due to: ${err}`));\n}\n\n/**\n * Handle errors on fetch calls\n * @param {Object} response \n */\nexport function handleFetchErrors(response) {\n  if (!response.ok)\n    throw Error(response.statusText || 'Error desconegut');\n  return response;\n}\n\n/**\n * Return the addition of all values in an object of type `{key: value, key: value, ...}` where all values are numbers.\n * @param {object} obj \n */\nexport function sumAll(obj) {\n  return Object.values(obj).reduce((acc, v) => acc + v, 0);\n}\n\n/**\n * Used in objects of type {curs1: [prog1, prog2, prog3, ...], curs2: [prog1, ...], ...}\n * Returns a single array of type: [{id: prog1.id, nom: prog1.nom, cursos: [curs1, curs2, ...]}, {id: prog2.id, nom: prog2.nom, cursos: [curs1, ...]}, ...]\n * @param {object} obj - Object structured as in the description\n * @returns {object[]} - The resulting array of objects of type 'program', with a 'cursos' field.\n */\nexport function plainArray(obj) {\n  const container = {};\n  Object.keys(obj).forEach(curs => {\n    obj[curs].forEach(prog => {\n      if (!container[prog.id]) {\n        container[prog.id] = {\n          id: prog.id,\n          nom: prog.nom,\n          simbol: prog.simbol,\n          cursos: [],\n        };\n      }\n      container[prog.id].cursos.push(curs);\n    });\n  });\n  return Object.values(container).sort((c1, c2) => c1.nom.localeCompare(c2.nom));\n}\n\n/**\n * Converts an expression of type '2015-2016' to '2015-16'\n */\nexport function cursCurt(curs) {\n  return curs.length === 9 ? `${curs.substr(0, 5)}${curs.substr(7, 2)}` : curs;\n}\n\n/**\n * Builds a `span` with all the information related to a specific project (titles, courses, cards. videos)\n * @param {Object} info - Array of objects with mandatory fields `titol` and `curs`, and optional fields `video` and `fitxa`\n * @returns {React.Component}\n */\nexport function getInfoSpan(info, proj, centre) {\n  return (\n    <>\n      {info.map(({ titol, fitxa, video, curs }, n) => {\n        return (\n          <span key={n}>\n            {(fitxa || video) ?\n              <span><Link to={`/projecte/${proj}|${centre}|${n}`}>{`\"${titol}\"`}</Link>{` (${curs})`}</span> :\n              <span>{`\"${titol}\" (${curs})`}</span>\n            }\n            {n < info.length - 1 && <span>, </span>}\n          </span>\n        );\n      })}\n    </>\n  );\n}\n\n/**\n * Checks if at least one of the elements of a \"info\" group has `fitxa` or `video`\n */\nexport function hasExtraInfo(info) {\n  return (info && info.find(inf => inf.fitxa || inf.video)) ? true : false;\n}\n\n/**\n * Options passed into YouTube embed URLs\n */\nconst YOUTUBE_OPTIONS = Object.entries({\n  autoplay: 0, // Don't automatically start the video\n  cc_lang_pref: 'ca', // Preferred language for captions\n  hl: 'ca', // Preferred language for interface\n  fs: 1, // Allow full screen\n  modestbranding: 1, // Reduced branding\n  rel: 0, // related videos (see https://developers.google.com/youtube/player_parameters#release_notes_08_23_2018)\n}).map((e) => `${e[0]}=${e[1]}`).join('&');\n\n/**\n * Generates an \"iframe\" with the provided url\n * When the url matches with a YouTube video player, an \"embed\" code is used instead.\n */\nexport function VideoIframe({ url, title = '', width = 800, height = 600, className }) {\n\n  let src = url || '';\n\n  // Check for YouTube\n  // See: https://stackoverflow.com/questions/18336873/regex-to-extract-youtube-video-id\n  let matches = /(youtu\\.be\\/|[?&]v=)([^&]+)/.exec(url);\n  if (matches && matches.length === 3) {\n    const youTubeId = matches[2];\n    src = `https://www.youtube.com/embed/${youTubeId}?${YOUTUBE_OPTIONS}`;\n  }\n\n  return (\n    <iframe\n      className={className}\n      title={title}\n      src={src}\n      width={width}\n      height={height}\n      type=\"text/html\"\n      allowFullScreen\n    />\n  );\n}\n\n","import React from 'react';\n\nexport const DEFAULT_DATA = {\n  programes: new Map(),\n  centres: new Map(),\n  poligons: new Map(),\n  estudis: new Map(),\n  nivells: new Map(),\n  ambitsCurr: new Map(),\n  ambitsInn: new Map(),\n  cursosDisp: [],\n};\n\nexport const DEFAULT_STATE = {\n  loading: true,\n  dataLoaded: false,\n  error: false,\n  polygons: [],\n  currentPrograms: new Set(),\n  programa: null,\n  cursos: [],\n  mapChanged: true,\n  tabMode: false,\n  currentTab: 0,\n  currentPrjTab: 0,\n  dlgOpen: false,\n  // Inmutable attributes\n  updateMap: () => null,\n  fuseFuncs: [],\n  menuItems: [],\n  data: DEFAULT_DATA,\n};\n\nconst AppContext = React.createContext(DEFAULT_STATE);\n\nexport default AppContext;\n","import React from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SearchIcon from '@material-ui/icons/Search';\n\nfunction SearchBar({ closeFn = () => null, history, mini = false }) {\n\n  const [searchText, setSearchText] = React.useState('');\n  const search = (ev) => {\n    ev.preventDefault();\n    closeFn();\n    history.push(`/cerca/${searchText}`);\n    setSearchText('');\n  };\n\n  return (\n    <form\n      className=\"search-bar\"\n      onSubmit={search}>\n      <IconButton\n        className=\"search-btn\"\n        color=\"inherit\"\n        aria-label=\"Cerca\"\n        title=\"Cerca\"\n        onClick={search}\n      >\n        <SearchIcon />\n      </IconButton>\n      <TextField\n        aria-label=\"Cerca text...\"\n        title=\"Cerca text...\"\n        className=\"search-text\"\n        value={searchText}\n        InputProps={{ disableUnderline: true }}\n        onChange={ev => setSearchText(ev.target.value)}\n      />\n      {!mini &&\n        <IconButton\n          className=\"search-close\"\n          color=\"inherit\"\n          aria-label=\"Tanca\"\n          title=\"Tanca\"\n          onClick={closeFn}\n        >\n          <CloseIcon />\n        </IconButton>\n      }\n    </form>\n  );\n}\n\nexport default SearchBar;\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport AppContext from '../AppContext';\nimport AppBar from '@material-ui/core/AppBar';\nimport ToolBar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Typography from '@material-ui/core/Typography';\nimport SearchBar from './SearchBar';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\n\nfunction Header({ history, location }) {\n\n  const [drawerOpened, setDrawerOpened] = React.useState(false);\n  const [searchOpened, setSearchOpened] = React.useState(false);\n\n  return (\n    <AppContext.Consumer>\n      {({ menuItems, searchFn }) => {\n\n        const hasDrawer = menuItems && menuItems.length > 0;\n\n        const itemAction = (item) => () => {\n          setDrawerOpened(false);\n          if (item.path)\n            history.push(item.path);\n        }\n\n        menuItems.forEach(mi => mi.current = mi.path === location.pathname);\n\n        return (\n          <>\n            <AppBar\n              className=\"header\"\n              position=\"fixed\"\n            >\n              <ToolBar\n                disableGutters={true}\n              >\n                {hasDrawer &&\n                  <IconButton\n                    className=\"main-menu-button\"\n                    color=\"inherit\"\n                    aria-label=\"Seccions\"\n                    title=\"Seccions\"\n                    onClick={() => setDrawerOpened(true)}\n                  >\n                    <MenuIcon />\n                  </IconButton>\n                }\n                <div className=\"main-header-block\">\n                  <div className=\"top-bar\">\n                    <a className=\"logo-gencat\" href=\"https://web.gencat.cat/\" title=\"Generalitat de Catalunya\" target=\"_top\">gencat.cat</a>\n                    <SearchBar {...{ className: 'search-bar', history, mini: true }} />\n                  </div>\n                  <Typography className=\"main-title\" variant=\"h6\" color=\"inherit\" noWrap>\n                    Mapa de la innovació pedagògica\n                </Typography>\n                  <ul className=\"nav-bar\">\n                    {menuItems.map(item => (\n                      <li key={item.id}>\n                        <div className=\"nav-label\" role=\"button\" current={item.current ? 'true' : 'false'} onClick={itemAction(item)}>{item.name}</div>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n                <IconButton\n                  className=\"search-btn-small\"\n                  color=\"inherit\"\n                  aria-label=\"Cerca\"\n                  title=\"Cerca\"\n                  onClick={() => setSearchOpened(!searchOpened)}\n                >\n                  <SearchIcon />\n                </IconButton>\n              </ToolBar>\n              {searchOpened && <SearchBar {...{ closeFn: () => setSearchOpened(false), history }} />}\n            </AppBar>\n            {\n              hasDrawer &&\n              <Drawer\n                variant=\"persistent\"\n                anchor=\"left\"\n                open={drawerOpened}\n              >\n                <List>\n                  <ListItem component=\"li\" divider button onClick={() => setDrawerOpened(false)}>\n                    <ListItemIcon>\n                      <ChevronLeftIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Tanca el menú\" />\n                  </ListItem>\n                  {menuItems.map(item => (\n                    <ListItem component=\"li\" button key={item.id} onClick={itemAction(item)}>\n                      <ListItemText primary={item.name} />\n                    </ListItem>\n                  ))}\n                </List>\n              </Drawer>\n            }\n          </>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default withRouter(Header);\n","// Textos utilitzats a l'aplicació\n\nexport const intro = `\n<img src=\"logos/portada.png\" style=\"max-width:100%;text-align:center;\" alt=\"Mapa de la innovació pedagògica\" />\n\nÉs voluntat del Departament d’Educació acompanyar els centres educatius del país en el procés de\ntransformació educativa per donar resposta a les necessitats del segle XXI i reconèixer els esforços\nque s’estan fent en termes d’innovació pedagògica.\n\nEl mapa de la innovació pedagògica de Catalunya és un instrument que situa en el territori i\nvisibilitza totes les iniciatives vinculades a la innovació i a la recerca educativa que es desenvolupa\nen els centres educatius i que han estat reconegudes pel Departament d’Educació des del 2015, d’acord\namb el <a href=\"http://xtec.gencat.cat/ca/innovacio/\" target=\"_blank\" rel=\"noopener noreferrer\">Marc de la Innovació Pedagògica de Catalunya</a>. \n\nAmb el mapa de la innovació es pretén impulsar el treball en xarxa entre els centres que comparteixen\nobjectius al llarg del territori i posar en valor la informació que faciliti la presa de decisions a\ntota la comunitat educativa, a l’administració i a altres agents. Aquesta presa de decisions ha de\npermetre promoure la inclusió, la cohesió i l’equitat, i facilitar la participació de tots els centres\nen l’èxit educatiu i la innovació per a la millora.\n\n`;\n\n","import React from 'react';\nimport AppContext from '../AppContext';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { intro } from '../literals';\n\nconst MD_OPTIONS = {\n  escapeHtml: false,\n};\n\nfunction Presentacio({ history }) {\n\n  return (\n    <AppContext.Consumer>\n      {({ data }) => {\n        return (\n          <section className=\"seccio presenta\">\n            <Paper className=\"paper\">\n              <ReactMarkdown {...MD_OPTIONS}>\n                {intro}\n              </ReactMarkdown>\n              <Button\n                className=\"close-intro-btn\"\n                variant=\"outlined\"\n                onClick={() => history.push('/programes')}\n              >Accés al mapa</Button>\n              <div className=\"hidden\">\n                { /* Preload icons in a hidden div */\n                  data.programes && Array.from(data.programes.values()).map((p, n) => (\n                    <div key={n}>\n                      <img alt=\"\" src={`logos/${p.simbol}`} />\n                      <img alt=\"\" src={`logos/mini/${p.simbol}`} />\n                    </div>\n                  ))\n                }\n              </div>\n            </Paper>\n          </section>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default Presentacio;","import React from 'react';\nimport { TileLayer } from 'react-leaflet';\n\nconst LAYERS = {\n  // Original OpenStreetMap\n  osm: {\n    attribution: '&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n    url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  },\n  // Mapbox.com\n  // ATENCIÓ: Max. 50.000 visualitzacions / mes\n  // Veure https://mapbox.com\n  // Provar amb id: `mapbox.satellite`, `mapbox.streets`...\n  mapbox: {\n    attribution: 'Dades del mapa © contribuïdors de <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a>, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imatges © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n    url: 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',\n    id: 'mapbox.streets',\n    accessToken: process.env.REACT_APP_MAPBOX_TOKEN || '',\n  },\n  // Wikimedia\n  wikimedia: {\n    attribution: '<a href=\"https://wikimediafoundation.org/wiki/Maps_Terms_of_Use\">Wikimedia</a>',\n    url: 'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png',\n    minZoom: 1,\n    maxZoom: 19,\n  }\n};\n\nconst BUILT_LAYERS = {};\n\nfunction getTileLayer({ type = 'wikimedia' }) {\n  if (!BUILT_LAYERS[type])\n    BUILT_LAYERS[type] = <TileLayer {...LAYERS[type]} />\n  return BUILT_LAYERS[type];\n}\n\nexport default getTileLayer;\n","// Workaround to erors in `react-leaflet-markercluster`\n// From: https://github.com/YUzhva/react-leaflet-markercluster/issues/71#issuecomment-466393028\n\nimport { MapLayer, withLeaflet } from 'react-leaflet';\nimport L from 'leaflet';\nrequire('leaflet.markercluster');\n// Moved to `index.js`\n// import 'leaflet.markercluster/dist/MarkerCluster.css';\n// import 'leaflet.markercluster/dist/MarkerCluster.Default.css';\n\nclass MarkerClusterGroup extends MapLayer {\n\n  createLeafletElement(props) {\n    const { clusterProps = {} } = props;\n    const el = new L.markerClusterGroup({ ...props, ...clusterProps });\n    this.contextValue = {\n      ...props.leaflet,\n      layerContainer: el\n    };\n    return el;\n  }\n}\n\nexport default withLeaflet(MarkerClusterGroup);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Map, Polygon, Marker, Popup, LayersControl, LayerGroup } from 'react-leaflet';\nimport TileLayer from '../utils/TileLayer';\nimport MarkerClusterGroup from '../utils/MarkerClusterGroup';\n// Moved to `index.js`:\n// import 'react-leaflet-fullscreen/dist/styles.css';\nimport FullscreenControl from 'react-leaflet-fullscreen';\nimport { sumAll } from '../utils/Utils';\n\n// See ../utils/TileLayer for all available options\nconst TILE_LAYER = process.env.REACT_APP_TILE_LAYER || 'wikimedia';\nconst PRESERVE_MAP_BOUNDS = (process.env.REACT_APP_PRESERVE_MAP_BOUNDS || 'true') === 'true';\n\n// Enlarge map bounds to make space for popups\nconst MAP_BOUNDS = [[40.50, 0.15], [42.90, 3.34]];\nconst MAX_BOUNDS = [[39.50, -0.85], [43.90, 4.34]];\n\n// Options for MarkerCluster\n// See: https://github.com/Leaflet/Leaflet.markercluster\nconst MARKERCLUSTER_PROPS = {\n  showCoverageOnHover: false, // Default is `true`\n  maxClusterRadius: 30, // Default is 80\n};\n\nexport default function MainMap({ points = [], polygons = [], estudis = [], programa = null, poli = null, zoom = 8, maxZoom = 13, updateMap }) {\n\n  // Optional overlays\n  const OVERLAYS = [\n    {\n      name: 'Mostra la participació per zones',\n      flag: 'showDensity',\n      default: false,\n    },\n    {\n      name: 'Mostra els centres',\n      flag: 'showCentres',\n      default: true,\n    },\n  ];\n\n  // Save overlay preferences to browser's local storage\n  const OVERLAY_SETTINGS_STORAGE = window.localStorage;\n  const getBool = key => OVERLAY_SETTINGS_STORAGE.getItem(key) === 'true';\n  const getInt = key => Number(OVERLAY_SETTINGS_STORAGE.getItem(key));\n  const setVal = (key, val) => OVERLAY_SETTINGS_STORAGE.setItem(key, val);\n\n  // Save the current map bounds in session storage, thus allowing to navigate between pages preserving map layout.\n  const MAP_BOUNDS_STORAGE = window.sessionStorage;\n  const saveBounds = (bounds) => MAP_BOUNDS_STORAGE.setItem('mapBounds', bounds.toBBoxString());\n  const getSavedBounds = () => {\n    const str = MAP_BOUNDS_STORAGE.getItem('mapBounds');\n    if (!str)\n      return null;\n    const values = str.split(',');\n    if (values.length !== 4)\n      return null;\n    return [[\n      Number(values[1]), // Lat SW\n      Number(values[0]), // Lng SW\n    ], [\n      Number(values[3]), // Lat NE\n      Number(values[2]), // Lng NE\n    ]];\n  };\n\n  // Don't preserve map bounds in `single polygon` mode\n  const preserveBounds = PRESERVE_MAP_BOUNDS && poli === null;\n  const currentlySavedBounds = preserveBounds && getSavedBounds();\n\n  // Handle zoom changes\n  const boundsChanged = ev => {\n    if (preserveBounds && ev.target && ev.target.getBounds)\n      saveBounds(ev.target.getBounds());\n  }\n\n  // Line width and opacity of polygons\n  const lineWidth = 2;\n  const minOpacity = 0;\n\n  // Force `updateMap` when changing some layout settings\n  const onBaseLayerChange = (ev) => {\n    const layerIndex = polygons.findIndex(p => p.name === ev.name);\n    if (layerIndex >= 0) {\n      setVal('currentLayer', layerIndex);\n      if (getBool(OVERLAYS[0].flag))\n        updateMap({}, false);\n    }\n  }\n\n  // Force `updateMap` when changing some overlay settings\n  const overlayChange = (type) => (ev) => {\n    const ov = OVERLAYS.findIndex(ov => ov.name === ev.name);\n    if (ov >= 0) {\n      const overlayVisible = (type === 'add');\n      OVERLAY_SETTINGS_STORAGE.setItem(OVERLAYS[ov].flag, overlayVisible);\n      if (ov === 0 && overlayVisible)\n        updateMap({}, false, false);\n    }\n  }\n\n  // Current layer defaults to \"SEZ\" (índex 1)\n  const currentLayer = getInt('currentLayer');\n  setVal('currentLayer', currentLayer);\n\n  // Set default or stored value in each overlay\n  OVERLAYS.forEach(ov => {\n    const stored = OVERLAY_SETTINGS_STORAGE.getItem(ov.flag);\n    setVal(ov.flag, stored === null ? ov.default : stored);\n  });\n\n  const popupCentre = (centre) => (\n    <Popup>\n      <h4><Link to={`/centre/${centre.id}`}>{centre.nom}</Link></h4>\n      <p>{centre.adreca}<br />\n        <a href={centre.web} target=\"_blank\" rel=\"noopener noreferrer\">{centre.web}</a></p>\n      <p>{`${centre.estudis.map(e => estudis.get(e)).join(', ')}.`}</p>\n    </Popup>\n  );\n\n  const popupZona = (zona) => {\n    const centresPart = zona.centresPart.size;\n    const estudisPart = sumAll(zona.estudisPart);\n    const estudisBase = sumAll(zona.estudisBase);\n    const perCent = (estudisBase > 0 ? (estudisPart / estudisBase) * 100 : 0).toFixed(1);\n    return <Popup>\n      <h4><Link to={`/zona/${zona.key}`}>{zona.nom}</Link></h4>\n      {(centresPart &&\n        <p>\n          <span>{`Centres participants ${programa ? 'al programa seleccionat' : 'als programes seleccionats'}: ${centresPart}`}</span><br />\n          <span>{`Índex de participació: ${perCent}%`}</span>\n        </p>) ||\n        <p>No hi ha cap centre que participi als programes seleccionats.</p>\n      }\n    </Popup>\n  };\n\n  return (\n    <Map\n      className=\"mapa markercluster-map\"\n      {...{\n        maxZoom,\n        minZoom: zoom,\n        bounds: (poli && poli.bounds) || currentlySavedBounds || MAP_BOUNDS,\n        maxBounds: MAX_BOUNDS,\n        onBaseLayerChange,\n        onOverlayAdd: overlayChange('add'),\n        onOverlayRemove: overlayChange('remove'),\n        onZoomEnd: boundsChanged,\n        onMoveEnd: boundsChanged,\n      }}\n    >\n      <TileLayer type={TILE_LAYER} />\n      <LayersControl position=\"topright\">\n        {polygons.map((p, i) => (\n          <LayersControl.BaseLayer name={p.name} key={i} checked={poli !== null ? i === (poli.tipus === 'SEZ' ? 1 : 0) : i === currentLayer}>\n            <LayerGroup>\n              {p.shapes.filter(sh => poli === null || poli === sh).map((sh, n) => (\n                <Polygon key={n} positions={sh.poligons} weight={lineWidth} fillOpacity={minOpacity}>\n                  {popupZona(sh)}\n                </Polygon>))}\n            </LayerGroup>\n          </LayersControl.BaseLayer>\n        ))}\n        <LayersControl.Overlay name={OVERLAYS[0].name} checked={poli === null && getBool(OVERLAYS[0].flag)}>\n          <LayerGroup>\n            {polygons[currentLayer].shapes.filter(sh => poli === null || poli === sh).map((sh, n) => (\n              <Polygon key={n} positions={sh.poligons} weight={0} fillOpacity={sh.density}>\n                {popupZona(sh)}\n              </Polygon>))}\n          </LayerGroup>\n        </LayersControl.Overlay>\n        <LayersControl.Overlay name={OVERLAYS[1].name} checked={poli !== null || getBool(OVERLAYS[1].flag)}>\n          <MarkerClusterGroup clusterProps={MARKERCLUSTER_PROPS}>\n            {points.map(pt => (\n              <Marker key={pt.id} position={[pt.lat, pt.lng]}>\n                {popupCentre(pt)}\n              </Marker>\n            ))}\n          </MarkerClusterGroup>\n        </LayersControl.Overlay>\n      </LayersControl>\n      <FullscreenControl\n        position=\"topleft\"\n        title=\"Mostra el mapa a pantalla completa\"\n        titleCancel=\"Surt de la pantalla completa\"\n      />\n    </Map>\n  )\n}\n","import React from 'react';\nimport { Map, Marker } from 'react-leaflet';\nimport TileLayer from '../utils/TileLayer';\n\n// See ../utils/TileLayer for all available options\nconst TILE_LAYER = process.env.REACT_APP_TILE_LAYER || 'wikimedia';\nconst MAP_BOUNDS = [[40.50, 0.15], [42.90, 3.34]];\n\nexport default function MapaCentre({ point, center = [41.7, 1.8], zoom = 8, maxZoom = 19 }) {\n\n  return (\n    <Map\n      className=\"mapa-centre\"\n      {...{ center, zoom, maxZoom, minZoom: 8, maxBounds: MAP_BOUNDS }}\n    >\n      <TileLayer type={TILE_LAYER} />\n      <Marker key={point.id} position={[point.lat, point.lng]} />\n    </Map>\n  )\n}","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport MainMap from './MainMap';\nimport MapaCentre from './MapaCentre';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepButton from '@material-ui/core/StepButton';\nimport { cursCurt } from '../utils/Utils';\n\nfunction MapSection({ data: { programes, centres, poligons, estudis, cursosDisp }, programa, centre, zona, cursos, currentPrograms, polygons, mapChanged, updateMap }) {\n\n  const singleCentre = centre ? centres.get(centre) : null;\n  const poli = zona ? poligons.get(zona) : null;\n  const w = window.innerWidth;\n  const zoom = w < 600 ? 7 : w < 820 ? 8 : w < 1300 ? 7 : 8;\n\n  const addSchoolsOfProgram = (progId, dest) => {\n    const prog = programes.get(progId);\n    if (prog)\n      Object.keys(prog.centres).forEach(curs => {\n        if (!cursos || cursos.includes(curs))\n          prog.centres[curs].forEach(centre => {\n            if ((!poli || poli.centresInn.has(centre)) && !dest.find(c => c.id === centre.id))\n              dest.push(centre)\n          });\n      });\n    return dest;\n  };\n\n  const points = [];\n  if (!mapChanged) {\n    if (singleCentre) {\n      points.push(singleCentre);\n    }\n    else if (programa)\n      addSchoolsOfProgram(programa, points);\n    else\n      currentPrograms.forEach(progId => addSchoolsOfProgram(progId, points));\n  }\n\n  const handleSelectCurs = curs => ev => {\n    const result = [];\n    cursosDisp.forEach(c => {\n      if ((curs === c && !cursos.includes(c)) || (curs !== c && cursos.includes(c)))\n        result.push(c);\n    });\n    updateMap({ cursos: result }, true, true);\n\n  }\n\n  return (\n    <section className=\"seccio smapa\">\n      <Paper className={singleCentre ? 'paper' : 'paper no-padding-top'}>\n        {(singleCentre &&\n          <MapaCentre\n            {...{\n              point: singleCentre,\n              center: [singleCentre.lat, singleCentre.lng],\n              zoom: 15,\n              maxZoom: 19,\n            }}\n          />) ||\n          <>\n            <Stepper\n              className=\"cursos\"\n              nonLinear\n              alternativeLabel\n              activeStep={null}\n            >\n              {cursosDisp.map((c, k) => (\n                <Step key={c}>\n                  <StepButton\n                    onClick={handleSelectCurs(c)}\n                    completed={cursos.includes(c)}\n                  >{cursCurt(c)}</StepButton>\n                </Step>\n              ))}\n            </Stepper>\n            <MainMap\n              {...{\n                points,\n                polygons,\n                programa,\n                poli,\n                zoom,\n                maxZoom: 19,\n                estudis,\n                updateMap\n              }}\n            />\n          </>\n        }\n      </Paper>\n    </section>\n  );\n}\n\nexport default MapSection;\n","import React from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Typography from '@material-ui/core/Typography';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\n\nfunction SelectProgramsDlg({ dlgOpen, data: { programes, ambitsCurr, ambitsInn, nivells }, updateMap }) {\n\n  const [ambitInn, setAmbitInn] = React.useState('');\n  const [ambitCurr, setAmbitCurr] = React.useState('');\n  const [nivellsChk, setNivellsChk] = React.useState(Array.from(nivells).reduce((v, [n]) => { v[n] = true; return v; }, {}));\n\n  // Better to user a react reducer?\n  const [currentPrograms, setCurrentPrograms] = React.useState(new Set());\n\n  const updateCurrentPrograms = () => {\n    const progs = new Set();\n    programes.forEach((prog, id) => {\n      if (\n        (ambitInn === '' || prog.ambInn.includes(ambitInn)) &&\n        (ambitCurr === '' || prog.ambCurr.includes(ambitCurr)) &&\n        Object.keys(nivellsChk).find(nivell => nivellsChk[nivell] && nivells.get(nivell).find(tag => prog.tipus.includes(tag)))\n      )\n        progs.add(id);\n    });\n    setCurrentPrograms(progs);\n    // TODO: Comptar centres!\n  };\n\n  React.useMemo(updateCurrentPrograms, [ambitInn, ambitCurr, nivellsChk]);\n\n  const listSelection = handle => ev => {\n    handle(ev.target.value);\n  };\n\n  const handleCheckNivell = n => ev => {\n    setNivellsChk({ ...nivellsChk, [n]: ev.target.checked });\n  };\n\n  const closeDialog = ok => ev => {\n    updateMap(Object.assign({ dlgOpen: false }, (ok && { currentPrograms }) || {}), true, ok);\n  };\n\n  return (\n    <Dialog\n      open={dlgOpen}\n      onEnter={updateCurrentPrograms}\n      aria-labelledby=\"dialog-title\"\n      classes={{ paper: 'stretch-dlg' }}\n    >\n      <DialogTitle id=\"dialog-title\">Tipus de programes</DialogTitle>\n      <DialogContent className=\"dialog-content\">\n        <div className=\"nivells\">\n          {Array.from(nivells).map(([nivell]) => (\n            <FormControlLabel\n              key={nivell}\n              className=\"select-nivell\"\n              control={\n                < Checkbox\n                  onChange={handleCheckNivell(nivell)}\n                  value={nivell}\n                  checked={nivellsChk[nivell]}\n                />}\n              label={nivell}\n            />\n          ))}\n        </div>\n        <FormControl className=\"select-list\">\n          <InputLabel htmlFor=\"select-ambit-curr\">Àmbit curricular</InputLabel>\n          <Select\n            value={ambitCurr}\n            onChange={listSelection(setAmbitCurr)}\n            inputProps={{\n              name: 'ambitCurr',\n              id: 'select-ambit-curr'\n            }}\n          >\n            <MenuItem value=\"\"><em>Tots els àmbits</em></MenuItem>\n            {Array.from(ambitsCurr.keys()).sort().map(key => (\n              <MenuItem key={key} value={key}>{ambitsCurr.get(key)}</MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n\n        <FormControl className=\"select-list\">\n          <InputLabel htmlFor=\"select-ambit-inn\">Àmbit d'innovació</InputLabel>\n          <Select\n            value={ambitInn}\n            onChange={listSelection(setAmbitInn)}\n            inputProps={{\n              name: 'ambitInn',\n              id: 'select-ambit-inn'\n            }}\n          >\n            <MenuItem value=\"\"><em>Tots els àmbits</em></MenuItem>\n            {Array.from(ambitsInn.keys()).sort().map(key => (\n              <MenuItem key={key} value={key}>{ambitsInn.get(key)}</MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n        <Typography className=\"info\">\n          {currentPrograms.size} {currentPrograms.size === 1 ? 'programa seleccionat' : 'programes seleccionats'}\n        </Typography>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={closeDialog(true)} color=\"primary\" >Aplica la selecció</Button>\n        <Button onClick={closeDialog(false)} color=\"primary\">Cancel·la</Button>\n      </DialogActions>\n\n    </Dialog>\n  );\n\n}\n\nexport default SelectProgramsDlg;\n","import React from 'react';\nimport AppContext from '../AppContext';\nimport MapSection from './MapSection';\nimport Paper from '@material-ui/core/Paper';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Switch from '@material-ui/core/Switch';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport SelectProgramsDlg from './SelectProgramsDlg';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport { cursCurt } from '../utils/Utils';\n\nfunction Programes({ history }) {\n\n  return (\n    <AppContext.Consumer>\n      {({ data, data: { programes, ambitsCurr, ambitsInn, nivells }, cursos, currentPrograms, polygons, mapChanged, updateMap, tabMode, currentTab, dlgOpen }) => {\n        const allSelected = currentPrograms.size === programes.size;\n\n        // Click on program name\n        const handleProgClick = id => () => history.push(`/programa/${id}`);\n\n        // Select / Unselect program\n        const handleProgSelect = id => ev => {\n          currentPrograms[currentPrograms.has(id) ? 'delete' : 'add'](id);\n          updateMap({ currentPrograms, ambitCurr: '', ambitInn: '', nivell: '' }, true, true);\n        };\n\n        // Select / unselect all programs\n        const handleSelectAll = ev => {\n          if (ev.target.checked)\n            programes.forEach((_p, id) => currentPrograms.add(id));\n          else\n            currentPrograms.clear();\n          updateMap({ currentPrograms }, true, true);\n        };\n\n        const tabSelected = (_ev, value) => updateMap({ currentTab: value });\n\n        return (\n          <>\n            <SelectProgramsDlg {...{ dlgOpen, data: { programes, ambitsCurr, ambitsInn, nivells }, updateMap }} />\n            {tabMode &&\n              <Tabs\n                className=\"prog-tabs\"\n                value={currentTab}\n                onChange={tabSelected}\n                variant=\"fullWidth\"\n              >\n                <Tab label=\"Mapa\" />\n                <Tab label=\"Programes\" />\n              </Tabs>\n            }\n            {(!tabMode || currentTab === 1) &&\n              <section className={`seccio programes`}>\n                <Paper className=\"paper\">\n                  <div className=\"select-progs\">\n                    <Button variant=\"outlined\" color=\"primary\" onClick={() => updateMap({ dlgOpen: true })}>Selecciona per tipus</Button>\n                    <FormControlLabel\n                      className=\"select-all\"\n                      labelPlacement=\"start\"\n                      control={\n                        <Checkbox\n                          onChange={handleSelectAll}\n                          checked={allSelected}\n                        />}\n                      label=\"Selecciona'ls tots\"\n                    />\n                  </div>\n                  <List className=\"prog-list\">\n                    {Array.from(programes.values()).map(({ id, nom, simbol, centres }, n) => (\n                      <ListItem key={n} button className=\"list-button\">\n                        <ListItemAvatar>\n                          <Avatar src={`logos/mini/${simbol}`} alt={nom} />\n                        </ListItemAvatar>\n                        <ListItemText\n                          primary={nom}\n                          secondary={'Centres ' + Object.keys(centres).sort().map(k => `${cursCurt(k)}: ${centres[k].length}`).join(', ')}\n                          onClick={handleProgClick(id)} />\n                        <ListItemSecondaryAction>\n                          <Switch onChange={handleProgSelect(id)} checked={currentPrograms.has(id)} />\n                        </ListItemSecondaryAction>\n                      </ListItem>\n                    ))}\n                  </List>\n                </Paper>\n              </section>\n            }\n            {(!tabMode || currentTab === 0) &&\n              <MapSection {...{ data, programa: null, centre: null, zona: null, cursos, currentPrograms, polygons, mapChanged, updateMap }} />\n            }\n          </>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default Programes;\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport ReportProblem from '@material-ui/icons/ReportProblem';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport Refresh from '@material-ui/icons/Refresh';\n\nfunction Error({ error, history, refetch }) {\n  return (\n    <div className=\"err-msg\">\n      <Typography >\n        <ReportProblem className=\"err-icon\" color=\"secondary\" />\n        {error || 'Error desconegut!'}\n      </Typography>\n      {\n        (refetch &&\n          <Button\n            className='action-btn'\n            aria-label=\"Reintenta\"\n            onClick={refetch}\n            variant='outlined' >\n            <Refresh className=\"left-icon\" />\n            Reintenta\n        </Button>) ||\n        (history && history.length > 1 &&\n          <Button\n            className=\"action-btn\"\n            aria-label=\"Torna\"\n            variant=\"outlined\"\n            onClick={() => history.goBack()} >\n            <ArrowBack className=\"left-icon\" />\n            Torna\n        </Button>)\n      }\n    </div>\n  );\n}\n\nexport default Error;","import React from 'react';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport AppContext from '../AppContext';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport InfoIcon from '@material-ui/icons/Info';\nimport MailIcon from '@material-ui/icons/Mail';\nimport Error from './Error';\nimport MapSection from './MapSection';\nimport { getInfoSpan, hasExtraInfo } from '../utils/Utils';\n\nconst FITXA_BASE = process.env.REACT_APP_FITXA_BASE || 'https://clic.xtec.cat/pub/fitxes/';\n\n// Options for React-Markdown\n// See: https://github.com/rexxars/react-markdown#options\nconst MD_OPTIONS = {\n  escapeHtml: false,\n};\n\n// Creates a Material-UI expansion panel with the provided title and content\nfunction createExpansionPanel(className, title, content) {\n  return (\n    <ExpansionPanel className={className}>\n      <ExpansionPanelSummary className=\"small-padding-h\" expandIcon={<ExpandMoreIcon />}>\n        <h4 style={{ marginTop: 0 }}>{title}</h4>\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails className=\"small-padding-h\">\n        {content}\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  );\n}\n\n// Same as `createExpansionPanel`, but with Markdown content\nfunction createMDExpansionPanel(className, title, mdContent) {\n  return createExpansionPanel(className, title,\n    <div>\n      <ReactMarkdown {...MD_OPTIONS}>\n        {mdContent}\n      </ReactMarkdown>\n    </div>\n  );\n}\n\nfunction FitxaPrograma({ history, match: { params: { id } } }) {\n\n  return (\n    <AppContext.Consumer>\n      {({ data, cursos, currentPrograms, polygons, mapChanged, updateMap }) => {\n        const { programes, estudis, ambitsCurr, ambitsInn } = data;\n\n        // Find the specified program\n        const programa = programes.get(id);\n        if (!programa)\n          return <Error {...{ error: `No hi ha cap programa amb el codi: ${id}`, history }} />\n\n        // Deconstruct `programa`\n        const { nom, descripcio, link, ambCurr, ambInn, fitxa, video, objectius, requisits, compromisos, contacte, normativa, arees, simbol, tipus, centres } = programa;\n\n        return (\n          <>\n            <Button className=\"torna\" aria-label=\"Torna\" onClick={() => history.goBack()} >\n              <ArrowBack className=\"left-icon\" />\n              Torna\n            </Button>\n            <section className=\"seccio programa\">\n              <Paper className=\"paper\">\n                <div className=\"logo-nom-seccio\">\n                  {simbol && <img className=\"seccio-logo\" src={`logos/${simbol}`} alt={nom} />}\n                  <div className=\"nom-seccio\">\n                    <Typography variant=\"h4\">{nom}</Typography>\n                  </div>\n                </div>\n                <div id=\"descripcio\">\n                  <ReactMarkdown {...MD_OPTIONS}>\n                    {descripcio}\n                  </ReactMarkdown>\n                </div>\n                <div id=\"info\">\n                  {fitxa &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={`${/^http.?:\\/\\//.test(fitxa) ? '' : FITXA_BASE}${fitxa}`}\n                      title=\"Descarrega la fitxa del projecte\" >\n                      <CloudDownloadIcon className=\"left-icon\" />\n                      Fitxa\n                    </Button>\n                  }\n                  {link &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={link}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={link}>\n                      <InfoIcon className=\"left-icon\" />\n                      Web\n                    </Button>\n                  }\n                  {contacte &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={`mailto:${contacte}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={contacte}>\n                      <MailIcon className=\"left-icon\" />\n                      Contacte\n                    </Button>\n                  }\n                  {video &&\n                    <div className=\"prog-video\">\n                      <br />\n                      <ReactMarkdown {...MD_OPTIONS}>\n                        {video}\n                      </ReactMarkdown>\n                    </div>\n                  }\n                </div>\n                {objectius && createMDExpansionPanel('prog-objectius', 'Objectius', objectius)}\n                {requisits && createMDExpansionPanel('prog-requisits', 'Requisits', requisits)}\n                {compromisos && createMDExpansionPanel('prog-compromisos', 'Compromisos', compromisos)}\n                {normativa && createMDExpansionPanel('prog-normativa', 'Normativa', normativa)}\n                {createExpansionPanel('prog-ambits', 'Àmbits, àrees i nivells', (\n                  <div>\n                    {ambInn.length > 0 &&\n                      <div className=\"prog_ambits\">\n                        <h4>Àmbits d'innovació:</h4>\n                        <ul>\n                          {ambInn.map(a => <li key={a}>{ambitsInn.get(a)}</li>)}\n                        </ul>\n                      </div>\n                    }\n                    {ambCurr.length > 0 &&\n                      <div className=\"prog_ambits\">\n                        <h4>Àmbits curriculars:</h4>\n                        <ul>\n                          {ambCurr.map(a => <li key={a}>{ambitsCurr.get(a)}</li>)}\n                        </ul>\n                      </div>\n                    }\n                    {arees.length > 0 &&\n                      <div className=\"prog_ambits\">\n                        <h4>Àrees curriculars:</h4>\n                        <ul>\n                          {arees.map((a, n) => <li key={n}>{a}</li>)}\n                        </ul>\n                      </div>\n                    }\n                    {tipus.length > 0 &&\n                      <div className=\"prog_ambits\">\n                        <h4>Nivells educatius:</h4>\n                        <ul>\n                          {tipus.map((t, n) => <li key={n}>{estudis.get(t)}</li>)}\n                        </ul>\n                      </div>\n                    }\n                  </div>\n                ))}\n                <br />\n                {Object.keys(centres).sort().map((curs, n) => {\n                  let hasNc = false;\n                  return (\n                    <ExpansionPanel key={n}>\n                      <ExpansionPanelSummary className=\"small-padding-left\" expandIcon={<ExpandMoreIcon />}>\n                        <Typography className=\"wider\">{`CURS ${curs}`}</Typography>\n                        <Typography>{`${centres[curs].length} ${centres[curs].length === 1 ? 'centre' : 'centres'}`}</Typography>\n                      </ExpansionPanelSummary>\n                      <ExpansionPanelDetails className=\"small-padding-h flow-v\">\n                        <List className=\"wider\">\n                          {centres[curs].sort((a, b) => a.nom.localeCompare(b.nom)).map(({ id: codi, nom, municipi, info, notCert }, c) => {\n                            const link = (info && hasExtraInfo(info[id])) ? null : `#/centre/${codi}`;\n                            const nc = notCert.has(`${id}|${curs}`);\n                            hasNc = hasNc || nc;\n                            return (\n                              <ListItem key={c} button component={link ? 'a' : 'div'} href={link} className=\"small-padding-h\">\n                                <ListItemText\n                                  primary={`${nom} (${municipi})${nc ? ' *' : ''}`}\n                                  secondary={info && info[id] && getInfoSpan(info[id], id, codi)}\n                                />\n                              </ListItem>\n                            )\n                          }\n                          )}\n                        </List>\n                        {hasNc &&\n                          <>\n                            <Divider />\n                            <Typography className=\"padding-one\">*: Participació en curs, pendent de certificar</Typography>\n                          </>\n                        }\n                      </ExpansionPanelDetails>\n                    </ExpansionPanel>\n                  );\n                })}\n              </Paper>\n            </section>\n            <MapSection {...{ data, programa: id, centre: null, zona: null, cursos, currentPrograms, polygons, mapChanged, updateMap }} />\n          </>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default FitxaPrograma;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport AppContext from '../AppContext';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport WebIcon from 'mdi-material-ui/Web';\nimport MailIcon from '@material-ui/icons/Mail';\nimport TwitterIcon from 'mdi-material-ui/Twitter';\nimport { plainArray, getInfoSpan, hasExtraInfo } from '../utils/Utils';\nimport Error from './Error';\nimport MapSection from './MapSection';\n\nconst LOGO_BASE = process.env.REACT_APP_LOGO_BASE || 'https://clic.xtec.cat/pub/logos/';\n\nfunction FitxaCentre({ history, match: { params: { codi } } }) {\n  return (\n    <AppContext.Consumer>\n      {({ data, currentPrograms, polygons, mapChanged, updateMap }) => {\n        // Find the specified program\n        const centre = data.centres.get(codi);\n        if (!centre)\n          return <Error {...{ error: `No hi ha cap programa amb el codi: ${codi}`, history }} />\n\n        const { nom, municipi, comarca, estudis, adreca, web, logo, nodes, web_propi, tel, mail, twitter, sstt, se, public: pb, programes, info, notCert } = centre;\n        const url = nodes || web || web_propi;\n        const tancaFitxa = () => history.goBack();\n        const servei_territorial = data.poligons.get(sstt);\n        const servei_educatiu = data.poligons.get(se);\n        let hasNc = false;\n\n        return (\n          <>\n            <Button className=\"torna\" aria-label=\"Torna\" onClick={tancaFitxa} >\n              <ArrowBack className=\"left-icon\" />\n              Torna\n            </Button>\n            <section className=\"seccio centre\">\n              <Paper className=\"paper\">\n                <div className=\"logo-nom-seccio\">\n                  {logo && <img className=\"seccio-logo\" src={`${/^http.?:\\/\\//.test(logo) ? '' : LOGO_BASE}${logo}`} alt={nom} />}\n                  <div className=\"nom-seccio\">\n                    <Typography variant=\"h4\">{nom}</Typography>\n                    <div id=\"tipus\">Centre {pb ? 'públic' : 'privat concertat'}</div>\n                  </div>\n                </div>\n                <div className=\"adreca\">\n                  <p>\n                    {adreca}<br />\n                    {`${municipi} (${comarca})`}<br />\n                    {tel && <>{`Tel. ${tel}`}</>}\n                  </p>\n                </div>\n                <div id=\"info\">\n                  {url &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={url}\n                    >\n                      <WebIcon className=\"left-icon\" />\n                      Web\n                    </Button>\n                  }\n                  {twitter &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={`https://twitter.com/${twitter}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={twitter}\n                    >\n                      <TwitterIcon className=\"left-icon\" />\n                      Twitter\n                    </Button>\n                  }\n                  {mail &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={`mailto:${mail}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={mail}\n                    >\n                      <MailIcon className=\"left-icon\" />\n                      Contacte\n                    </Button>\n                  }\n                </div>\n                <div id=\"estudis\">\n                  <h4>Estudis</h4>\n                  <ul>\n                    {estudis.map((e, n) => <li key={n}>{data.estudis.get(e)}</li>)}\n                  </ul>\n                </div>\n                <div id=\"zones\">\n                  <h4>Zones:</h4>\n                  <ul>\n                    {servei_territorial && <li><Link to={`/zona/${sstt}`}>{servei_territorial.nom}</Link></li>}\n                    {servei_educatiu && <li><Link to={`/zona/${se}`}>{servei_educatiu.nom}</Link></li>}\n                  </ul>\n                </div>\n                <h4>Programes on participa:</h4>\n                <br />\n                <List >\n                  {plainArray(programes).map(({ id, nom, simbol, cursos }, n) => {\n                    const link = (info && hasExtraInfo(info[id])) ? null : `#/programa/${id}`;\n                    return (\n                      <ListItem key={n} button className=\"no-padding-h-small\" component={link ? 'a' : 'div'} href={link}>\n                        <ListItemAvatar>\n                          <Avatar src={`logos/mini/${simbol}`} alt={nom} />\n                        </ListItemAvatar>\n                        <ListItemText\n                          primary={nom}\n                          secondary={(info && info[id] && getInfoSpan(info[id], id, codi)) || `${cursos.length === 1 ? 'Curs' : 'Cursos'} ${cursos.sort().map(c => {\n                            const nc = notCert.has(`${id}|${c}`);\n                            hasNc = hasNc || nc;\n                            return `${c}${nc ? ' *' : ''}`;\n                          }).join(', ')}`}\n                        />\n                      </ListItem>\n                    );\n                  })}\n                </List>\n                {hasNc &&\n                  <>\n                    <br />\n                    <Typography>*: Participació en curs, pendent de certificar</Typography>\n                  </>\n                }\n              </Paper>\n            </section>\n            <MapSection {...{ data, programa: null, centre: codi, zona: null, currentPrograms, polygons, mapChanged, updateMap }} />\n          </>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default FitxaCentre;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport AppContext from '../AppContext';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Avatar from '@material-ui/core/Avatar';\nimport WebIcon from 'mdi-material-ui/Web';\nimport MailIcon from '@material-ui/icons/Mail';\nimport Error from './Error';\nimport MapSection from './MapSection';\nimport Typography from '@material-ui/core/Typography';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport { getInfoSpan, hasExtraInfo } from '../utils/Utils';\n\n\nfunction FitxaZona({ history, match: { params: { key } } }) {\n\n  return (\n    <AppContext.Consumer>\n      {({ data, cursos, currentPrograms, polygons, mapChanged, updateMap }) => {\n        // Find the specified program\n        const zona = data.poligons.get(key);\n        if (!zona)\n          return <Error {...{ error: `No hi ha cap zona amb el codi: ${key}`, history }} />\n\n        // Els camps id, nomCurt i color no s'utilitzen\n        const { tipus, nom, logo, cp, adreca, municipi, comarca, tel, fax, correu, web, centresInn, programes } = zona;\n        const programesArray = Array.from(programes).sort((a, b) => a.nom.localeCompare(b.nom));\n\n        const torna = () => history.goBack();\n\n        return (\n          <>\n            <Button className=\"torna\" aria-label=\"Torna\" onClick={torna} >\n              <ArrowBack className=\"left-icon\" />\n              Torna\n            </Button>\n            <section className=\"seccio zona\">\n              <Paper className=\"paper\">\n                <div className=\"logo-nom-seccio\">\n                  {logo && <img className={`seccio-logo ${tipus === 'ST' ? '' : 'se-logo'}`} src={logo} alt={nom} />}\n                  <div className=\"nom-seccio\">\n                    <Typography variant=\"h4\">{nom}</Typography>\n                  </div>\n                </div>\n                <div className=\"adreca\">\n                  <p>\n                    {adreca}<br />\n                    {`${cp} ${municipi} (${comarca})`}<br />\n                    {tel && <>{`Tel. ${tel}`}<br /></>}\n                    {fax && <>{`Fax. ${fax}`}<br /></>}\n                  </p>\n                </div>\n                <div id=\"info\">\n                  {web &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={web}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={web}\n                    >\n                      <WebIcon className=\"left-icon\" />\n                      Web\n                    </Button>\n                  }\n                  {correu &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={`mailto:${correu}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={correu}\n                    >\n                      <MailIcon className=\"left-icon\" />\n                      Contacte\n                    </Button>\n                  }\n                </div>\n                <h4>Programes amb presència en aquest territori:</h4>\n                <br />\n                {programesArray.map((prog, n) => {\n                  const centres = prog.allCentres.filter(c => centresInn.has(c));\n                  const numCentres = centres.length;\n                  return (\n                    <ExpansionPanel key={n}>\n                      <ExpansionPanelSummary classes={{ root: 'small-padding-left', content: 'zona-prog' }} expandIcon={<ExpandMoreIcon />}>\n                        <Link className=\"zona-prog-logo\" to={`/programa/${prog.id}`}><Avatar src={`logos/mini/${prog.simbol}`} alt={prog.nom} /></Link>\n                        <Typography className=\"wider\">{prog.nom}</Typography>\n                        <Typography>{`${numCentres} centre${numCentres === 1 ? '' : 's'}`}</Typography>\n                      </ExpansionPanelSummary>\n                      <ExpansionPanelDetails className=\"small-padding-h\">\n                        <List>\n                          {centres.map(({ id, nom, municipi, info, allPrograms }, n) => {\n                            const link = (info && hasExtraInfo(info[prog.id])) ? null : `#/centre/${id}`;\n                            return (\n                              <ListItem key={n} button component={link ? 'a' : 'div'} href={link} className=\"small-padding-h\">\n                                <ListItemText\n                                  primary={`${nom} (${municipi})`}\n                                  secondary={info && info[prog.id] && getInfoSpan(info[prog.id], prog.id, id)}\n                                />\n                              </ListItem>\n                            );\n                          })}\n                        </List>\n                      </ExpansionPanelDetails>\n                    </ExpansionPanel>\n                  )\n                })}\n              </Paper>\n            </section>\n            <MapSection {...{ data, programa: null, centre: null, zona: key, cursos, currentPrograms, polygons, mapChanged, updateMap }} />\n          </>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default FitxaZona;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { VideoIframe } from '../utils/Utils';\nimport AppContext from '../AppContext';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport Error from './Error';\nimport Typography from '@material-ui/core/Typography';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport IcoFitxa from '@material-ui/icons/Assignment';\nimport IcoVideo from '@material-ui/icons/Videocam';\n\nconst LOGO_BASE = process.env.REACT_APP_LOGO_BASE || 'https://clic.xtec.cat/pub/logos/';\nconst FITXA_PROJ_BASE = process.env.REACT_APP_FITXA_PROJ_BASE || 'https://clic.xtec.cat/pub/projectes/';\n\nfunction FitxaProjecte({ history, match: { params: { id = '' } } }) {\n\n  return (\n    <AppContext.Consumer>\n      {({ data, currentPrjTab, updateMap }) => {\n        const { programes, centres } = data;\n\n        // Find the specified project\n        const [prg, codi, projNum] = id.split('|');\n        let programa, centre, infoGroup, infoIndex, info;\n        if (\n          !prg || !codi || !projNum ||\n          isNaN(infoIndex = Number(projNum)) ||\n          !(programa = programes.get(prg)) ||\n          !(centre = centres.get(codi)) ||\n          !(infoGroup = programa.info[codi]) ||\n          (infoGroup.length <= infoIndex) ||\n          !(info = infoGroup[infoIndex])\n        )\n          return <Error {...{ error: `No hi ha cap projecte amb el codi \"${id}\"`, history }} />\n\n        // Deconstruct main objects\n        const { titol, fitxa, video, curs } = info;\n        const { id: codiCentre, nom: nomCentre, municipi, logo } = centre;\n        const { id: idProg, nom: nomProg, simbol: simbolProg } = programa;\n\n        // Check if tabs are needed\n        const tabMode = (fitxa ? true : false) && (video ? true : false);\n        const tabSelected = (_ev, value) => updateMap({ currentPrjTab: value });\n\n        return (\n          <>\n            <Button className=\"torna\" aria-label=\"Torna\" onClick={() => history.goBack()} >\n              <ArrowBack className=\"left-icon\" />\n              Torna\n            </Button>\n            <section className=\"seccio projecte\">\n              <Paper className=\"paper\">\n                <Typography variant=\"h4\">Projecte \"{titol}\"</Typography>\n                <div className=\"info-proj\">\n                  <img src={logo ? `${/^http.?:\\/\\//.test(logo) ? '' : LOGO_BASE}${logo}` : `logos/logo_${nomCentre.startsWith('Escola') ? 'cole' : 'insti'}.png`} alt={nomCentre} />\n                  <Typography variant=\"h6\"> <Link to={`/centre/${codiCentre}`}>{nomCentre}</Link><br />{municipi}</Typography>\n                  <img src={`logos/${simbolProg}`} alt={nomProg} />\n                  <Typography variant=\"h6\"> <Link to={`/programa/${idProg}`}>{nomProg}</Link><br />Curs {curs}</Typography>\n                </div>\n                <div className=\"proj-media\">\n                  {tabMode &&\n                    <Tabs\n                      className=\"proj-tabs\"\n                      value={currentPrjTab}\n                      onChange={tabSelected}\n                      variant=\"fullWidth\"\n                    >\n                      <Tab\n                        label=\"Video\"\n                        icon={<IcoVideo />}\n                      />\n                      <Tab\n                        label=\"Fitxa\"\n                        icon={<IcoFitxa />}\n                      />\n                    </Tabs>\n                  }\n                  {video && (!tabMode || currentPrjTab === 0) &&\n                    <VideoIframe\n                      className=\"proj-video\"\n                      title=\"Vídeo del projecte\"\n                      url={video}\n                    />\n                  }\n                  {fitxa && (!tabMode || currentPrjTab === 1) &&\n                    <iframe\n                      className=\"proj-pdf\"\n                      title=\"Fitxa del projecte\"\n                      src={`${/^https?:\\/\\//.test(fitxa) ? '' : FITXA_PROJ_BASE}${fitxa}`}\n                      width=\"100%\"\n                      height=\"100%\"\n                      type=\"application/pdf\"\n                      allowFullScreen\n                    />\n                  }\n                </div>\n              </Paper>\n            </section>\n          </>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n\n}\n\nexport default FitxaProjecte;","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\n\n/**\n * Basic 'loading data...' page\n */\nfunction Loading() {\n  return (\n    <div className='err-msg'>\n      <Typography>S'estan carregant les dades...</Typography>\n      <CircularProgress className='progress' />\n    </div>\n  );\n}\n\nexport default Loading;\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { title, version, repository, license } from '../../package.json';\n\nfunction Footer() {\n  return (\n    <footer>\n      <div className=\"footer-content\">\n        <a className=\"logo-gencat\" href=\"https://web.gencat.cat/\" title=\"Generalitat de Catalunya\" target=\"_top\">gencat.cat</a>\n        <Typography variant=\"body2\" className=\"copyright\">\n          <a href=\"https://innovacio.xtec.cat/\">{title} v{version}</a><br />\n          <a href=\"http://www.xtec.cat\">© 2019 Departament d'Educació de la Generalitat de Catalunya</a><br />\n          <a href={`https://spdx.org/licenses/${license}.html`}>Llicència Pública de la Unió Europea {license}</a><br />\n          <a href={repository.url}>{repository.url}</a><br />\n          <br />\n          <strong>Bústia de contacte</strong>: <a href=\"mailto:innovacio@xtec.cat\">innovacio@xtec.cat</a><br />\n          <br />\n          <a href=\"https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/\"><strong>Avís legal</strong></a>: D’acord amb l’article 17.1 de la Llei 19/2014, la ©Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se'n citi la font i la data d'actualització i que no es desnaturalitzi la informació (article 8 de la Llei 37/2007) i també que no es contradigui amb una llicència específica.\n        </Typography>\n      </div>\n    </footer>\n  );\n}\n\nexport default Footer;","import React from 'react';\nimport AppContext from '../AppContext';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport Avatar from '@material-ui/core/Avatar';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport ProgramIcon from '@material-ui/icons/Group';\nimport SchoolIcon from 'mdi-material-ui/MapMarker';\n\nconst DEFAULT_ITEMS_PER_PAGE = Number(process.env.REACT_APP_ITEMS_PER_PAGE || 25);\n\nfunction Cerca({ history, match: { params: { query = '' } } }) {\n\n  // Remove extra spaces\n  query = query.trim();\n  \n  const [page, setPage] = React.useState(0);\n  const [itemsPerPage, setItemsPerPage] = React.useState(DEFAULT_ITEMS_PER_PAGE);\n  const [queryResults, setQueryResults] = React.useState([]);\n  const [currentQuery, setCurrentQuery] = React.useState('');\n\n  return (\n    <AppContext.Consumer>\n      {({ fuseFuncs }) => {\n\n        if (query !== currentQuery) {\n          // Perform full text search using Fuse.js\n          // See `loadData` in App.js for details about how these functions are built\n          setCurrentQuery(query);\n          setQueryResults(fuseFuncs.reduce((qr, ff) => qr.concat(ff.search(query)), []));\n        }\n\n        const goToElement = (tipus, id) => ev => {\n          history.push(`/${tipus}/${id}`);\n        };\n\n        return (\n          <>\n            <Button\n              className=\"torna\"\n              aria-label=\"Torna\"\n              onClick={() => history.goBack()} >\n              <ArrowBack className=\"left-icon\" />\n              Torna\n            </Button>\n            <section className=\"seccio cerca\">\n              <Paper className=\"paper\">\n                <h2>Resultats de la cerca \"{currentQuery}\"</h2>\n                {(queryResults.length === 0 && <p>No s'ha trobat cap element coïncident amb el criteri de cerca!</p>) ||\n                  <div>\n                    <List component=\"ul\">\n                      {queryResults.slice(page * itemsPerPage, (page + 1) * itemsPerPage).map(({ item: { nom, id, tipus, simbol } }, n) => (\n                        <ListItem\n                          key={n}\n                          button\n                          onClick={goToElement(tipus, id)}\n                        >\n                          <ListItemIcon>\n                            {simbol ? <Avatar src={`logos/mini/${simbol}`} alt={nom} /> : tipus === 'programa' ? <ProgramIcon /> : <SchoolIcon />}\n                          </ListItemIcon>\n                          <ListItemText primary={nom} />\n                        </ListItem>\n                      ))}\n                    </List>\n                    <hr />\n                    <TablePagination\n                      classes={{ spacer: 'hidden', toolbar: 'no-padding' }}\n                      component=\"nav\"\n                      page={page}\n                      rowsPerPage={itemsPerPage}\n                      onChangeRowsPerPage={ev => setItemsPerPage(ev.target.value)}\n                      count={queryResults.length}\n                      onChangePage={(ev, p) => setPage(p)}\n                      labelDisplayedRows={({ from, to, count }) => `Resultats ${from} al ${to} de ${count}`}\n                      labelRowsPerPage=\"Resultats per pàgina:\"\n                    />\n                  </div>\n                }\n              </Paper>\n            </section>\n          </>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default Cerca;","import React, { Component } from 'react';\nimport { HashRouter as Router, Route, Switch, Redirect } from 'react-router-dom';\nimport CheckRouteChanges from './utils/CheckRouteChanges';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport color_error from '@material-ui/core/colors/red';\nimport Fuse from 'fuse.js';\n\nimport {handleFetchErrors, loadGFont} from './utils/Utils';\nimport Header from './components/Header';\nimport Presentacio from './components/Presentacio';\nimport Programes from './components/Programes';\nimport FitxaPrograma from './components/FitxaPrograma';\nimport FitxaCentre from './components/FitxaCentre';\nimport FitxaZona from './components/FitxaZona';\nimport FitxaProjecte from './components/FitxaProjecte';\nimport Error from './components/Error';\nimport Loading from './components/Loading';\nimport Footer from './components/Footer';\nimport Cerca from './components/Cerca';\nimport AppContext, { DEFAULT_STATE } from './AppContext';\n\n// Gencat dark gray\nconst color_primary = { 500: '#333' };\n\n// Gencat red\nconst color_secondary = { 500: '#c00000' };\n\n/**\n * Miscellanous values taken from environment variables\n * and from files: `.env`, `.env.development` and `.env.production`\n */\n//const API_ROOT = process.env.REACT_APP_API_ROOT || '../api';\nconst MAX_DENSITY = process.env.REACT_APP_MAX_DENSITY || 0.8;\nconst MIN_DENSITY = process.env.REACT_APP_MIN_DENSITY || 0.000001;\nconst MINMAX_DENSITY = process.env.REACT_APP_MINMAX_DENSITY || 0.4;\nconst DEBUG_GLOBAL_VAR = process.env.REACT_APP_DEBUG_GLOBAL_VAR || '';\n\n/**\n * Main Material-UI theme\n */\nconst theme = createMuiTheme({\n  palette: {\n    primary: { main: color_primary[500] },\n    secondary: { main: color_secondary[500] },\n    error: { main: color_error[500] },\n  },\n  typography: {\n    fontFamily: [\n      'Open Sans',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n    ].join(','),\n    useNextVariants: true,\n  },\n  overrides: {\n    \"MuiStepIcon\": {\n      completed: {\n        color: '#c00000 !important',\n      }\n    }\n  },\n});\n\n/**\n * Main React component\n */\nclass App extends Component {\n\n  static contextType = AppContext;\n\n  constructor() {\n    super();\n\n    // Current app sections\n    this.menuItems = [\n      {\n        id: 'presenta',\n        name: 'Presentació',\n        path: '/',\n      },\n      {\n        id: 'programes',\n        name: 'Programes',\n        path: '/programes',\n      },\n      {\n        id: 'projectes',\n        name: 'Projectes',\n        path: '/programa/1001',\n      },\n    ];\n\n    // Set the initial state\n    this.state = {\n      ...DEFAULT_STATE,\n      // Immutable attributes:\n      updateMap: this.updateMap,\n      // Functions used to perform full-text search with Fuse.js on 'centres' and 'programes', built after loading\n      fuseFuncs: [],\n      menuItems: this.menuItems,\n    };\n\n  }\n\n  setStateMod(values, callback = null) {\n    this.setState(values, () => {\n      if (DEBUG_GLOBAL_VAR)\n        window[DEBUG_GLOBAL_VAR] = this.state;\n      if (callback)\n        callback();\n    });\n  }\n\n  /**\n   * Load datasets from API or JSON files\n   */\n  loadData() {\n    this.setStateMod({ loading: true });\n    return Promise.all(\n      [\n        'data/programes.json', // `${API_ROOT}/programes/`\n        'data/instancies.json', // `${API_ROOT}/instancies/`\n        'data/centres.json',\n        'data/poligons.json',\n        'data/estudis.json',\n      ].map(uri => {\n        return fetch(uri, { method: 'GET', credentials: 'same-origin' })\n          .then(handleFetchErrors)\n          .then(response => response.json());\n      })\n    )\n      .then(([_programes, _instancies, _centres, _poligons, _estudis]) => {\n\n        // Build an object with centre ids as keys, useful for optimizing searches\n        _centres.forEach(c => {\n          c.programes = {};\n          c.allPrograms = new Set();\n          c.notCert = new Set();\n        });\n\n        // Convert synthetic multi-point expressions into arrays of co-ordinates suitable for leaflet polygons\n        _poligons.forEach(p => {\n          p.poligons = p.poligons.map(pts => pts.split(',').map(pt => pt.split('|').map(vs => Number(vs))));\n          p.centresInn = new Set();\n          p.programes = new Set();\n          p.density = MIN_DENSITY;\n          p.estudisBase = {};\n          p.estudisPart = {};\n          p.centresPart = new Set();\n        });\n\n        // Prepare sets for auto-detected data\n        const currentPrograms = new Set();\n\n        // Initialize transient properties\n        _programes.forEach(p => {\n          // Set all programs initially selected\n          currentPrograms.add(p.id);\n          // Initialize `centres` and `allCentres` (to be filled later)\n          p.centres = {};\n          p.allCentres = new Set();\n        });\n\n        // Convert arrays to maps\n        const centres = new Map(_centres.map(c => [c.id, c]));\n        const programes = new Map(_programes.map(p => [p.id, p]));\n        const poligons = new Map(_poligons.map(p => [p.key, p]));\n\n        // Initialize arrays of `centres` for each program, and `programa` for each centre, by curs\n        _instancies.forEach(({ programa, centre, curs, titol, cert, fitxa, video }) => {\n          const prog = programes.get(programa);\n          const cent = centres.get(centre);\n          if (prog && cent) {\n            (prog.centres[curs] = prog.centres[curs] || []).push(cent);\n            prog.allCentres.add(cent);\n            (cent.programes[curs] = cent.programes[curs] || []).push(prog);\n            cent.allPrograms.add(prog);\n            if (cent.sstt) {\n              const p = poligons.get(cent.sstt);\n              p.centresInn.add(cent);\n              p.programes.add(prog);\n            }\n            if (cent.se) {\n              const p = poligons.get(cent.se);\n              p.centresInn.add(cent);\n              p.programes.add(prog);\n            }\n            if (titol) {\n              const info = {\n                titol,\n                curs,\n              };\n              if (fitxa)\n                info.fitxa = fitxa;\n              if (video)\n                info.video = video;\n\n              if (!prog.info)\n                prog.info = {};\n              if (!prog.info[cent.id])\n                prog.info[cent.id] = [];\n              prog.info[cent.id].push(info);\n\n              if (!cent.info)\n                cent.info = {};\n              if (!cent.info[prog.id])\n                cent.info[prog.id] = [];\n              cent.info[prog.id].push(info);\n            }\n            if (!cert)\n              cent.notCert.add(`${programa}|${curs}`);\n          }\n          else\n            console.log(`WARNING: Instància amb programa o centre desconegut: ${programa} - ${centre} - ${curs}`);\n        });\n\n        // Summarize and order programs and centres\n        centres.forEach(c => {\n          c.allPrograms = Array.from(c.allPrograms).sort((a, b) => a.nom.localeCompare(b.nom));\n        });\n        programes.forEach(p => {\n          p.allCentres = Array.from(p.allCentres).sort((a, b) => a.nom.localeCompare(b.nom));\n        });\n\n\n        // Build the Fuse.js objects\n        // See: https://fusejs.io/\n        const fuseOptions = {\n          caseSensitive: false,\n          shouldSort: true,\n          tokenize: true,\n          matchAllTokens: true,\n          includeScore: true,\n          includeMatches: true,\n          threshold: 0.3,\n          location: 0,\n          distance: 4,\n          maxPatternLength: 32,\n          minMatchCharLength: 2,\n        };\n\n        const fuseFuncs = [\n          new Fuse(\n            _programes.map(({ id, nom, simbol, descripcio, info, ambCurr, ambInn, arees, objectius, requisits, compromisos, contacte, normativa }) => ({\n              id,\n              nom,\n              simbol,\n              descripcio,\n              info: info ? Object.values(info).map(infos => infos.map(inf => inf.titol)).join(', ') : '',\n              ambCurr: ambCurr.map(a => _estudis.ambitsCurr[a]).join(', '),\n              ambInn: ambInn.map(a => _estudis.ambitsInn[a]).join(', '),\n              arees: arees.join(', '),\n              objectius,\n              requisits,\n              compromisos,\n              contacte,\n              normativa,\n              tipus: 'programa',\n            })),\n            { ...fuseOptions, keys: ['id', 'nom', 'descripcio', 'info', 'ambCurr', 'ambInn', 'arees', 'objectius', 'requisits', 'compromisos', 'contacte', 'normativa'] }),\n          new Fuse(\n            _centres.map(({ id, nom, municipi, comarca, info }) => ({\n              id,\n              nom: `${nom} (${municipi})`,\n              comarca,\n              info: info ? Object.values(info).map(infos => infos.map(inf => inf.titol)).join(', ') : '',\n              tipus: 'centre',\n            })),\n            { ...fuseOptions, keys: ['id', 'nom', 'comarca', 'info'] }),\n        ];\n\n        // Update main data object\n        const data = {\n          ...this.state.data,\n          programes,\n          centres,\n          poligons,\n          estudis: new Map(Object.entries(_estudis.estudis)),\n          nivells: new Map(Object.entries(_estudis.nivells)),\n          ambitsCurr: new Map(Object.entries(_estudis.ambitsCurr)),\n          ambitsInn: new Map(Object.entries(_estudis.ambitsInn)),\n          cursosDisp: _estudis.cursos,\n        };\n\n        // Update the main state\n        this.setStateMod({\n          data,\n          dataLoaded: true,\n          polygons: [\n            { name: 'Serveis Territorials', shapes: _poligons.filter(p => p.tipus === 'ST') },\n            { name: 'Serveis Educatius de Zona', shapes: _poligons.filter(p => p.tipus === 'SEZ') },\n          ],\n          cursos: [...data.cursosDisp],\n          fuseFuncs,\n          currentPrograms,\n          loading: false,\n          error: false,\n        });\n      })\n      .catch(error => {\n        // Something wrong happened!\n        console.log(error);\n        this.setStateMod({ error: error.toString() });\n      });\n  }\n\n  checkTabMode(force = false) {\n    const tabs = window.matchMedia('(max-width: 840px)').matches;\n    if (this.state.tabMode !== tabs)\n      this.updateMap({ tabMode: tabs });\n  }\n\n  /**\n   * Miscellaneous operations to be performed at startup\n   */\n  componentDidMount() {\n    // Load Google's \"Open Sans\" font\n    loadGFont('Open Sans');\n    // Load datasets\n    this.loadData()\n      .then(() => {\n        // Check if tabs should be used\n        this.checkTabMode(true);\n        // Update tan mode when window resizes\n        window.addEventListener('resize', this.checkTabMode.bind(this));\n        // Check if map layers should be updated\n        window.setTimeout(() => {\n          this.checkForLayerUpdate(window.location.hash ? window.location.hash.substr(1) : '/');\n        }, 0);\n      });\n  }\n\n  /**\n   * Update the state of the main component, scrolling to new sections when needed\n   * @param {object} [state={}] - The new settings for `state`\n   * @param {boolean} [mapChanged=true] - `true` when this change involves map points\n   * @param {boolean} [currentProgramsChanged=false] - `true` when the list of current programs has changed\n   * @param {function} [callback] - Optional function to be called after state is changed\n   */\n  updateMap = (state = {}, mapChanged = true, currentProgramsChanged = false, callback = null) => {\n    this.setStateMod({ ...state, mapChanged, currentProgramsChanged }, callback);\n    window.requestAnimationFrame(() => {\n      if (currentProgramsChanged)\n        this.updateLayersDensity(this.state.programa ? new Set([this.state.programa]) : this.state.currentPrograms, this.state.cursos);\n      if (mapChanged)\n        window.setTimeout(() => this.setStateMod({ mapChanged: false }), 0);\n    });\n  }\n\n  /**\n   * Called from CheckRouteChanges when a new path is entered\n   * @param {object} props - New properties used, including a react-route location object\n   * @param {object} prevProps - Old properties, used for checking changes\n   */\n  contentUpdated = (props, prevProps) => {\n    if (props.location.pathname !== prevProps.location.pathname) {\n      this.checkForLayerUpdate(props.location.pathname);\n      window.scrollTo(0, 0);\n    }\n  };\n\n  /**\n   * Checks if the polygons density needs to be recalculated, based on the current path\n   * @param {string} pathname - Current path\n   */\n  checkForLayerUpdate = (pathname) => {\n    if (/^\\/(programes|programa\\/|centre\\/|zona\\/)/.test(pathname)) {\n      const check = /^\\/programa\\/(.*)$/.exec(pathname);\n      const programa = check && check.length === 2 ? check[1] : null;\n      this.updateMap({ programa }, true, true);\n    }\n  };\n\n  /**\n   * Update the `density` value on each polygon, based on the number of schools enroled to\n   * the current programs among the total number of schools on the polygon having at least\n   * one of the educational levels targeted by at least one of the current programs.\n   * Values can also be filtered by school year.\n   * @param {Set} currentPrograms - Set with the `id`s of the programs to be included on the calculation\n   * @param {string[]=} cursos - School years to be considered. Defaults to _null_, meaning all available years.\n   * @param {object=} data - Object containing the current datasets. Defaults to `data` in the current state.\n   */\n  updateLayersDensity = (currentPrograms, cursos = null, data = this.state.data) => {\n\n    const { poligons, programes } = data;\n\n    // Clear base arrays\n    poligons.forEach(poli => {\n      // Clear current density\n      poli.density = MIN_DENSITY;\n\n      // `estudisBase` will be filled with the number of \"school groups\" involved in at least\n      // one of the current programs, where each \"school group\" is an educational level inside a school.\n      // key: educational level (EINF2C, EPRI...)      \n      // value: number of \"school groups\" of this educational level on this polygon\n      poli.estudisBase = {};\n\n      // `estudisPart` will be filled with the total number of \"school groups\" participating in at least\n      // one of the current programs, where each \"school group\" is an educational level inside a school.\n      // key: educational level (EINF2C, EPRI...)      \n      // value: number of \"school groups\" of this type participating in the current programs on this polygon\n      poli.estudisPart = {};\n\n      poli.centresPart = new Set();\n    });\n\n    // Object with all `centres` participating in current programs\n    // key: school id\n    // value: school\n    const currentCentres = {};\n\n    // For program, fill `estudisBase` and `currentCentres`\n    currentPrograms.forEach(pid => {\n      const program = programes.get(pid);\n      if (program && program.tipus.length && Object.keys(program.centres).length) {\n        program.tipus.forEach(t => {\n          poligons.forEach(poli => {\n            poli.estudisBase[t] = poli.centres[t] || 0;\n          });\n        });\n\n        Object.keys(program.centres).forEach(ce => {\n          if (!cursos || cursos.includes(ce)) {\n            program.centres[ce].forEach(centre => {\n              currentCentres[centre.id] = centre;\n            });\n          }\n        });\n      }\n    });\n\n    // For each school, fill `estudisPart` on their associated polygons (ST and SZ)\n    Object.values(currentCentres).forEach(centre => {\n      const st = poligons.get(centre.sstt);\n      const se = poligons.get(centre.se);\n      centre.estudis.forEach(tipus => {\n        if (st && st.estudisBase[tipus]) {\n          st.estudisPart[tipus] = (st.estudisPart[tipus] ? st.estudisPart[tipus] + 1 : 1);\n          st.centresPart.add(centre.id);\n        }\n        if (se && se.estudisBase[tipus]) {\n          se.estudisPart[tipus] = (se.estudisPart[tipus] ? se.estudisPart[tipus] + 1 : 1);\n          se.centresPart.add(centre.id);\n        }\n      });\n    });\n\n    // Calculate the density of each polygon\n    // (ratio between the summations of `estudisPart` and `estudisBase`)\n    let maxDensityST = 0, maxDensitySE = 0;\n    poligons.forEach(poli => {\n      let n = 0, d = 0;\n      Object.keys(poli.estudisBase).forEach(tipus => {\n        if (poli.estudisBase[tipus]) {\n          n += (poli.estudisPart[tipus] || 0);\n          d += poli.estudisBase[tipus];\n        }\n      });\n      if (d > 0) {\n        poli.density = Math.max(MIN_DENSITY, n / d);\n        if (poli.tipus === 'ST')\n          maxDensityST = Math.max(maxDensityST, poli.density);\n        else\n          maxDensitySE = Math.max(maxDensitySE, poli.density);\n      }\n    });\n\n    // Compute correction factors\n    const factorST = (maxDensityST > MIN_DENSITY && maxDensityST < MINMAX_DENSITY)\n      ? MINMAX_DENSITY / maxDensityST\n      : maxDensityST > MAX_DENSITY\n        ? MAX_DENSITY / maxDensityST\n        : 1;\n    const factorSE = (maxDensitySE > MIN_DENSITY && maxDensitySE < MINMAX_DENSITY)\n      ? MINMAX_DENSITY / maxDensitySE\n      : maxDensitySE > MAX_DENSITY\n        ? MAX_DENSITY / maxDensitySE\n        : 1;\n\n    // Apply correction factors\n    poligons.forEach(poli => poli.density *= (poli.tipus === 'ST' ? factorST : factorSE));\n  }\n\n  /**\n   * Builds the App main component\n   */\n  render() {\n\n    const { error, loading } = this.state;\n\n    return (\n      <Router basename={window.location.pathname}>\n        <CssBaseline>\n          <MuiThemeProvider theme={theme}>\n            <AppContext.Provider value={this.state}>\n              <CheckRouteChanges updateHandler={this.contentUpdated}>\n                <Header />\n                <div className=\"filler\" />\n                <main>\n                  {\n                    (loading && <Loading />) ||\n                    (error && <Error {...{ error, refetch: this.loadData }} />) ||\n                    <Switch>\n                      <Route exact path=\"/\" component={Presentacio} />\n                      <Route path=\"/programes\" component={Programes} />\n                      <Route path=\"/centre/:codi\" component={FitxaCentre} />\n                      <Route path=\"/programa/:id\" component={FitxaPrograma} />\n                      <Route path=\"/projecte/:id\" component={FitxaProjecte} />\n                      <Route path=\"/zona/:key\" component={FitxaZona} />\n                      <Route path=\"/cerca/:query\" component={Cerca} />\n                      <Redirect to=\"/\" />\n                    </Switch>\n                  }\n                </main>\n                <Footer />\n              </CheckRouteChanges>\n            </AppContext.Provider>\n          </MuiThemeProvider>\n        </CssBaseline>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './main.css';\nimport '../node_modules/leaflet.markercluster/dist/MarkerCluster.css';\nimport '../node_modules/leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport '../node_modules/react-leaflet-fullscreen/dist/styles.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nserviceWorker.register();\n"],"sourceRoot":""}