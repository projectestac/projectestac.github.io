(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{216:function(e,a,t){e.exports=t(528)},221:function(e,a,t){},528:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(28),o=t.n(c),l=(t(221),t(222),t(223),t(224),t(215)),i=t(23),s=t(37),u=t(67),m=t(50),p=t(69),d=t(68),E=t(70),g=t(53),f=t(54),h=function(e){function a(e){var t;return Object(u.a)(this,a),(t=Object(p.a)(this,Object(d.a)(a).call(this,e))).updateHandler=e.updateHandler,t}return Object(E.a)(a,e),Object(m.a)(a,[{key:"componentDidUpdate",value:function(e){this.updateHandler&&this.updateHandler(this.props,e)}},{key:"render",value:function(){return this.props.children}}]),a}(r.a.Component),b=Object(f.d)(h),v=t(214),y=t.n(v),C=t(130),k=t.n(C),N=t(92),w=t(129),j=t.n(w),O=t(133),P=t.n(O),S=t(188),M=t.n(S);var I={loadGFont:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Roboto",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"300,400,500,600",t=document.createElement("link");t.href="https://fonts.googleapis.com/css?family=".concat(e,":").concat(a),t.rel="stylesheet",document.head.appendChild(t),new M.a(e).load().then(function(){return document.documentElement.classList.add(e.replace(" ","-").toLowerCase())}).catch(function(a){return console.error("Unable to load ".concat(e," font due to: ").concat(a))})},handleFetchErrors:function(e){if(!e.ok)throw Error(e.statusText||"Error desconegut");return e},sumAll:function(e){return Object.values(e).reduce(function(e,a){return e+a},0)},plainArray:function(e){var a={};return Object.keys(e).forEach(function(t){e[t].forEach(function(e){a[e.id]||(a[e.id]={id:e.id,nom:e.nom,simbol:e.simbol,cursos:[]}),a[e.id].cursos.push(t)})}),Object.values(a).sort(function(e,a){return e.nom.localeCompare(a.nom)})},sortObjectArrayBy:function(e,a){return"string"===typeof a?e.sort(function(e,t){return e[a].localeCompare(t[a])}):e.sort(function(e,t){return a.map(function(a){return e[a]}).join(" ").localeCompare(a.map(function(e){return t[e]}).join(" "))})},cursCurt:function(e){return 9===e.length?"".concat(e.substr(0,5)).concat(e.substr(7,2)):e}},A={programes:new Map,centres:new Map,poligons:new Map,estudis:new Map,nivells:new Map,ambitsCurr:new Map,ambitsInn:new Map,cursosDisp:[]},T={loading:!0,dataLoaded:!1,error:!1,polygons:[],currentPrograms:new Set,program:null,cursos:[],delayedMapUpdate:!0,updateMap:function(){return null},fuseFuncs:[],menuItems:[],data:A},_=r.a.createContext(T),x=t(192),B=t.n(x),R=t(131),z=t.n(R),F=t(36),L=t.n(F),D=t(193),q=t.n(D),U=t(195),Z=t.n(U),G=t(93),W=t.n(G),V=t(21),Y=t.n(V),J=t(190),H=t.n(J),Q=t(191),K=t.n(Q);var X=function(e){var a=e.closeFn,t=void 0===a?function(){return null}:a,n=e.history,c=e.mini,o=void 0!==c&&c,l=r.a.useState(""),s=Object(i.a)(l,2),u=s[0],m=s[1],p=function(e){e.preventDefault(),t(),n.push("/cerca/".concat(u)),m("")};return r.a.createElement("form",{className:"search-bar",onSubmit:p},r.a.createElement(L.a,{className:"search-btn",color:"inherit","aria-label":"Cerca",title:"Cerca",onClick:p},r.a.createElement(W.a,null)),r.a.createElement(H.a,{"aria-label":"Cerca text...",title:"Cerca text...",className:"search-text",value:u,InputProps:{disableUnderline:!0},onChange:function(e){return m(e.target.value)}}),!o&&r.a.createElement(L.a,{className:"search-close",color:"inherit","aria-label":"Tanca",title:"Tanca",onClick:t},r.a.createElement(K.a,null)))},$=t(194),ee=t.n($),ae=t(31),te=t.n(ae),ne=t(30),re=t.n(ne),ce=t(32),oe=t.n(ce),le=t(96),ie=t.n(le);var se=Object(f.d)(function(e){var a=e.history,t=e.location,n=r.a.useState(!1),c=Object(i.a)(n,2),o=c[0],l=c[1],s=r.a.useState(!1),u=Object(i.a)(s,2),m=u[0],p=u[1];return r.a.createElement(_.Consumer,null,function(e){var n=e.menuItems,c=(e.searchFn,n&&n.length>0),i=function(e){return function(){l(!1),e.path&&a.push(e.path)}};return n.forEach(function(e){return e.current=e.path===t.pathname}),r.a.createElement(r.a.Fragment,null,r.a.createElement(B.a,{className:"header",position:"fixed"},r.a.createElement(z.a,{disableGutters:!0},c&&r.a.createElement(L.a,{className:"main-menu-button",color:"inherit","aria-label":"Seccions",title:"Seccions",onClick:function(){return l(!0)}},r.a.createElement(q.a,null)),r.a.createElement("div",{className:"main-header-block"},r.a.createElement("div",{className:"top-bar"},r.a.createElement("a",{className:"logo-gencat",href:"https://web.gencat.cat/",title:"Generalitat de Catalunya",target:"_top"},"gencat.cat"),r.a.createElement(X,{className:"search-bar",history:a,mini:!0})),r.a.createElement(Y.a,{className:"main-title",variant:"h6",color:"inherit",noWrap:!0},"Mapa de la Innovaci\xf3 Educativa"),r.a.createElement("ul",{className:"nav-bar"},n.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"nav-label",role:"button",current:e.current?"true":"false",onClick:i(e)},e.name))}))),r.a.createElement(L.a,{className:"search-btn-small",color:"inherit","aria-label":"Cerca",title:"Cerca",onClick:function(){return p(!m)}},r.a.createElement(W.a,null))),m&&r.a.createElement(X,{closeFn:function(){return p(!1)},history:a})),c&&r.a.createElement(ee.a,{variant:"persistent",anchor:"left",open:o},r.a.createElement(te.a,null,r.a.createElement(re.a,{component:"li",divider:!0,button:!0,onClick:function(){return l(!1)}},r.a.createElement(ie.a,null,r.a.createElement(Z.a,null)),r.a.createElement(oe.a,{primary:"Tanca el men\xfa"})),n.map(function(e){return r.a.createElement(re.a,{component:"li",button:!0,key:e.id,onClick:i(e)},r.a.createElement(oe.a,{primary:e.name}))}))))})}),ue=t(46),me=t.n(ue),pe=t(24),de=t.n(pe),Ee=t(22),ge=t.n(Ee),fe='\n#### ATENCI\xd3: Espai en construcci\xf3\n\nLorem ipsum _dolor_ sit amet, __consectetur__ adipiscing elit. Sed et eleifend diam, sed commodo orci. Sed ut eros faucibus, varius velit eget, euismod quam. Vivamus sed odio erat.\n\nCras ac sem egestas nisi vestibulum ultricies. Sed mattis sem quis sagittis pretium. Nulla vel tortor lacinia, venenatis diam non, vulputate ante. Aenean sed nibh eget erat varius aliquet.\n\n---\n\nSed in [condimentum](http://condimentum.com.mx/ "Una web mexicana de condiments") ex, vel elementum ipsum. Morbi rutrum felis sit amet iaculis maximus. Nulla laoreet ante vel lacinia feugiat. Mauris suscipit interdum tellus vitae ultrices. Pellentesque ligula sem, sodales et consequat ut, interdum ut tellus. In laoreet aliquam luctus. Vestibulum at diam ut diam ornare mollis.\n\n',he={escapeHtml:!1};var be=function(e){var a=e.history;return r.a.createElement(_.Consumer,null,function(){return r.a.createElement("section",{className:"seccio presenta"},r.a.createElement(de.a,{className:"paper"},r.a.createElement(Y.a,{variant:"h4",color:"inherit"},"Presentaci\xf3"),r.a.createElement(me.a,he,fe),r.a.createElement(ge.a,{className:"close-intro-btn",variant:"outlined",onClick:function(){return a.push("/programes")}},"Ves al mapa")))})},ve=t(185),ye=t(182),Ce=t(128),ke=t(181),Ne=t(184),we=t(183),je=t(180),Oe={osm:{attribution:'&amp;copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},mapbox:{attribution:'Dades del mapa \xa9 contribu\xefdors de <a href="https://www.openstreetmap.org/">OpenStreetMap</a>, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imatges \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',url:"https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",id:"mapbox.streets",accessToken:"pk.eyJ1IjoiZnJuY2VzYyIsImEiOiJjanU1b3BkZ2owYThsNDR0M3A2MzBjczg2In0.5zKGaoSJeQOeiWZyOj8ByQ"},wikimedia:{attribution:'<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>',url:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png",minZoom:1,maxZoom:19}},Pe={};var Se=function(e){var a=e.type,t=void 0===a?"wikimedia":a;return Pe[t]||(Pe[t]=r.a.createElement(je.a,Oe[t])),Pe[t]},Me=t(29),Ie=t(9),Ae=t(8),Te=t.n(Ae);t(485);var _e=function(e){function a(){return Object(u.a)(this,a),Object(p.a)(this,Object(d.a)(a).apply(this,arguments))}return Object(E.a)(a,e),Object(m.a)(a,[{key:"createLeafletElement",value:function(e){var a=e.clusterProps,t=void 0===a?{}:a,n=new Te.a.markerClusterGroup(Object(s.a)({},e,t));return this.contextValue=Object(s.a)({},e.leaflet,{layerContainer:n}),n}}]),a}(Me.a),xe=Object(Ie.c)(_e),Be=t(196),Re=t.n(Be),ze="wikimedia",Fe=!0,Le=[[40.5,.15],[42.9,3.34]],De=[[39.5,-.85],[43.9,4.34]],qe={showCoverageOnHover:!1,maxClusterRadius:30};function Ue(e){var a,t=e.points,n=void 0===t?[]:t,c=e.polygons,o=void 0===c?[]:c,l=e.programa,i=void 0===l?null:l,s=e.poli,u=void 0===s?null:s,m=(e.center,e.zoom),p=void 0===m?8:m,d=e.maxZoom,E=void 0===d?13:d,g=e.history,f=e.updateMap,h=[{name:"Mostra la participaci\xf3 per zones",flag:"showDensity",default:!1},{name:"Mostra els centres",flag:"showCentres",default:!0}],b=window.localStorage,v=function(e){return"true"===b.getItem(e)},y=function(e,a){return b.setItem(e,a)},C=window.sessionStorage,k=Fe&&null===u,N=k&&function(){var e=C.getItem("mapBounds");if(!e)return null;var a=e.split(",");return 4!==a.length?null:[[Number(a[1]),Number(a[0])],[Number(a[3]),Number(a[2])]]}(),w=function(e){var a;k&&e.target&&e.target.getBounds&&(a=e.target.getBounds(),C.setItem("mapBounds",a.toBBoxString()))},j=function(e){return function(a){var t=h.findIndex(function(e){return e.name===a.name});if(t>=0){var n="add"===e;b.setItem(h[t].flag,n),0===t&&n&&f({},!1)}}},O=(a="currentLayer",Number(b.getItem(a)));y("currentLayer",O),h.forEach(function(e){var a=b.getItem(e.flag);y(e.flag,null===a?e.default:a)});var P=function(e){var a,t=e.centresPart.size,n=I.sumAll(e.estudisPart),c=I.sumAll(e.estudisBase),o=(c>0?n/c*100:0).toFixed(1);return r.a.createElement(ve.a,null,r.a.createElement("h4",{style:{cursor:"pointer"},onClick:(a=e.key,function(){return g.push("/zona/".concat(a))})},e.nom),t&&r.a.createElement("p",null,r.a.createElement("span",null,"Centres participants ".concat(i?"al programa seleccionat":"als programes seleccionats",": ").concat(t)),r.a.createElement("br",null),r.a.createElement("span",null,"\xcdndex de participaci\xf3: ".concat(o,"%")))||r.a.createElement("p",null,"No hi ha cap centre que participi als programes seleccionats."))};return r.a.createElement(ye.a,Object.assign({className:"mapa markercluster-map"},{maxZoom:E,minZoom:p,bounds:u&&u.bounds||N||Le,maxBounds:De,onBaseLayerChange:function(e){var a=o.findIndex(function(a){return a.name===e.name});a>=0&&(y("currentLayer",a),v(h[0].flag)&&f({},!1))},onOverlayAdd:j("add"),onOverlayRemove:j("remove"),onZoomEnd:w,onMoveEnd:w}),r.a.createElement(Se,{type:ze}),r.a.createElement(Ce.b,{position:"topright"},o.map(function(e,a){return r.a.createElement(Ce.b.BaseLayer,{name:e.name,key:a,checked:null!==u?a===("SEZ"===u.tipus?1:0):a===O},r.a.createElement(ke.a,null,e.shapes.filter(function(e){return null===u||u===e}).map(function(e,a){return r.a.createElement(Ne.a,{key:a,positions:e.poligons,weight:2,fillOpacity:0},P(e))})))}),r.a.createElement(Ce.b.Overlay,{name:h[0].name,checked:null===u&&v(h[0].flag)},r.a.createElement(ke.a,null,o[O].shapes.filter(function(e){return null===u||u===e}).map(function(e,a){return r.a.createElement(Ne.a,{key:a,positions:e.poligons,weight:0,fillOpacity:e.density},P(e))}))),r.a.createElement(Ce.b.Overlay,{name:h[1].name,checked:null!==u||v(h[1].flag)},r.a.createElement(xe,{clusterProps:qe},n.map(function(e){return r.a.createElement(we.a,{key:e.id,position:[e.lat,e.lng]},function(e){return r.a.createElement(ve.a,null,r.a.createElement("h4",{style:{cursor:"pointer"},onClick:(a=e.id,function(){return g.push("/centre/".concat(a))})},e.nom),e.adreca,r.a.createElement("br",null),r.a.createElement("a",{href:e.web},e.web));var a}(e))})))),r.a.createElement(Re.a,{position:"topleft",title:"Mostra el mapa a pantalla completa",titleCancel:"Surt de la pantalla completa"}))}var Ze="wikimedia",Ge=[[40.5,.15],[42.9,3.34]];function We(e){var a=e.point,t=e.center,n=void 0===t?[41.7,1.8]:t,c=e.zoom,o=void 0===c?8:c,l=e.maxZoom,i=void 0===l?19:l;return r.a.createElement(ye.a,Object.assign({className:"mapa-centre"},{center:n,zoom:o,maxZoom:i,minZoom:o,maxBounds:Ge}),r.a.createElement(Se,{type:Ze}),r.a.createElement(we.a,{key:a.id,position:[a.lat,a.lng]}))}var Ve=t(197),Ye=t.n(Ve),Je=t(198),He=t.n(Je),Qe=t(199),Ke=t.n(Qe);var Xe=function(e){var a=e.data,t=a.programes,n=a.centres,c=a.poligons,o=a.cursosDisp,l=e.programa,i=e.centre,s=e.zona,u=e.cursos,m=e.currentPrograms,p=e.polygons,d=e.mapChanged,E=e.history,g=e.updateMap,f=i?n.get(i):null,h=s?c.get(s):null,b=window.innerWidth,v=b<600?7:b<820?8:b<1300?7:8,y=function(e,a){var n=t.get(e);return n&&Object.keys(n.centres).forEach(function(e){u&&!u.includes(e)||n.centres[e].forEach(function(e){h&&!h.centresInn.has(e)||a.find(function(a){return a.id===e.id})||a.push(e)})}),a},C=[];return d||(f?C.push(f):l?y(l,C):m.forEach(function(e){return y(e,C)})),r.a.createElement("section",{className:"seccio smapa"},r.a.createElement(de.a,{className:f?"paper":"paper no-padding-top"},f&&r.a.createElement(We,{point:f,center:[f.lat,f.lng],zoom:15,maxZoom:19})||r.a.createElement(r.a.Fragment,null,r.a.createElement(Ye.a,{className:"cursos",nonLinear:!0,alternativeLabel:!0,activeStep:null},o.map(function(e,a){return r.a.createElement(He.a,{key:e},r.a.createElement(Ke.a,{onClick:(t=e,function(e){var a=[];o.forEach(function(e){(t===e&&!u.includes(e)||t!==e&&u.includes(e))&&a.push(e)}),g({cursos:a},!0,!0)}),completed:u.includes(e)},I.cursCurt(e)));var t})),r.a.createElement(Ue,{points:C,polygons:p,programa:l,poli:h,center:[41.7,1.8],zoom:v,maxZoom:19,history:E,updateMap:g}))))},$e=t(205),ea=t.n($e),aa=t(100),ta=t.n(aa),na=t(206),ra=t.n(na),ca=t(101),oa=t.n(ca),la=t(204),ia=t.n(la),sa=t(13),ua=t(200),ma=t.n(ua),pa=t(203),da=t.n(pa),Ea=t(202),ga=t.n(Ea),fa=t(201),ha=t.n(fa),ba=t(95),va=t.n(ba),ya=t(94),Ca=t.n(ya),ka=t(78),Na=t.n(ka),wa=t(71),ja=t.n(wa),Oa=t(99),Pa=t.n(Oa),Sa=t(98),Ma=t.n(Sa);var Ia=function(e){var a=e.dlgOpen,t=e.setDlgOpen,n=e.data,c=n.programes,o=n.ambitsCurr,l=n.ambitsInn,u=n.nivells,m=e.updateMap,p=r.a.useState(""),d=Object(i.a)(p,2),E=d[0],g=d[1],f=r.a.useState(""),h=Object(i.a)(f,2),b=h[0],v=h[1],y=r.a.useState(Array.from(u).reduce(function(e,a){return e[Object(i.a)(a,1)[0]]=!0,e},{})),C=Object(i.a)(y,2),k=C[0],N=C[1],w=r.a.useState(new Set),j=Object(i.a)(w,2),O=j[0],P=j[1],S=function(){var e=new Set;c.forEach(function(a,t){""!==E&&!a.ambInn.includes(E)||""!==b&&!a.ambCurr.includes(b)||!Object.keys(k).find(function(e){return k[e]&&u.get(e).find(function(e){return a.tipus.includes(e)})})||e.add(t)}),P(e)};r.a.useMemo(S,[E,b,k]);var M=function(e){return function(a){e(a.target.value)}},I=function(e){return function(a){e&&m({currentPrograms:O},!0,!0),t(!1)}};return r.a.createElement(ma.a,{open:a,onEnter:S,"aria-labelledby":"dialog-title",classes:{paper:"stretch-dlg"}},r.a.createElement(ha.a,{id:"dialog-title"},"Tipus de programes"),r.a.createElement(ga.a,{className:"dialog-content"},r.a.createElement("div",{className:"nivells"},Array.from(u).map(function(e){var a,t=Object(i.a)(e,1)[0];return r.a.createElement(Ma.a,{key:t,className:"select-nivell",control:r.a.createElement(Pa.a,{onChange:(a=t,function(e){N(Object(s.a)({},k,Object(sa.a)({},a,e.target.checked)))}),value:t,checked:k[t]}),label:t})})),r.a.createElement(va.a,{className:"select-list"},r.a.createElement(Ca.a,{htmlFor:"select-ambit-curr"},"\xc0mbit curricular"),r.a.createElement(Na.a,{value:b,onChange:M(v),inputProps:{name:"ambitCurr",id:"select-ambit-curr"}},r.a.createElement(ja.a,{value:""},r.a.createElement("em",null,"Tots els \xe0mbits")),Array.from(o.keys()).sort().map(function(e){return r.a.createElement(ja.a,{key:e,value:e},o.get(e))}))),r.a.createElement(va.a,{className:"select-list"},r.a.createElement(Ca.a,{htmlFor:"select-ambit-inn"},"\xc0mbit d'innovaci\xf3"),r.a.createElement(Na.a,{value:E,onChange:M(g),inputProps:{name:"ambitInn",id:"select-ambit-inn"}},r.a.createElement(ja.a,{value:""},r.a.createElement("em",null,"Tots els \xe0mbits")),Array.from(l.keys()).sort().map(function(e){return r.a.createElement(ja.a,{key:e,value:e},l.get(e))}))),r.a.createElement(Y.a,{className:"info"},O.size," ",1===O.size?"programa seleccionat":"programes seleccionats")),r.a.createElement(da.a,null,r.a.createElement(ge.a,{onClick:I(!0),color:"primary"},"Aplica la selecci\xf3"),r.a.createElement(ge.a,{onClick:I(!1),color:"primary"},"Cancel\xb7la")))};var Aa=function(e){var a=e.history,t=r.a.useState(!1),n=Object(i.a)(t,2),c=n[0],o=n[1];return r.a.createElement(_.Consumer,null,function(e){var t=e.data,n=e.data,l=n.programes,i=n.ambitsCurr,s=n.ambitsInn,u=n.nivells,m=e.cursos,p=e.currentPrograms,d=e.polygons,E=e.mapChanged,g=e.updateMap,f=p.size===l.size,h=function(e){return function(){return a.push("/programa/".concat(e))}},b=function(e){return function(a){p[p.has(e)?"delete":"add"](e),g({currentPrograms:p,ambitCurr:"",ambitInn:"",nivell:""},!0,!0)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{className:"gomap","aria-label":"Mapa",onClick:function(){return document.querySelector(".smapa").scrollIntoView()}},r.a.createElement(ia.a,{className:"left-icon"}),"Mapa"),r.a.createElement("section",{className:"seccio programes"},r.a.createElement(Ia,{dlgOpen:c,setDlgOpen:o,data:{programes:l,ambitsCurr:i,ambitsInn:s,nivells:u},updateMap:g}),r.a.createElement(de.a,{className:"paper"},r.a.createElement("h3",null,"Programes d'innovaci\xf3"),r.a.createElement("div",{className:"select-progs"},r.a.createElement(ge.a,{variant:"outlined",color:"primary",onClick:function(){return o(!0)}},"Selecciona per tipus"),r.a.createElement(Ma.a,{className:"select-all",labelPlacement:"start",control:r.a.createElement(Pa.a,{onChange:function(e){e.target.checked?l.forEach(function(e,a){return p.add(a)}):p.clear(),g({currentPrograms:p},!0,!0)},checked:f}),label:"Selecciona'ls tots"})),r.a.createElement(te.a,{className:"prog-list"},Array.from(l.values()).map(function(e,a){var t=e.id,n=e.nom,c=e.simbol,o=e.centres;return r.a.createElement(re.a,{key:a,button:!0,className:"list-button"},r.a.createElement(ta.a,null,r.a.createElement(oa.a,{src:"logos/".concat(c),alt:n})),r.a.createElement(oe.a,{primary:n,secondary:"Centres participants: "+Object.keys(o).sort().map(function(e){return"".concat(I.cursCurt(e),": ").concat(o[e].length)}).join(", "),onClick:h(t)}),r.a.createElement(ea.a,null,r.a.createElement(ra.a,{onChange:b(t),checked:p.has(t)})))})))),r.a.createElement(Xe,{data:t,programa:null,centre:null,zona:null,cursos:m,currentPrograms:p,polygons:d,mapChanged:E,history:a,updateMap:g}))})},Ta=t(102),_a=t.n(Ta),xa=t(103),Ba=t.n(xa),Ra=t(105),za=t.n(Ra),Fa=t(104),La=t.n(Fa),Da=t(43),qa=t.n(Da),Ua=t(209),Za=t.n(Ua),Ga=t(207),Wa=t.n(Ga),Va=t(208),Ya=t.n(Va);var Ja=function(e){var a=e.error,t=e.history,n=e.refetch;return r.a.createElement("div",{className:"err-msg"},r.a.createElement(Y.a,null,r.a.createElement(Wa.a,{className:"err-icon",color:"secondary"}),a||"Error desconegut!"),n&&r.a.createElement(ge.a,{className:"action-btn","aria-label":"Reintenta",onClick:n,variant:"outlined"},r.a.createElement(Ya.a,{className:"left-icon"}),"Reintenta")||t&&t.length>1&&r.a.createElement(ge.a,{className:"action-btn","aria-label":"Torna",variant:"outlined",onClick:function(){return t.goBack()}},r.a.createElement(qa.a,{className:"left-icon"}),"Torna"))},Ha={escapeHtml:!1};var Qa=function(e){var a=e.history,t=e.match.params.id;return r.a.createElement(_.Consumer,null,function(e){var n=e.data,c=e.cursos,o=e.currentPrograms,l=e.polygons,i=e.mapChanged,s=e.updateMap,u=n.programes,m=n.estudis,p=n.ambitsCurr,d=n.ambitsInn,E=u.get(t);if(!E)return r.a.createElement(Ja,{error:"No hi ha cap programa amb el codi: ".concat(t),history:a});var g=E.nom,f=E.descripcio,h=E.link,b=E.ambCurr,v=E.ambInn,y=E.fitxa,C=E.video,k=E.objectius,N=E.requisits,w=E.compromisos,j=E.contacte,O=E.normativa,P=E.arees,S=E.simbol,M=E.tipus,I=E.centres;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(qa.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio programa"},r.a.createElement(de.a,{className:"paper"},r.a.createElement("h3",null,g),r.a.createElement("div",{id:"descripcio"},S&&r.a.createElement("img",{className:"prog-logo",src:"logos/".concat(S),alt:g}),r.a.createElement(me.a,Ha,f),r.a.createElement("br",{clear:"all"})),k&&r.a.createElement("div",{className:"prog-objectius"},r.a.createElement("h4",null,"Objectius"),r.a.createElement(me.a,Ha,k)),N&&r.a.createElement("div",{className:"prog-requisits"},r.a.createElement("h4",null,"Requisits"),r.a.createElement(me.a,Ha,N)),w&&r.a.createElement("div",{className:"prog-compromisos"},r.a.createElement("h4",null,"Compromisos"),r.a.createElement(me.a,Ha,w)),O&&r.a.createElement("div",{className:"prog-normativa"},r.a.createElement("h4",null,"Normativa"),r.a.createElement(me.a,Ha,O)),j&&r.a.createElement("div",{className:"prog-contacte"},r.a.createElement("h4",null,"Contacte"),r.a.createElement("div",null,r.a.createElement("a",{href:"mailto:".concat(j)},j))),v.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"\xc0mbits d'innovaci\xf3:"),r.a.createElement("ul",null,v.map(function(e){return r.a.createElement("li",{key:e},d.get(e))}))),b.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"\xc0mbits curriculars:"),r.a.createElement("ul",null,b.map(function(e){return r.a.createElement("li",{key:e},p.get(e))}))),P.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"\xc0rees curriculars:"),r.a.createElement("ul",null,P.map(function(e,a){return r.a.createElement("li",{key:a},e)}))),M.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"Nivells educatius:"),r.a.createElement("ul",null,M.map(function(e,a){return r.a.createElement("li",{key:a},m.get(e))}))),h&&r.a.createElement("p",null,r.a.createElement("a",{href:h,target:"_blank",rel:"noopener noreferrer"},"M\xe9s informaci\xf3 sobre el programa")),y&&r.a.createElement(ge.a,{variant:"contained",className:"prog-fitxa",href:y},r.a.createElement(Za.a,{className:"left-icon"}),"Fitxa"),C&&r.a.createElement("div",{className:"prog-video"},r.a.createElement("br",null),r.a.createElement(me.a,Ha,C)),r.a.createElement("h4",null,"Centres participants:"),r.a.createElement("br",null),Object.keys(I).map(function(e,a){return r.a.createElement(_a.a,{key:a},r.a.createElement(Ba.a,{expandIcon:r.a.createElement(La.a,null)},r.a.createElement(Y.a,{className:"wider"},"CURS ".concat(e)),r.a.createElement(Y.a,null,"".concat(I[e].length," ").concat(1===I[e].length?"centre":"centres"))),r.a.createElement(za.a,{className:"small-padding-h"},r.a.createElement(te.a,{dense:!0},I[e].sort(function(e,a){return e.nom.localeCompare(a.nom)}).map(function(e,a){var n=e.id,c=e.nom,o=e.municipi,l=e.titols;return r.a.createElement(re.a,{key:a,button:!0,component:"a",href:"#/centre/".concat(n),className:"small-padding-h"},r.a.createElement(oe.a,{primary:"".concat(c," (").concat(o,")"),secondary:l&&l[t]?l[t]:null}))}))))}))),r.a.createElement(Xe,{data:n,programa:t,centre:null,zona:null,cursos:c,currentPrograms:o,polygons:l,mapChanged:i,history:a,updateMap:s}))})},Ka="agregat";var Xa=function(e){var a=e.history,t=e.match.params.codi;return r.a.createElement(_.Consumer,null,function(e){var n=e.data,c=e.currentPrograms,o=e.polygons,l=e.mapChanged,i=e.updateMap,s=n.centres.get(t);if(!s)return r.a.createElement(Ja,{error:"No hi ha cap programa amb el codi: ".concat(t),history:a});var u=s.nom,m=s.municipi,p=s.comarca,d=s.estudis,E=s.adreca,f=s.web,h=s.logo,b=s.nodes,v=s.web_propi,y=s.tel,C=s.mail,k=s.twitter,N=s.sstt,w=s.se,j=s.public,O=s.programes,P=s.titols,S=b||f||v,M=function(e){return function(){return a.push("/programa/".concat(e))}},A=n.poligons.get(N),T=n.poligons.get(w);return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(qa.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio centre"},r.a.createElement(de.a,{className:"paper"},h&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",{clear:"all"}),r.a.createElement("img",{className:"cent-logo",src:h,alt:u})),r.a.createElement("h3",null,u),r.a.createElement("div",{id:"tipus"},"Centre ",j?"p\xfablic":"privat concertat"),r.a.createElement("br",{clear:"all"}),r.a.createElement("div",{id:"adreca"},r.a.createElement("p",null,E,r.a.createElement("br",null),"".concat(m," (").concat(p,")"),r.a.createElement("br",null),y&&r.a.createElement(r.a.Fragment,null,"Tel. ".concat(y),r.a.createElement("br",null)),C&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"mailto:".concat(C)},C),r.a.createElement("br",null)),k&&r.a.createElement(r.a.Fragment,null,r.a.createElement("a",{href:"https://twitter.com/".concat(k),target:"_blank",rel:"noopener noreferrer"},k),r.a.createElement("br",null)))),S&&r.a.createElement("div",{id:"link"},r.a.createElement("h4",null,"Portal web del centre:"),r.a.createElement("a",{href:S,target:"_blank",rel:"noopener noreferrer"},S)),r.a.createElement("div",{id:"estudis"},r.a.createElement("h4",null,"Estudis que s'hi imparteixen:"),r.a.createElement("ul",null,d.map(function(e,a){return r.a.createElement("li",{key:a},n.estudis.get(e))}))),r.a.createElement("div",{id:"zones"},r.a.createElement("h4",null,"Zona:"),r.a.createElement("ul",null,A&&r.a.createElement("li",null,r.a.createElement(g.b,{to:"/zona/".concat(N)},A.nom)),T&&r.a.createElement("li",null,r.a.createElement(g.b,{to:"/zona/".concat(w)},T.nom)))),r.a.createElement("h4",null,"Programes d'innovaci\xf3 educativa on participa:"),r.a.createElement("br",null),"perCurs"===Ka&&Object.keys(O).map(function(e,a){return r.a.createElement(_a.a,{key:a},r.a.createElement(Ba.a,{expandIcon:r.a.createElement(La.a,null)},r.a.createElement(Y.a,{className:"wider"},"CURS ",e),r.a.createElement(Y.a,null,"".concat(O[e].length," ").concat(1===O[e].length?"programa":"programes"))),r.a.createElement(za.a,null,r.a.createElement("ul",null,O[e].map(function(e,a){var t=e.id,n=e.nom;return r.a.createElement("li",{key:a},r.a.createElement(ge.a,{onClick:M(t)},n,P&&P[t]?" - ".concat(P[t]):""))}))))})||r.a.createElement(te.a,null,I.plainArray(O).map(function(e,a){var t=e.id,n=e.nom,c=e.simbol,o=e.cursos;return r.a.createElement(re.a,{key:a,button:!0,className:"no-padding-h-small"},r.a.createElement(ta.a,null,r.a.createElement(oa.a,{src:"logos/".concat(c),alt:n})),r.a.createElement(oe.a,{primary:n,secondary:P&&P[t]||"".concat(o.sort().join(", ")),onClick:M(t)}))})))),r.a.createElement(Xe,{data:n,programa:null,centre:t,zona:null,currentPrograms:c,polygons:o,mapChanged:l,history:a,updateMap:i}))})};var $a=function(e){var a=e.history,t=e.match.params.key;return r.a.createElement(_.Consumer,null,function(e){var n=e.data,c=e.cursos,o=e.currentPrograms,l=e.polygons,i=e.mapChanged,s=e.updateMap,u=n.poligons.get(t);if(!u)return r.a.createElement(Ja,{error:"No hi ha cap zona amb el codi: ".concat(t),history:a});var m=u.nom,p=u.tipus,d=u.centresInn,E=function(e){return function(){return a.push("/centre/".concat(e))}},g=function(e){return function(){return a.push("/programa/".concat(e))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(qa.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio zona"},r.a.createElement(de.a,{className:"paper"},r.a.createElement("h3",null,m),r.a.createElement("div",null,"Tipus: ".concat(p)),r.a.createElement("div",{id:"descripcio"},r.a.createElement("p",null,"... aqu\xed hi anir\xe0 l'adre\xe7a, la web i altres informacions relacionades amb el ST/SE ...")),r.a.createElement("h4",null,"Centres d'aquest servei que participen en programes d'innovaci\xf3:"),r.a.createElement(te.a,null,Array.from(d).sort(function(e,a){return e.nom.localeCompare(a.nom)}).map(function(e,a){var t=e.id,n=e.nom,c=e.municipi,o=e.programes,l=e.titols;return r.a.createElement(re.a,{key:a,button:!0,className:"small-padding-h"},r.a.createElement(oe.a,{primary:"".concat(n," (").concat(c,")"),onClick:E(t)}),r.a.createElement("div",{className:"prog-icons"},I.plainArray(o).map(function(e,a){var t=e.id,n=e.nom,c=e.simbol,o="".concat(n).concat(l&&l[t]?": ".concat(l[t]):"");return r.a.createElement(L.a,{key:a,className:"prog-icon","aria-label":o,onClick:g(t)},r.a.createElement("img",{src:"logos/".concat(c),alt:o,title:o}))})))})))),r.a.createElement(Xe,{data:n,programa:null,centre:null,zona:t,cursos:c,currentPrograms:o,polygons:l,mapChanged:i,history:a,updateMap:s}))})},et=t(210),at=t.n(et);var tt=function(){return r.a.createElement("div",{className:"err-msg"},r.a.createElement(Y.a,null,"S'estan carregant les dades..."),r.a.createElement(at.a,{className:"progress"}))},nt=t(56);var rt=function(){return r.a.createElement("footer",null,r.a.createElement("div",{className:"footer-content"},r.a.createElement("a",{className:"logo-gencat",href:"https://web.gencat.cat/",title:"Generalitat de Catalunya",target:"_top"},"gencat.cat"),r.a.createElement(Y.a,{variant:"body2",className:"copyright"},r.a.createElement("a",{href:"https://innovacio.xtec.cat/"},nt.c," v",nt.d),r.a.createElement("br",null),r.a.createElement("a",{href:"http://www.xtec.cat"},"\xa9 2019 Departament d'Educaci\xf3 de la Generalitat de Catalunya"),r.a.createElement("br",null),r.a.createElement("a",{href:"https://spdx.org/licenses/".concat(nt.a,".html")},"Llic\xe8ncia P\xfablica de la Uni\xf3 Europea ",nt.a),r.a.createElement("br",null),r.a.createElement("a",{href:nt.b.url},nt.b.url),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("a",{href:"https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/"},r.a.createElement("strong",null,"Av\xeds legal")),": D\u2019acord amb l\u2019article 17.1 de la Llei 19/2014, la \xa9Generalitat de Catalunya permet la reutilitzaci\xf3 dels continguts i de les dades sempre que se'n citi la font i la data d'actualitzaci\xf3 i que no es desnaturalitzi la informaci\xf3 (article 8 de la Llei 37/2007) i tamb\xe9 que no es contradigui amb una llic\xe8ncia espec\xedfica.")))},ct=t(213),ot=t.n(ct),lt=t(211),it=t.n(lt),st=t(212),ut=t.n(st),mt=Number("25");var pt=function(e){var a=e.history,t=e.match.params.query,n=r.a.useState(0),c=Object(i.a)(n,2),o=c[0],l=c[1],s=r.a.useState(mt),u=Object(i.a)(s,2),m=u[0],p=u[1],d=r.a.useState([]),E=Object(i.a)(d,2),g=E[0],f=E[1],h=r.a.useState(""),b=Object(i.a)(h,2),v=b[0],y=b[1];return r.a.createElement(_.Consumer,null,function(e){var n=e.fuseFuncs;t!==v&&(y(t),f(n.reduce(function(e,a){return e.concat(a.search(t))},[])));var c=function(e,t){return function(n){a.push("/".concat(e,"/").concat(t))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(qa.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio cerca"},r.a.createElement(de.a,{className:"paper"},r.a.createElement("h2",null,'Resultats de la cerca "',v,'"'),0===g.length&&r.a.createElement("p",null,"No s'ha trobat cap element co\xefncident amb el criteri de cerca!")||r.a.createElement("div",null,r.a.createElement(te.a,{component:"ul"},g.slice(o*m,(o+1)*m).map(function(e,a){var t=e.item,n=t.nom,o=t.id,l=t.tipus;return r.a.createElement(re.a,{key:a,button:!0,onClick:c(l,o)},r.a.createElement(ie.a,null,"programa"===l?r.a.createElement(it.a,null):r.a.createElement(ut.a,null)),r.a.createElement(oe.a,{primary:n}))})),r.a.createElement("hr",null),r.a.createElement(ot.a,{classes:{spacer:"hidden",toolbar:"no-padding"},component:"nav",page:o,rowsPerPage:m,onChangeRowsPerPage:function(e){return p(e.target.value)},count:g.length,onChangePage:function(e,a){return l(a)},labelDisplayedRows:function(e){var a=e.from,t=e.to,n=e.count;return"Resultats ".concat(a," al ").concat(t," de ").concat(n)},labelRowsPerPage:"Resultats per p\xe0gina:"})))))})},dt="0.8",Et="0.000001",gt="0.4",ft=Object({NODE_ENV:"production",PUBLIC_URL:".",REACT_APP_TILE_LAYER:"wikimedia",REACT_APP_MAPBOX_TOKEN:"pk.eyJ1IjoiZnJuY2VzYyIsImEiOiJjanU1b3BkZ2owYThsNDR0M3A2MzBjczg2In0.5zKGaoSJeQOeiWZyOj8ByQ",REACT_APP_PRESERVE_MAP_BOUNDS:"true",REACT_APP_MAX_DENSITY:"0.8",REACT_APP_MIN_DENSITY:"0.000001",REACT_APP_MINMAX_DENSITY:"0.4",REACT_APP_MODE_PROG_CENTRE:"agregat",REACT_APP_ITEMS_PER_PAGE:"25"}).REACT_APP_DEBUG_GLOBAL_VAR||"",ht=Object(N.createMuiTheme)({palette:{primary:{main:"#333"},secondary:{main:"#c00000"},error:{main:j.a[500]}},typography:{fontFamily:["Open Sans","Roboto",'"Helvetica Neue"',"Arial","sans-serif"].join(","),useNextVariants:!0},overrides:{MuiStepIcon:{completed:{color:"#c00000 !important"}}}}),bt=function(e){function a(){var e;return Object(u.a)(this,a),(e=Object(p.a)(this,Object(d.a)(a).call(this))).updateMap=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.setStateMod(Object(s.a)({},a,{mapChanged:t,currentProgramsChanged:n})),window.requestAnimationFrame(function(){n&&e.updateLayersDensity(e.state.programa?new Set([e.state.programa]):e.state.currentPrograms,e.state.cursos),t&&window.setTimeout(function(){return e.setStateMod({mapChanged:!1})},0)})},e.contentUpdated=function(a,t){a.location.pathname!==t.location.pathname&&(e.checkForLayerUpdate(a.location.pathname),window.scrollTo(0,0))},e.checkForLayerUpdate=function(a){if(/^\/(programes|programa\/|centre\/|zona\/)/.test(a)){var t=/^\/programa\/(.*)$/.exec(a),n=t&&2===t.length?t[1]:null;e.updateMap({programa:n},!0,!0)}},e.updateLayersDensity=function(a){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.state.data,r=n.poligons,c=n.programes;r.forEach(function(e){e.density=Et,e.estudisBase={},e.estudisPart={},e.centresPart=new Set});var o={};a.forEach(function(e){var a=c.get(e);a&&a.tipus.length&&Object.keys(a.centres).length&&(a.tipus.forEach(function(e){r.forEach(function(a){a.estudisBase[e]=a.centres[e]||0})}),Object.keys(a.centres).forEach(function(e){t&&!t.includes(e)||a.centres[e].forEach(function(e){o[e.id]=e})}))}),Object.values(o).forEach(function(e){var a=r.get(e.sstt),t=r.get(e.se);e.estudis.forEach(function(n){a&&a.estudisBase[n]&&(a.estudisPart[n]=a.estudisPart[n]?a.estudisPart[n]+1:1,a.centresPart.add(e.id)),t&&t.estudisBase[n]&&(t.estudisPart[n]=t.estudisPart[n]?t.estudisPart[n]+1:1,t.centresPart.add(e.id))})});var l=0,i=0;r.forEach(function(e){var a=0,t=0;Object.keys(e.estudisPart).forEach(function(n){e.estudisBase[n]&&(a+=e.estudisPart[n],t+=e.estudisBase[n])}),t>0&&(e.density=a/t,"ST"===e.tipus?l=Math.max(l,e.density):i=Math.max(i,e.density))});var s=l>Et&&l<gt?gt/l:l>dt?dt/l:1,u=i>Et&&i<gt?gt/i:i>dt?dt/i:1;r.forEach(function(e){return e.density*="ST"===e.tipus?s:u})},e.menuItems=[{id:"presenta",name:"Presentaci\xf3",path:"/"},{id:"programes",name:"Programes",path:"/programes"}],e.state=Object(s.a)({},T,{updateMap:e.updateMap,fuseFuncs:[],menuItems:e.menuItems}),e}return Object(E.a)(a,e),Object(m.a)(a,[{key:"setStateMod",value:function(e){var a=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.setState(e,function(){ft&&(window[ft]=a.state),t&&t()})}},{key:"loadData",value:function(){var e=this;return this.setStateMod({loading:!0}),Promise.all(["data/programes.json","data/instancies.json","data/centres.json","data/poligons.json","data/estudis.json"].map(function(e){return fetch(e,{method:"GET",credentials:"same-origin"}).then(I.handleFetchErrors).then(function(e){return e.json()})})).then(function(a){var t=Object(i.a)(a,5),n=t[0],r=t[1],c=t[2],o=t[3],u=t[4];c=I.sortObjectArrayBy(c,["sstt","municipi","nom"]),n=I.sortObjectArrayBy(n,"nom"),o=I.sortObjectArrayBy(o,["tipus","id","key"]),c.forEach(function(e){e.programes=[]}),o.forEach(function(e){e.poligons=e.poligons.map(function(e){return e.split(",").map(function(e){return e.split("|").map(function(e){return Number(e)})})}),e.centresInn=new Set,e.density=Et,e.estudisBase={},e.estudisPart={},e.centresPart=new Set});var m=new Set;n.forEach(function(e){if(m.add(e.id),e.centres={},0===e.tipus.length){var a="".concat(e.nom," ").concat(e.nomCurt," ").concat(e.descripcio);/(FP|fp|[pP]rofessio)/.test(a)?e.tipus=["CFPM","CFPS"]:/(infantil|prim\xe0ria|escola)/.test(a)?e.tipus=["EINF2C","EPRI"]:e.tipus=["EINF2C","EPRI","ESO"]}});var p=new Map(c.map(function(e){return[e.id,e]})),d=new Map(n.map(function(e){return[e.id,e]})),E=new Map(o.map(function(e){return[e.key,e]}));r.forEach(function(e){var a=d.get(e.programa),t=p.get(e.centre);a&&t?((a.centres[e.curs]=a.centres[e.curs]||[]).push(t),(t.programes[e.curs]=t.programes[e.curs]||[]).push(a),t.sstt&&E.get(t.sstt).centresInn.add(t),t.se&&E.get(t.se).centresInn.add(t),e.titol&&(a.titols||(a.titols={}),a.titols[t.id]="".concat(a.titols[t.id]?"".concat(a.titols[t.id],", "):"",'"').concat(e.titol,'" (').concat(e.curs,")"),t.titols||(t.titols={}),t.titols[a.id]="".concat(t.titols[a.id]?"".concat(t.titols[a.id],", "):"",'"').concat(e.titol,'" (').concat(e.curs,")"))):console.log("WARNING: Inst\xe0ncia amb programa o centre desconegut: ".concat(e.programa," - ").concat(e.centre," - ").concat(e.curs))});var g={caseSensitive:!1,shouldSort:!0,tokenize:!0,matchAllTokens:!0,includeScore:!0,includeMatches:!0,threshold:.3,location:0,distance:4,maxPatternLength:32,minMatchCharLength:2},f=[new P.a(n.map(function(e){var a=e.id,t=e.nom,n=e.descripcio,r=e.titols,c=e.ambCurr,o=(e.ambInn,e.arees),l=e.objectius,i=e.requisits,s=e.compromisos,m=e.contacte,p=e.normativa;return{id:a,nom:t,descripcio:n,titols:r?Object.values(r).join(", "):"",ambCurr:c.map(function(e){return u.ambitsCurr[e]}).join(", "),ambInn:c.map(function(e){return u.ambitsInn[e]}).join(", "),arees:o.join(", "),objectius:l,requisits:i,compromisos:s,contacte:m,normativa:p,tipus:"programa"}}),Object(s.a)({},g,{keys:["id","nom","descripcio","titols","ambCurr","ambInn","arees","objectius","requisits","compromisos","contacte","normativa"]})),new P.a(c.map(function(e){var a=e.id,t=e.nom,n=e.municipi,r=e.comarca,c=e.titols;return{id:a,nom:"".concat(t," (").concat(n,")"),comarca:r,titols:c?Object.values(c).join(", "):"",tipus:"centre"}}),Object(s.a)({},g,{keys:["id","nom","comarca","titols"]}))],h=Object(s.a)({},e.state.data,{programes:d,centres:p,poligons:E,estudis:new Map(Object.entries(u.estudis)),nivells:new Map(Object.entries(u.nivells)),ambitsCurr:new Map(Object.entries(u.ambitsCurr)),ambitsInn:new Map(Object.entries(u.ambitsInn)),cursosDisp:u.cursos});e.setStateMod({data:h,dataLoaded:!0,polygons:[{name:"Serveis Territorials",shapes:o.filter(function(e){return"ST"===e.tipus})},{name:"Serveis Educatius de Zona",shapes:o.filter(function(e){return"SEZ"===e.tipus})}],cursos:Object(l.a)(h.cursosDisp),fuseFuncs:f,currentPrograms:m,loading:!1,error:!1})}).catch(function(a){console.log(a),e.setStateMod({error:a.toString()})})}},{key:"componentDidMount",value:function(){var e=this;I.loadGFont("Open Sans"),this.loadData().then(function(){e.checkForLayerUpdate(window.location.hash?window.location.hash.substr(1):"/")})}},{key:"render",value:function(){var e=this.state,a=e.error,t=e.loading;return r.a.createElement(g.a,{basename:window.location.pathname},r.a.createElement(y.a,null,r.a.createElement(k.a,{theme:ht},r.a.createElement(_.Provider,{value:this.state},r.a.createElement(b,{updateHandler:this.contentUpdated},r.a.createElement(se,null),r.a.createElement("div",{id:"filler"}),r.a.createElement("main",null,t&&r.a.createElement(tt,null)||a&&r.a.createElement(Ja,{error:a,refetch:this.loadData})||r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{exact:!0,path:"/",component:be}),r.a.createElement(f.a,{path:"/programes",component:Aa}),r.a.createElement(f.a,{path:"/centre/:codi",component:Xa}),r.a.createElement(f.a,{path:"/programa/:id",component:Qa}),r.a.createElement(f.a,{path:"/zona/:key",component:$a}),r.a.createElement(f.a,{path:"/cerca/:query",component:pt}))),r.a.createElement(rt,null))))))}}]),a}(n.Component);bt.contextType=_;var vt=bt,yt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ct(e,a){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(vt,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var a="".concat(".","/service-worker.js");yt?(function(e,a){fetch(e).then(function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ct(e,a)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(a,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):Ct(a,e)})}}()},56:function(e){e.exports={c:"Mapa de la Innovaci\xf3 Educativa a Catalunya",d:"1.0.23-beta",b:{type:"git",url:"https://github.com/projectestac/mapa-innovacio-edu"},a:"EUPL-1.2"}}},[[216,1,2]]]);
//# sourceMappingURL=main.e42e25ac.chunk.js.map