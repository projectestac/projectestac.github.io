{"version":3,"sources":["utils/CheckRouteChanges.js","utils/Utils.js","AppContext.js","components/SearchBar.js","components/Header.js","literals.js","components/Presentacio.js","utils/TileLayer.js","utils/MarkerClusterGroup.js","components/MainMap.js","components/MapaCentre.js","components/MapSection.js","components/SelectProgramsDlg.js","components/Programes.js","components/Error.js","components/FitxaPrograma.js","components/FitxaCentre.js","components/FitxaZona.js","components/Loading.js","components/Footer.js","components/Cerca.js","App.js","serviceWorker.js","index.js"],"names":["CheckRouteChanges","props","_this","Object","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","updateHandler","prevProps","children","React","Component","withRouter","Utils","loadGFont","fontName","arguments","length","undefined","weights","link","document","createElement","href","concat","rel","head","appendChild","FontFaceObserver","load","then","documentElement","classList","add","replace","toLowerCase","catch","err","console","error","handleFetchErrors","response","ok","Error","statusText","sumAll","obj","values","reduce","acc","v","plainArray","container","keys","forEach","curs","prog","id","nom","simbol","cursos","push","sort","c1","c2","localeCompare","sortObjectArrayBy","array","fields","a","b","map","f","join","cursCurt","substr","DEFAULT_DATA","programes","Map","centres","poligons","estudis","nivells","ambitsCurr","ambitsInn","cursosDisp","DEFAULT_STATE","loading","dataLoaded","polygons","currentPrograms","Set","programa","delayedMapUpdate","updateMap","fuseFuncs","menuItems","data","AppContext","createContext","SearchBar","_ref","_ref$closeFn","closeFn","history","_ref$mini","mini","_React$useState","useState","_React$useState2","slicedToArray","searchText","setSearchText","search","ev","preventDefault","react_default","className","onSubmit","IconButton_default","color","aria-label","title","onClick","Search_default","TextField_default","value","InputProps","disableUnderline","onChange","target","Close_default","location","drawerOpened","setDrawerOpened","_React$useState3","_React$useState4","searchOpened","setSearchOpened","src_AppContext","Consumer","_ref2","hasDrawer","searchFn","itemAction","item","path","mi","current","pathname","Fragment","AppBar_default","position","Toolbar_default","disableGutters","Menu_default","components_SearchBar","Typography_default","variant","noWrap","key","role","name","Drawer_default","anchor","open","List_default","ListItem_default","component","divider","button","ListItemIcon_default","ChevronLeft_default","ListItemText_default","primary","intro","MD_OPTIONS","escapeHtml","Presentacio","Paper_default","with_html_default","Button_default","LAYERS","osm","attribution","url","mapbox","accessToken","process","wikimedia","minZoom","maxZoom","BUILT_LAYERS","getTileLayer","_ref$type","type","TileLayer","require","MarkerClusterGroup","_props$clusterProps","clusterProps","el","L","markerClusterGroup","objectSpread","contextValue","leaflet","layerContainer","MapLayer","withLeaflet","TILE_LAYER","PRESERVE_MAP_BOUNDS","MAP_BOUNDS","MAX_BOUNDS","MARKERCLUSTER_PROPS","showCoverageOnHover","maxClusterRadius","MainMap","_ref$points","points","_ref$polygons","_ref$estudis","_ref$programa","_ref$poli","poli","_ref$zoom","zoom","_ref$maxZoom","OVERLAYS","flag","default","OVERLAY_SETTINGS_STORAGE","window","localStorage","getBool","getItem","setVal","val","setItem","MAP_BOUNDS_STORAGE","sessionStorage","preserveBounds","currentlySavedBounds","str","split","Number","getSavedBounds","boundsChanged","bounds","getBounds","toBBoxString","overlayChange","ov","findIndex","overlayVisible","currentLayer","stored","popupZona","zona","centresPart","size","estudisPart","estudisBase","perCent","toFixed","Popup","react_router_dom","to","es_Map","assign","maxBounds","onBaseLayerChange","layerIndex","p","onOverlayAdd","onOverlayRemove","onZoomEnd","onMoveEnd","utils_TileLayer","LayersControl","i","BaseLayer","checked","tipus","LayerGroup","shapes","filter","sh","n","Polygon","positions","weight","fillOpacity","Overlay","density","utils_MarkerClusterGroup","pt","Marker","lat","lng","centre","adreca","web","e","get","dist_default","titleCancel","MapaCentre","point","_ref$center","center","MapSection","_ref$data","mapChanged","singleCentre","w","innerWidth","addSchoolsOfProgram","progId","dest","includes","centresInn","has","find","c","Stepper_default","nonLinear","alternativeLabel","activeStep","k","Step_default","StepButton_default","result","completed","SelectProgramsDlg","dlgOpen","setDlgOpen","ambitInn","setAmbitInn","ambitCurr","setAmbitCurr","_React$useState5","Array","from","_React$useState6","nivellsChk","setNivellsChk","_React$useState7","_React$useState8","setCurrentPrograms","updateCurrentPrograms","progs","ambInn","ambCurr","nivell","tag","useMemo","listSelection","handle","closeDialog","Dialog_default","onEnter","aria-labelledby","classes","paper","DialogTitle_default","DialogContent_default","_ref4","FormControlLabel_default","control","Checkbox_default","defineProperty","label","FormControl_default","InputLabel_default","htmlFor","Select_default","inputProps","MenuItem_default","DialogActions_default","Programes","_ref2$data","allSelected","handleProgClick","handleProgSelect","components_SelectProgramsDlg","querySelector","scrollIntoView","ArrowDownward_default","labelPlacement","_p","clear","_ref3","ListItemAvatar_default","Avatar_default","src","alt","secondary","ListItemSecondaryAction_default","Switch_default","components_MapSection","refetch","ReportProblem_default","Refresh_default","goBack","ArrowBack_default","createExpansionPanel","content","ExpansionPanel_default","ExpansionPanelSummary_default","expandIcon","ExpandMore_default","style","marginTop","ExpansionPanelDetails_default","createMDExpansionPanel","mdContent","FitxaPrograma","match","params","components_Error","descripcio","fitxa","video","objectius","requisits","compromisos","contacte","normativa","arees","CloudDownload_default","Info_default","Mail_default","t","hasNc","codi","municipi","titols","nc","notCert","Divider_default","LOGO_BASE","FitxaCentre","comarca","logo","nodes","web_propi","tel","mail","twitter","sstt","se","pb","public","servei_territorial","servei_educatiu","test","Web_default","Twitter_default","FitxaZona","cp","fax","correu","programesArray","allCentres","numCentres","root","allPrograms","Loading","CircularProgress_default","Footer","version","license","repository","DEFAULT_ITEMS_PER_PAGE","Cerca","query","page","setPage","itemsPerPage","setItemsPerPage","queryResults","setQueryResults","currentQuery","setCurrentQuery","qr","ff","goToElement","slice","_ref3$item","Group_default","MapMarker_default","TablePagination_default","spacer","toolbar","rowsPerPage","onChangeRowsPerPage","count","onChangePage","labelDisplayedRows","labelRowsPerPage","MAX_DENSITY","MIN_DENSITY","MINMAX_DENSITY","theme","createMuiTheme","palette","main","color_error","typography","fontFamily","useNextVariants","overrides","MuiStepIcon","App","state","currentProgramsChanged","setStateMod","requestAnimationFrame","updateLayersDensity","setTimeout","contentUpdated","checkForLayerUpdate","scrollTo","check","exec","currentCentres","pid","program","ce","st","maxDensityST","maxDensitySE","d","Math","max","factorST","factorSE","_this2","callback","setState","_this3","Promise","all","uri","fetch","method","credentials","json","_programes","_instancies","_centres","_poligons","_estudis","pts","vs","nomCurt","titol","cert","cent","log","fuseOptions","caseSensitive","shouldSort","tokenize","matchAllTokens","includeScore","includeMatches","threshold","distance","maxPatternLength","minMatchCharLength","Fuse","_ref5","entries","toConsumableArray","toString","_this4","loadData","hash","_this$state","basename","CssBaseline_default","MuiThemeProvider_default","Provider","utils_CheckRouteChanges","components_Header","components_Loading","react_router","exact","components_Footer","contextType","isLocalhost","Boolean","hostname","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","ReactDOM","render","src_App","getElementById","URL","origin","addEventListener","contentType","headers","status","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.f51b01f5.chunk.js","sourcesContent":["import React from 'react';\nimport { withRouter } from 'react-router-dom';\n\n// Scroll to top on each router navigation\n// See: https://reacttraining.com/react-router/web/guides/scroll-restoration\nclass CheckRouteChanges extends React.Component {\n  constructor(props) {\n    super(props);\n    this.updateHandler = props.updateHandler;\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.updateHandler)\n      this.updateHandler(this.props, prevProps);\n  }\n\n  render() {\n    return this.props.children;\n  }\n}\n\nexport default withRouter(CheckRouteChanges);\n","// From: https://github.com/zeit/next.js/issues/512#issuecomment-322026199\n\nimport FontFaceObserver from 'fontfaceobserver';\n\n/**\n * Asynchronous loading of Google fonts\n */\nfunction loadGFont(fontName = 'Roboto', weights = '300,400,500,600') {\n  const link = document.createElement('link');\n  link.href = `https://fonts.googleapis.com/css?family=${fontName}:${weights}`;\n  link.rel = 'stylesheet';\n\n  document.head.appendChild(link);\n  const fontLoader = new FontFaceObserver(fontName);\n  fontLoader.load()\n    .then(() => document.documentElement.classList.add(fontName.replace(' ', '-').toLowerCase()))\n    .catch(err => console.error(`Unable to load ${fontName} font due to: ${err}`));\n}\n\n/**\n * Handle errors on fetch calls\n * @param {Object} response \n */\nfunction handleFetchErrors(response) {\n  if (!response.ok)\n    throw Error(response.statusText || 'Error desconegut');\n  return response;\n}\n\n/**\n * Return the addition of all values in an object of type `{key: value, key: value, ...}` where all values are numbers.\n * @param {object} obj \n */\nfunction sumAll(obj) {\n  return Object.values(obj).reduce((acc, v) => acc + v, 0);\n}\n\n/**\n * Used in objects of type {curs1: [prog1, prog2, prog3, ...], curs2: [prog1, ...], ...}\n * Returns a single array of type: [{id: prog1.id, nom: prog1.nom, cursos: [curs1, curs2, ...]}, {id: prog2.id, nom: prog2.nom, cursos: [curs1, ...]}, ...]\n * @param {object} obj - Object structured as in the description\n * @returns {object[]} - The resulting array of objects of type 'program', with a 'cursos' field.\n */\nfunction plainArray(obj) {\n  const container = {};\n  Object.keys(obj).forEach(curs => {\n    obj[curs].forEach(prog => {\n      if (!container[prog.id]) {\n        container[prog.id] = {\n          id: prog.id,\n          nom: prog.nom,\n          simbol: prog.simbol,\n          cursos: [],\n        };\n      }\n      container[prog.id].cursos.push(curs);\n    });\n  });\n  return Object.values(container).sort((c1, c2) => c1.nom.localeCompare(c2.nom));\n}\n\n/**\n * Converts an expression of type '2015-2016' to '2015-16'\n */\nfunction cursCurt(curs) {\n  return curs.length === 9 ? `${curs.substr(0, 5)}${curs.substr(7, 2)}` : curs;\n}\n\n\n/**\n * Sort an array of objects having the same string property\n * @param {Array} array - The array to be sorted\n * @param {string|string[]]} fields - The name or names of the attributes to be compared between array elements\n * @returns {Array} - The sorted array\n */\nfunction sortObjectArrayBy(array, fields) {\n  return typeof fields === 'string'\n    ? array.sort((a, b) => a[fields].localeCompare(b[fields]))\n    : array.sort((a, b) => fields.map(f => a[f]).join(' ').localeCompare(fields.map(f => b[f]).join(' ')));\n}\n\nexport default { loadGFont, handleFetchErrors, sumAll, plainArray, sortObjectArrayBy, cursCurt };\n","import React from 'react';\n\nexport const DEFAULT_DATA = {\n  programes: new Map(),\n  centres: new Map(),\n  poligons: new Map(),\n  estudis: new Map(),\n  nivells: new Map(),\n  ambitsCurr: new Map(),\n  ambitsInn: new Map(),\n  cursosDisp: [],\n};\n\nexport const DEFAULT_STATE = {\n  loading: true,\n  dataLoaded: false,\n  error: false,\n  polygons: [],\n  currentPrograms: new Set(),\n  programa: null,\n  cursos: [],\n  delayedMapUpdate: true,\n  // Inmutable attributes\n  updateMap: () => null,\n  fuseFuncs: [],\n  menuItems: [],\n  data: DEFAULT_DATA,\n};\n\nconst AppContext = React.createContext(DEFAULT_STATE);\n\nexport default AppContext;\n","import React from 'react';\nimport TextField from '@material-ui/core/TextField';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\nimport SearchIcon from '@material-ui/icons/Search';\n\nfunction SearchBar({ closeFn = () => null, history, mini = false }) {\n\n  const [searchText, setSearchText] = React.useState('');\n  const search = (ev) => {\n    ev.preventDefault();\n    closeFn();\n    history.push(`/cerca/${searchText}`);\n    setSearchText('');\n  };\n\n  return (\n    <form\n      className=\"search-bar\"\n      onSubmit={search}>\n      <IconButton\n        className=\"search-btn\"\n        color=\"inherit\"\n        aria-label=\"Cerca\"\n        title=\"Cerca\"\n        onClick={search}\n      >\n        <SearchIcon />\n      </IconButton>\n      <TextField\n        aria-label=\"Cerca text...\"\n        title=\"Cerca text...\"\n        className=\"search-text\"\n        value={searchText}\n        InputProps={{ disableUnderline: true }}\n        onChange={ev => setSearchText(ev.target.value)}\n      />\n      {!mini &&\n        <IconButton\n          className=\"search-close\"\n          color=\"inherit\"\n          aria-label=\"Tanca\"\n          title=\"Tanca\"\n          onClick={closeFn}\n        >\n          <CloseIcon />\n        </IconButton>\n      }\n    </form>\n  );\n}\n\nexport default SearchBar;\n","import React from 'react';\nimport { withRouter } from 'react-router-dom';\nimport AppContext from '../AppContext';\nimport AppBar from '@material-ui/core/AppBar';\nimport ToolBar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport SearchIcon from '@material-ui/icons/Search';\nimport Typography from '@material-ui/core/Typography';\nimport SearchBar from './SearchBar';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\n\nfunction Header({ history, location }) {\n\n  const [drawerOpened, setDrawerOpened] = React.useState(false);\n  const [searchOpened, setSearchOpened] = React.useState(false);\n\n  return (\n    <AppContext.Consumer>\n      {({ menuItems, searchFn }) => {\n\n        const hasDrawer = menuItems && menuItems.length > 0;\n\n        const itemAction = (item) => () => {\n          setDrawerOpened(false);\n          if (item.path)\n            history.push(item.path);\n        }\n\n        menuItems.forEach(mi => mi.current = mi.path === location.pathname);\n\n        return (\n          <>\n            <AppBar\n              className=\"header\"\n              position=\"fixed\"\n            >\n              <ToolBar\n                disableGutters={true}\n              >\n                {hasDrawer &&\n                  <IconButton\n                    className=\"main-menu-button\"\n                    color=\"inherit\"\n                    aria-label=\"Seccions\"\n                    title=\"Seccions\"\n                    onClick={() => setDrawerOpened(true)}\n                  >\n                    <MenuIcon />\n                  </IconButton>\n                }\n                <div className=\"main-header-block\">\n                  <div className=\"top-bar\">\n                    <a className=\"logo-gencat\" href=\"https://web.gencat.cat/\" title=\"Generalitat de Catalunya\" target=\"_top\">gencat.cat</a>\n                    <SearchBar {...{ className: 'search-bar', history, mini: true }} />\n                  </div>\n                  <Typography className=\"main-title\" variant=\"h6\" color=\"inherit\" noWrap>\n                    Mapa de la innovació pedagògica\n                </Typography>\n                  <ul className=\"nav-bar\">\n                    {menuItems.map(item => (\n                      <li key={item.id}>\n                        <div className=\"nav-label\" role=\"button\" current={item.current ? 'true' : 'false'} onClick={itemAction(item)}>{item.name}</div>\n                      </li>\n                    ))}\n                  </ul>\n                </div>\n                <IconButton\n                  className=\"search-btn-small\"\n                  color=\"inherit\"\n                  aria-label=\"Cerca\"\n                  title=\"Cerca\"\n                  onClick={() => setSearchOpened(!searchOpened)}\n                >\n                  <SearchIcon />\n                </IconButton>\n              </ToolBar>\n              {searchOpened && <SearchBar {...{ closeFn: () => setSearchOpened(false), history }} />}\n            </AppBar>\n            {\n              hasDrawer &&\n              <Drawer\n                variant=\"persistent\"\n                anchor=\"left\"\n                open={drawerOpened}\n              >\n                <List>\n                  <ListItem component=\"li\" divider button onClick={() => setDrawerOpened(false)}>\n                    <ListItemIcon>\n                      <ChevronLeftIcon />\n                    </ListItemIcon>\n                    <ListItemText primary=\"Tanca el menú\" />\n                  </ListItem>\n                  {menuItems.map(item => (\n                    <ListItem component=\"li\" button key={item.id} onClick={itemAction(item)}>\n                      <ListItemText primary={item.name} />\n                    </ListItem>\n                  ))}\n                </List>\n              </Drawer>\n            }\n          </>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default withRouter(Header);\n","// Textos utilitzats a l'aplicació\n\nexport const intro = `\n<img src=\"logos/portada.png\" style=\"max-width:100%;text-align:center;\" alt=\"Mapa de la innovació pedagògica\" />\n\nÉs voluntat del Departament d’Educació acompanyar els centres educatius del país en el procés de\ntransformació educativa per donar resposta a les necessitats del segle XXI i reconèixer els esforços\nque s’estan fent en termes d’innovació pedagògica.\n\nEl mapa de la innovació pedagògica de Catalunya és un instrument que situa en el territori i\nvisibilitza totes les iniciatives vinculades a la innovació i a la recerca educativa que es desenvolupa\nen els centres educatius i que han estat reconegudes pel Departament d’Educació des del 2015, d’acord\namb el <a href=\"http://xtec.gencat.cat/ca/innovacio/\" target=\"_blank\" rel=\"noopener noreferrer\">Marc de la Innovació Pedagògica de Catalunya</a>. \n\nAmb el mapa de la innovació es pretén impulsar el treball en xarxa entre els centres que comparteixen\nobjectius al llarg del territori i posar en valor la informació que faciliti la presa de decisions a\ntota la comunitat educativa, a l’administració i a altres agents. Aquesta presa de decisions ha de\npermetre promoure la inclusió, la cohesió i l’equitat, i facilitar la participació de tots els centres\nen l’èxit educatiu i la innovació per a la millora.\n\n`;\n\n","import React from 'react';\nimport AppContext from '../AppContext';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport { intro } from '../literals';\n\nconst MD_OPTIONS = {\n  escapeHtml: false,\n};\n\nfunction Presentacio({ history }) {\n\n  return (\n    <AppContext.Consumer>\n      {() => {\n        return (\n          <section className=\"seccio presenta\">\n            <Paper className=\"paper\">\n              <ReactMarkdown {...MD_OPTIONS}>\n                {intro}\n              </ReactMarkdown>\n              <Button\n                className=\"close-intro-btn\"\n                variant=\"outlined\"\n                onClick={() => history.push('/programes')}\n              >Accés al mapa</Button>\n            </Paper>\n          </section>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default Presentacio;","import React from 'react';\nimport { TileLayer } from 'react-leaflet';\n\nconst LAYERS = {\n  // Original OpenStreetMap\n  osm: {\n    attribution: '&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors',\n    url: 'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',\n  },\n  // Mapbox.com\n  // ATENCIÓ: Max. 50.000 visualitzacions / mes\n  // Veure https://mapbox.com\n  // Provar amb id: `mapbox.satellite`, `mapbox.streets`...\n  mapbox: {\n    attribution: 'Dades del mapa © contribuïdors de <a href=\"https://www.openstreetmap.org/\">OpenStreetMap</a>, <a href=\"https://creativecommons.org/licenses/by-sa/2.0/\">CC-BY-SA</a>, Imatges © <a href=\"https://www.mapbox.com/\">Mapbox</a>',\n    url: 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}',\n    id: 'mapbox.streets',\n    accessToken: process.env.REACT_APP_MAPBOX_TOKEN || '',\n  },\n  // Wikimedia\n  wikimedia: {\n    attribution: '<a href=\"https://wikimediafoundation.org/wiki/Maps_Terms_of_Use\">Wikimedia</a>',\n    url: 'https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png',\n    minZoom: 1,\n    maxZoom: 19,\n  }\n};\n\nconst BUILT_LAYERS = {};\n\nfunction getTileLayer({ type = 'wikimedia' }) {\n  if (!BUILT_LAYERS[type])\n    BUILT_LAYERS[type] = <TileLayer {...LAYERS[type]} />\n  return BUILT_LAYERS[type];\n}\n\nexport default getTileLayer;\n","// Workaround to erors in `react-leaflet-markercluster`\n// From: https://github.com/YUzhva/react-leaflet-markercluster/issues/71#issuecomment-466393028\n\nimport { MapLayer, withLeaflet } from 'react-leaflet';\nimport L from 'leaflet';\nrequire('leaflet.markercluster');\n// Moved to `index.js`\n// import 'leaflet.markercluster/dist/MarkerCluster.css';\n// import 'leaflet.markercluster/dist/MarkerCluster.Default.css';\n\nclass MarkerClusterGroup extends MapLayer {\n\n  createLeafletElement(props) {\n    const { clusterProps = {} } = props;\n    const el = new L.markerClusterGroup({ ...props, ...clusterProps });\n    this.contextValue = {\n      ...props.leaflet,\n      layerContainer: el\n    };\n    return el;\n  }\n}\n\nexport default withLeaflet(MarkerClusterGroup);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport { Map, Polygon, Marker, Popup, LayersControl, LayerGroup } from 'react-leaflet';\nimport TileLayer from '../utils/TileLayer';\nimport MarkerClusterGroup from '../utils/MarkerClusterGroup';\n// Moved to `index.js`:\n// import 'react-leaflet-fullscreen/dist/styles.css';\nimport FullscreenControl from 'react-leaflet-fullscreen';\nimport Utils from '../utils/Utils';\n\n// See ../utils/TileLayer for all available options\nconst TILE_LAYER = process.env.REACT_APP_TILE_LAYER || 'wikimedia';\nconst PRESERVE_MAP_BOUNDS = (process.env.REACT_APP_PRESERVE_MAP_BOUNDS || 'true') === 'true';\n\n// Enlarge map bounds to make space for popups\nconst MAP_BOUNDS = [[40.50, 0.15], [42.90, 3.34]];\nconst MAX_BOUNDS = [[39.50, -0.85], [43.90, 4.34]];\n\n// Options for MarkerCluster\n// See: https://github.com/Leaflet/Leaflet.markercluster\nconst MARKERCLUSTER_PROPS = {\n  showCoverageOnHover: false, // Default is `true`\n  maxClusterRadius: 30, // Default is 80\n};\n\nexport default function MainMap({ points = [], polygons = [], estudis = [], programa = null, poli = null, zoom = 8, maxZoom = 13, updateMap }) {\n\n  // Optional overlays\n  const OVERLAYS = [\n    {\n      name: 'Mostra la participació per zones',\n      flag: 'showDensity',\n      default: false,\n    },\n    {\n      name: 'Mostra els centres',\n      flag: 'showCentres',\n      default: true,\n    },\n  ];\n\n  // Save overlay preferences to browser's local storage\n  const OVERLAY_SETTINGS_STORAGE = window.localStorage;\n  const getBool = key => OVERLAY_SETTINGS_STORAGE.getItem(key) === 'true';\n  const getInt = key => Number(OVERLAY_SETTINGS_STORAGE.getItem(key));\n  const setVal = (key, val) => OVERLAY_SETTINGS_STORAGE.setItem(key, val);\n\n  // Save the current map bounds in session storage, thus allowing to navigate between pages preserving map layout.\n  const MAP_BOUNDS_STORAGE = window.sessionStorage;\n  const saveBounds = (bounds) => MAP_BOUNDS_STORAGE.setItem('mapBounds', bounds.toBBoxString());\n  const getSavedBounds = () => {\n    const str = MAP_BOUNDS_STORAGE.getItem('mapBounds');\n    if (!str)\n      return null;\n    const values = str.split(',');\n    if (values.length !== 4)\n      return null;\n    return [[\n      Number(values[1]), // Lat SW\n      Number(values[0]), // Lng SW\n    ], [\n      Number(values[3]), // Lat NE\n      Number(values[2]), // Lng NE\n    ]];\n  };\n\n  // Don't preserve map bounds in `single polygon` mode\n  const preserveBounds = PRESERVE_MAP_BOUNDS && poli === null;\n  const currentlySavedBounds = preserveBounds && getSavedBounds();\n\n  // Handle zoom changes\n  const boundsChanged = ev => {\n    if (preserveBounds && ev.target && ev.target.getBounds)\n      saveBounds(ev.target.getBounds());\n  }\n\n  // Line width and opacity of polygons\n  const lineWidth = 2;\n  const minOpacity = 0;\n\n  // Force `updateMap` when changing some layout settings\n  const onBaseLayerChange = (ev) => {\n    const layerIndex = polygons.findIndex(p => p.name === ev.name);\n    if (layerIndex >= 0) {\n      setVal('currentLayer', layerIndex);\n      if (getBool(OVERLAYS[0].flag))\n        updateMap({}, false);\n    }\n  }\n\n  // Force `updateMap` when changing some overlay settings\n  const overlayChange = (type) => (ev) => {\n    const ov = OVERLAYS.findIndex(ov => ov.name === ev.name);\n    if (ov >= 0) {\n      const overlayVisible = (type === 'add');\n      OVERLAY_SETTINGS_STORAGE.setItem(OVERLAYS[ov].flag, overlayVisible);\n      if (ov === 0 && overlayVisible)\n        updateMap({}, false);\n    }\n  }\n\n  // Current layer defaults to \"SEZ\" (índex 1)\n  const currentLayer = getInt('currentLayer');\n  setVal('currentLayer', currentLayer);\n\n  // Set default or stored value in each overlay\n  OVERLAYS.forEach(ov => {\n    const stored = OVERLAY_SETTINGS_STORAGE.getItem(ov.flag);\n    setVal(ov.flag, stored === null ? ov.default : stored);\n  });\n\n  const popupCentre = (centre) => (\n    <Popup>\n      <h4><Link to={`/centre/${centre.id}`}>{centre.nom}</Link></h4>\n      <p>{centre.adreca}<br />\n        <a href={centre.web} target=\"_blank\" rel=\"noopener noreferrer\">{centre.web}</a></p>\n      <p>{`${centre.estudis.map(e => estudis.get(e)).join(', ')}.`}</p>\n    </Popup>\n  );\n\n  const popupZona = (zona) => {\n    const centresPart = zona.centresPart.size;\n    const estudisPart = Utils.sumAll(zona.estudisPart);\n    const estudisBase = Utils.sumAll(zona.estudisBase);\n    const perCent = (estudisBase > 0 ? (estudisPart / estudisBase) * 100 : 0).toFixed(1);\n    return <Popup>\n      <h4><Link to={`/zona/${zona.key}`}>{zona.nom}</Link></h4>\n      {(centresPart &&\n        <p>\n          <span>{`Centres participants ${programa ? 'al programa seleccionat' : 'als programes seleccionats'}: ${centresPart}`}</span><br />\n          <span>{`Índex de participació: ${perCent}%`}</span>\n        </p>) ||\n        <p>No hi ha cap centre que participi als programes seleccionats.</p>\n      }\n    </Popup>\n  };\n\n  return (\n    <Map\n      className=\"mapa markercluster-map\"\n      {...{\n        maxZoom,\n        minZoom: zoom,\n        bounds: (poli && poli.bounds) || currentlySavedBounds || MAP_BOUNDS,\n        maxBounds: MAX_BOUNDS,\n        onBaseLayerChange,\n        onOverlayAdd: overlayChange('add'),\n        onOverlayRemove: overlayChange('remove'),\n        onZoomEnd: boundsChanged,\n        onMoveEnd: boundsChanged,\n      }}\n    >\n      <TileLayer type={TILE_LAYER} />\n      <LayersControl position=\"topright\">\n        {polygons.map((p, i) => (\n          <LayersControl.BaseLayer name={p.name} key={i} checked={poli !== null ? i === (poli.tipus === 'SEZ' ? 1 : 0) : i === currentLayer}>\n            <LayerGroup>\n              {p.shapes.filter(sh => poli === null || poli === sh).map((sh, n) => (\n                <Polygon key={n} positions={sh.poligons} weight={lineWidth} fillOpacity={minOpacity}>\n                  {popupZona(sh)}\n                </Polygon>))}\n            </LayerGroup>\n          </LayersControl.BaseLayer>\n        ))}\n        <LayersControl.Overlay name={OVERLAYS[0].name} checked={poli === null && getBool(OVERLAYS[0].flag)}>\n          <LayerGroup>\n            {polygons[currentLayer].shapes.filter(sh => poli === null || poli === sh).map((sh, n) => (\n              <Polygon key={n} positions={sh.poligons} weight={0} fillOpacity={sh.density}>\n                {popupZona(sh)}\n              </Polygon>))}\n          </LayerGroup>\n        </LayersControl.Overlay>\n        <LayersControl.Overlay name={OVERLAYS[1].name} checked={poli !== null || getBool(OVERLAYS[1].flag)}>\n          <MarkerClusterGroup clusterProps={MARKERCLUSTER_PROPS}>\n            {points.map(pt => (\n              <Marker key={pt.id} position={[pt.lat, pt.lng]}>\n                {popupCentre(pt)}\n              </Marker>\n            ))}\n          </MarkerClusterGroup>\n        </LayersControl.Overlay>\n      </LayersControl>\n      <FullscreenControl\n        position=\"topleft\"\n        title=\"Mostra el mapa a pantalla completa\"\n        titleCancel=\"Surt de la pantalla completa\"\n      />\n    </Map>\n  )\n}\n","import React from 'react';\nimport { Map, Marker } from 'react-leaflet';\nimport TileLayer from '../utils/TileLayer';\n\n// See ../utils/TileLayer for all available options\nconst TILE_LAYER = process.env.REACT_APP_TILE_LAYER || 'wikimedia';\nconst MAP_BOUNDS = [[40.50, 0.15], [42.90, 3.34]];\n\nexport default function MapaCentre({ point, center = [41.7, 1.8], zoom = 8, maxZoom = 19 }) {\n\n  return (\n    <Map\n      className=\"mapa-centre\"\n      {...{ center, zoom, maxZoom, minZoom: 8, maxBounds: MAP_BOUNDS }}\n    >\n      <TileLayer type={TILE_LAYER} />\n      <Marker key={point.id} position={[point.lat, point.lng]} />\n    </Map>\n  )\n}","import React from 'react';\nimport Paper from '@material-ui/core/Paper';\nimport MainMap from './MainMap';\nimport MapaCentre from './MapaCentre';\nimport Stepper from '@material-ui/core/Stepper';\nimport Step from '@material-ui/core/Step';\nimport StepButton from '@material-ui/core/StepButton';\nimport Utils from '../utils/Utils';\n\nfunction MapSection({ data: { programes, centres, poligons, estudis, cursosDisp }, programa, centre, zona, cursos, currentPrograms, polygons, mapChanged, updateMap }) {\n\n  const singleCentre = centre ? centres.get(centre) : null;\n  const poli = zona ? poligons.get(zona) : null;\n  const w = window.innerWidth;\n  const zoom = w < 600 ? 7 : w < 820 ? 8 : w < 1300 ? 7 : 8;\n\n  const addSchoolsOfProgram = (progId, dest) => {\n    const prog = programes.get(progId);\n    if (prog)\n      Object.keys(prog.centres).forEach(curs => {\n        if (!cursos || cursos.includes(curs))\n          prog.centres[curs].forEach(centre => {\n            if ((!poli || poli.centresInn.has(centre)) && !dest.find(c => c.id === centre.id))\n              dest.push(centre)\n          });\n      });\n    return dest;\n  };\n\n  const points = [];\n  if (!mapChanged) {\n    if (singleCentre) {\n      points.push(singleCentre);\n    }\n    else if (programa)\n      addSchoolsOfProgram(programa, points);\n    else\n      currentPrograms.forEach(progId => addSchoolsOfProgram(progId, points));\n  }\n\n  const handleSelectCurs = curs => ev => {\n    const result = [];\n    cursosDisp.forEach(c => {\n      if ((curs === c && !cursos.includes(c)) || (curs !== c && cursos.includes(c)))\n        result.push(c);\n    });\n    updateMap({ cursos: result }, true, true);\n\n  }\n\n  return (\n    <section className=\"seccio smapa\">\n      <Paper className={singleCentre ? 'paper' : 'paper no-padding-top'}>\n        {(singleCentre &&\n          <MapaCentre\n            {...{\n              point: singleCentre,\n              center: [singleCentre.lat, singleCentre.lng],\n              zoom: 15,\n              maxZoom: 19,\n            }}\n          />) ||\n          <>\n            <Stepper\n              className=\"cursos\"\n              nonLinear\n              alternativeLabel\n              activeStep={null}\n            >\n              {cursosDisp.map((c, k) => (\n                <Step key={c}>\n                  <StepButton\n                    onClick={handleSelectCurs(c)}\n                    completed={cursos.includes(c)}\n                  >{Utils.cursCurt(c)}</StepButton>\n                </Step>\n              ))}\n            </Stepper>\n            <MainMap\n              {...{\n                points,\n                polygons,\n                programa,\n                poli,\n                zoom,\n                maxZoom: 19,\n                estudis,\n                updateMap\n              }}\n            />\n          </>\n        }\n      </Paper>\n    </section>\n  );\n}\n\nexport default MapSection;\n","import React from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControl from '@material-ui/core/FormControl';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport Select from '@material-ui/core/Select';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Typography from '@material-ui/core/Typography';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\n\nfunction SelectProgramsDlg({ dlgOpen, setDlgOpen, data: { programes, ambitsCurr, ambitsInn, nivells }, updateMap }) {\n\n  const [ambitInn, setAmbitInn] = React.useState('');\n  const [ambitCurr, setAmbitCurr] = React.useState('');\n  const [nivellsChk, setNivellsChk] = React.useState(Array.from(nivells).reduce((v, [n]) => { v[n] = true; return v; }, {}));\n\n  // Better to user a react reducer?\n  const [currentPrograms, setCurrentPrograms] = React.useState(new Set());\n\n  const updateCurrentPrograms = () => {\n    const progs = new Set();\n    programes.forEach((prog, id) => {\n      if (\n        (ambitInn === '' || prog.ambInn.includes(ambitInn)) &&\n        (ambitCurr === '' || prog.ambCurr.includes(ambitCurr)) &&\n        Object.keys(nivellsChk).find(nivell => nivellsChk[nivell] && nivells.get(nivell).find(tag => prog.tipus.includes(tag)))\n      )\n        progs.add(id);\n    });\n    setCurrentPrograms(progs);\n    // TODO: Comptar centres!\n  };\n\n  React.useMemo(updateCurrentPrograms, [ambitInn, ambitCurr, nivellsChk]);\n\n  const listSelection = handle => ev => {\n    handle(ev.target.value);\n  };\n\n  const handleCheckNivell = n => ev => {\n    setNivellsChk({ ...nivellsChk, [n]: ev.target.checked });\n  };\n\n  const closeDialog = ok => ev => {\n    if (ok)\n      updateMap({ currentPrograms }, true, true);\n    setDlgOpen(false);\n  };\n\n  return (\n    <Dialog\n      open={dlgOpen}\n      onEnter={updateCurrentPrograms}\n      aria-labelledby=\"dialog-title\"\n      classes={{ paper: 'stretch-dlg' }}\n    >\n      <DialogTitle id=\"dialog-title\">Tipus de programes</DialogTitle>\n      <DialogContent className=\"dialog-content\">\n        <div className=\"nivells\">\n          {Array.from(nivells).map(([nivell]) => (\n            <FormControlLabel\n              key={nivell}\n              className=\"select-nivell\"\n              control={\n                < Checkbox\n                  onChange={handleCheckNivell(nivell)}\n                  value={nivell}\n                  checked={nivellsChk[nivell]}\n                />}\n              label={nivell}\n            />\n          ))}\n        </div>\n        <FormControl className=\"select-list\">\n          <InputLabel htmlFor=\"select-ambit-curr\">Àmbit curricular</InputLabel>\n          <Select\n            value={ambitCurr}\n            onChange={listSelection(setAmbitCurr)}\n            inputProps={{\n              name: 'ambitCurr',\n              id: 'select-ambit-curr'\n            }}\n          >\n            <MenuItem value=\"\"><em>Tots els àmbits</em></MenuItem>\n            {Array.from(ambitsCurr.keys()).sort().map(key => (\n              <MenuItem key={key} value={key}>{ambitsCurr.get(key)}</MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n\n        <FormControl className=\"select-list\">\n          <InputLabel htmlFor=\"select-ambit-inn\">Àmbit d'innovació</InputLabel>\n          <Select\n            value={ambitInn}\n            onChange={listSelection(setAmbitInn)}\n            inputProps={{\n              name: 'ambitInn',\n              id: 'select-ambit-inn'\n            }}\n          >\n            <MenuItem value=\"\"><em>Tots els àmbits</em></MenuItem>\n            {Array.from(ambitsInn.keys()).sort().map(key => (\n              <MenuItem key={key} value={key}>{ambitsInn.get(key)}</MenuItem>\n            ))}\n          </Select>\n        </FormControl>\n        <Typography className=\"info\">\n          {currentPrograms.size} {currentPrograms.size === 1 ? 'programa seleccionat' : 'programes seleccionats'}\n        </Typography>\n      </DialogContent>\n      <DialogActions>\n        <Button onClick={closeDialog(true)} color=\"primary\" >Aplica la selecció</Button>\n        <Button onClick={closeDialog(false)} color=\"primary\">Cancel·la</Button>\n      </DialogActions>\n\n    </Dialog>\n  );\n\n}\n\nexport default SelectProgramsDlg;\n","import React from 'react';\nimport AppContext from '../AppContext';\nimport MapSection from './MapSection';\nimport Paper from '@material-ui/core/Paper';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Switch from '@material-ui/core/Switch';\nimport Avatar from '@material-ui/core/Avatar';\nimport Button from '@material-ui/core/Button';\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\nimport SelectProgramsDlg from './SelectProgramsDlg';\nimport Checkbox from '@material-ui/core/Checkbox';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport Utils from '../utils/Utils';\n\nfunction Programes({ history }) {\n\n  const [dlgOpen, setDlgOpen] = React.useState(false);\n\n  return (\n    <AppContext.Consumer>\n      {({ data, data: { programes, ambitsCurr, ambitsInn, nivells }, cursos, currentPrograms, polygons, mapChanged, updateMap }) => {\n        const allSelected = currentPrograms.size === programes.size;\n\n        // Click on program name\n        const handleProgClick = id => () => history.push(`/programa/${id}`);\n\n        // Select / Unselect program\n        const handleProgSelect = id => ev => {\n          currentPrograms[currentPrograms.has(id) ? 'delete' : 'add'](id);\n          updateMap({ currentPrograms, ambitCurr: '', ambitInn: '', nivell: '' }, true, true);\n        };\n\n        // Select / unselect all programs\n        const handleSelectAll = ev => {\n          if (ev.target.checked)\n            programes.forEach((_p, id) => currentPrograms.add(id));\n          else\n            currentPrograms.clear();\n          updateMap({ currentPrograms }, true, true);\n        };\n\n        const gomap = () => document.querySelector('.smapa').scrollIntoView();\n\n        return (\n          <>\n            <SelectProgramsDlg {...{ dlgOpen, setDlgOpen, data: { programes, ambitsCurr, ambitsInn, nivells }, updateMap }} />\n            <Button className=\"gomap\" aria-label=\"Mapa\" onClick={gomap} >\n              <ArrowDownward className=\"left-icon\" />\n              Mapa\n            </Button>\n            <section className=\"seccio programes\">\n              <Paper className=\"paper\">\n                <div className=\"select-progs\">\n                  <Button variant=\"outlined\" color=\"primary\" onClick={() => setDlgOpen(true)}>Selecciona per tipus</Button>\n                  <FormControlLabel\n                    className=\"select-all\"\n                    labelPlacement=\"start\"\n                    control={\n                      <Checkbox\n                        onChange={handleSelectAll}\n                        checked={allSelected}\n                      />}\n                    label=\"Selecciona'ls tots\"\n                  />\n                </div>\n                <List className=\"prog-list\">\n                  {Array.from(programes.values()).map(({ id, nom, simbol, centres }, n) => (\n                    <ListItem key={n} button className=\"list-button\">\n                      <ListItemAvatar>\n                        <Avatar src={`logos/mini/${simbol}`} alt={nom} />\n                      </ListItemAvatar>\n                      <ListItemText\n                        primary={nom}\n                        secondary={'Centres ' + Object.keys(centres).sort().map(k => `${Utils.cursCurt(k)}: ${centres[k].length}`).join(', ')}\n                        onClick={handleProgClick(id)} />\n                      <ListItemSecondaryAction>\n                        <Switch onChange={handleProgSelect(id)} checked={currentPrograms.has(id)} />\n                      </ListItemSecondaryAction>\n                    </ListItem>\n                  ))}\n                </List>\n              </Paper>\n            </section>\n            <MapSection {...{ data, programa: null, centre: null, zona: null, cursos, currentPrograms, polygons, mapChanged, updateMap }} />\n          </>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default Programes;\n","import React from 'react';\nimport Button from '@material-ui/core/Button';\nimport Typography from '@material-ui/core/Typography';\nimport ReportProblem from '@material-ui/icons/ReportProblem';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport Refresh from '@material-ui/icons/Refresh';\n\nfunction Error({ error, history, refetch }) {\n  return (\n    <div className=\"err-msg\">\n      <Typography >\n        <ReportProblem className=\"err-icon\" color=\"secondary\" />\n        {error || 'Error desconegut!'}\n      </Typography>\n      {\n        (refetch &&\n          <Button\n            className='action-btn'\n            aria-label=\"Reintenta\"\n            onClick={refetch}\n            variant='outlined' >\n            <Refresh className=\"left-icon\" />\n            Reintenta\n        </Button>) ||\n        (history && history.length > 1 &&\n          <Button\n            className=\"action-btn\"\n            aria-label=\"Torna\"\n            variant=\"outlined\"\n            onClick={() => history.goBack()} >\n            <ArrowBack className=\"left-icon\" />\n            Torna\n        </Button>)\n      }\n    </div>\n  );\n}\n\nexport default Error;","import React from 'react';\nimport ReactMarkdown from 'react-markdown/with-html';\nimport AppContext from '../AppContext';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport Typography from '@material-ui/core/Typography';\nimport Divider from '@material-ui/core/Divider';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport CloudDownloadIcon from '@material-ui/icons/CloudDownload';\nimport InfoIcon from '@material-ui/icons/Info';\nimport MailIcon from '@material-ui/icons/Mail';\nimport Error from './Error';\nimport MapSection from './MapSection';\n\nconst MD_OPTIONS = {\n  escapeHtml: false,\n};\n\nfunction createExpansionPanel(className, title, content) {\n  return (\n    <ExpansionPanel className={className}>\n      <ExpansionPanelSummary className=\"small-padding-h\" expandIcon={<ExpandMoreIcon />}>\n        <h4 style={{ marginTop: 0 }}>{title}</h4>\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails className=\"small-padding-h\">\n        {content}\n      </ExpansionPanelDetails>\n    </ExpansionPanel>\n  );\n}\n\nfunction createMDExpansionPanel(className, title, mdContent) {\n  return createExpansionPanel(className, title,\n    <div>\n      <ReactMarkdown {...MD_OPTIONS}>\n        {mdContent}\n      </ReactMarkdown>\n    </div>\n  );\n}\n\n\nfunction FitxaPrograma({ history, match: { params: { id } } }) {\n\n  return (\n    <AppContext.Consumer>\n      {({ data, cursos, currentPrograms, polygons, mapChanged, updateMap }) => {\n        const { programes, estudis, ambitsCurr, ambitsInn } = data;\n\n        // Find the specified program\n        const programa = programes.get(id);\n        if (!programa)\n          return <Error {...{ error: `No hi ha cap programa amb el codi: ${id}`, history }} />\n\n        // Els camps id, nomCurt i color no s'utilitzen\n        const { nom, descripcio, link, ambCurr, ambInn, fitxa, video, objectius, requisits, compromisos, contacte, normativa, arees, simbol, tipus, centres } = programa;\n\n        const torna = () => history.goBack();\n\n        return (\n          <>\n            <Button className=\"torna\" aria-label=\"Torna\" onClick={torna} >\n              <ArrowBack className=\"left-icon\" />\n              Torna\n            </Button>\n            <section className=\"seccio programa\">\n              <Paper className=\"paper\">\n                <div className=\"logo-nom-seccio\">\n                  {simbol && <img className=\"seccio-logo\" src={`logos/${simbol}`} alt={nom} />}\n                  <div className=\"nom-seccio\">\n                    <Typography variant=\"h4\">{nom}</Typography>\n                  </div>\n                </div>\n                <div id=\"descripcio\">\n                  <ReactMarkdown {...MD_OPTIONS}>\n                    {descripcio}\n                  </ReactMarkdown>\n                </div>\n                <div id=\"info\">\n                  {fitxa &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={fitxa}\n                      title=\"Descarrega la fitxa del projecte\" >\n                      <CloudDownloadIcon className=\"left-icon\" />\n                      Fitxa\n                    </Button>\n                  }\n                  {link &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={link}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={link}>\n                      <InfoIcon className=\"left-icon\" />\n                      Web\n                    </Button>\n                  }\n                  {contacte &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={`mailto:${contacte}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={contacte}>\n                      <MailIcon className=\"left-icon\" />\n                      Contacte\n                    </Button>\n                  }\n                  {video &&\n                    <div className=\"prog-video\">\n                      <br />\n                      <ReactMarkdown {...MD_OPTIONS}>\n                        {video}\n                      </ReactMarkdown>\n                    </div>\n                  }\n                </div>\n                {objectius && createMDExpansionPanel('prog-objectius', 'Objectius', objectius)}\n                {requisits && createMDExpansionPanel('prog-requisits', 'Requisits', requisits)}\n                {compromisos && createMDExpansionPanel('prog-compromisos', 'Compromisos', compromisos)}\n                {normativa && createMDExpansionPanel('prog-normativa', 'Normativa', normativa)}\n                {createExpansionPanel('prog-ambits', 'Àmbits, àrees i nivells', (\n                  <div>\n                    {ambInn.length > 0 &&\n                      <div className=\"prog_ambits\">\n                        <h4>Àmbits d'innovació:</h4>\n                        <ul>\n                          {ambInn.map(a => <li key={a}>{ambitsInn.get(a)}</li>)}\n                        </ul>\n                      </div>\n                    }\n                    {ambCurr.length > 0 &&\n                      <div className=\"prog_ambits\">\n                        <h4>Àmbits curriculars:</h4>\n                        <ul>\n                          {ambCurr.map(a => <li key={a}>{ambitsCurr.get(a)}</li>)}\n                        </ul>\n                      </div>\n                    }\n                    {arees.length > 0 &&\n                      <div className=\"prog_ambits\">\n                        <h4>Àrees curriculars:</h4>\n                        <ul>\n                          {arees.map((a, n) => <li key={n}>{a}</li>)}\n                        </ul>\n                      </div>\n                    }\n                    {tipus.length > 0 &&\n                      <div className=\"prog_ambits\">\n                        <h4>Nivells educatius:</h4>\n                        <ul>\n                          {tipus.map((t, n) => <li key={n}>{estudis.get(t)}</li>)}\n                        </ul>\n                      </div>\n                    }\n                  </div>\n                ))}\n                <br />\n                {Object.keys(centres).sort().map((curs, n) => {\n                  let hasNc = false;\n                  return (\n                    <ExpansionPanel key={n}>\n                      <ExpansionPanelSummary className=\"small-padding-left\" expandIcon={<ExpandMoreIcon />}>\n                        <Typography className=\"wider\">{`CURS ${curs}`}</Typography>\n                        <Typography>{`${centres[curs].length} ${centres[curs].length === 1 ? 'centre' : 'centres'}`}</Typography>\n                      </ExpansionPanelSummary>\n                      <ExpansionPanelDetails className=\"small-padding-h flow-v\">\n                        <List className=\"wider\">\n                          {centres[curs].sort((a, b) => a.nom.localeCompare(b.nom)).map(({ id: codi, nom, municipi, titols, notCert }, c) => {\n                            const nc = notCert.has(`${id}|${curs}`);\n                            hasNc = hasNc || nc;\n                            return (\n                              <ListItem key={c} button component=\"a\" href={`#/centre/${codi}`} className=\"small-padding-h\">\n                                <ListItemText\n                                  primary={`${nom} (${municipi})${nc ? ' *' : ''}`}\n                                  secondary={(titols && titols[id] ? titols[id] : null)}\n                                />\n                              </ListItem>\n                            )\n                          }\n                          )}\n                        </List>\n                        {hasNc &&\n                          <>\n                            <Divider />\n                            <Typography className=\"padding-one\">*: Pendent de certificació</Typography>\n                          </>\n                        }\n                      </ExpansionPanelDetails>\n                    </ExpansionPanel>\n                  );\n                })}\n              </Paper>\n            </section>\n            <MapSection {...{ data, programa: id, centre: null, zona: null, cursos, currentPrograms, polygons, mapChanged, updateMap }} />\n          </>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default FitxaPrograma;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport AppContext from '../AppContext';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport Avatar from '@material-ui/core/Avatar';\nimport Typography from '@material-ui/core/Typography';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\n//import WebIcon from '@material-ui/icons/Info';\nimport WebIcon from 'mdi-material-ui/Web';\nimport MailIcon from '@material-ui/icons/Mail';\nimport TwitterIcon from 'mdi-material-ui/Twitter';\nimport Utils from '../utils/Utils';\nimport Error from './Error';\nimport MapSection from './MapSection';\n\n// Possible values are `perCurs` and `agregat`\nconst LOGO_BASE = process.env.REACT_APP_LOGO_BASE || 'https://clic.xtec.cat/pub/logos/';\n\nfunction FitxaCentre({ history, match: { params: { codi } } }) {\n  return (\n    <AppContext.Consumer>\n      {({ data, currentPrograms, polygons, mapChanged, updateMap }) => {\n        // Find the specified program\n        const centre = data.centres.get(codi);\n        if (!centre)\n          return <Error {...{ error: `No hi ha cap programa amb el codi: ${codi}`, history }} />\n\n        const { nom, municipi, comarca, estudis, adreca, web, logo, nodes, web_propi, tel, mail, twitter, sstt, se, public: pb, programes, titols, notCert } = centre;\n        const url = nodes || web || web_propi;\n        const tancaFitxa = () => history.goBack();\n        const servei_territorial = data.poligons.get(sstt);\n        const servei_educatiu = data.poligons.get(se);\n        let hasNc = false;\n\n        return (\n          <>\n            <Button className=\"torna\" aria-label=\"Torna\" onClick={tancaFitxa} >\n              <ArrowBack className=\"left-icon\" />\n              Torna\n            </Button>\n            <section className=\"seccio centre\">\n              <Paper className=\"paper\">\n                <div className=\"logo-nom-seccio\">\n                  {logo && <img className=\"seccio-logo\" src={`${/^http.?:\\/\\//.test(logo) ? '' : LOGO_BASE}${logo}`} alt={nom} />}\n                  <div className=\"nom-seccio\">\n                    <Typography variant=\"h4\">{nom}</Typography>\n                    <div id=\"tipus\">Centre {pb ? 'públic' : 'privat concertat'}</div>\n                  </div>\n                </div>\n                <div className=\"adreca\">\n                  <p>\n                    {adreca}<br />\n                    {`${municipi} (${comarca})`}<br />\n                    {tel && <>{`Tel. ${tel}`}</>}\n                  </p>\n                </div>\n                <div id=\"info\">\n                  {url &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={url}\n                    >\n                      <WebIcon className=\"left-icon\" />\n                      Web\n                    </Button>\n                  }\n                  {twitter &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={`https://twitter.com/${twitter}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={twitter}\n                    >\n                      <TwitterIcon className=\"left-icon\" />\n                      Twitter\n                    </Button>\n                  }\n                  {mail &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={`mailto:${mail}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={mail}\n                    >\n                      <MailIcon className=\"left-icon\" />\n                      Contacte\n                    </Button>\n                  }\n                </div>\n                <div id=\"estudis\">\n                  <h4>Estudis</h4>\n                  <ul>\n                    {estudis.map((e, n) => <li key={n}>{data.estudis.get(e)}</li>)}\n                  </ul>\n                </div>\n                <div id=\"zones\">\n                  <h4>Zones:</h4>\n                  <ul>\n                    {servei_territorial && <li><Link to={`/zona/${sstt}`}>{servei_territorial.nom}</Link></li>}\n                    {servei_educatiu && <li><Link to={`/zona/${se}`}>{servei_educatiu.nom}</Link></li>}\n                  </ul>\n                </div>\n                <h4>Programes on participa:</h4>\n                <br />\n                <List >\n                  {Utils.plainArray(programes).map(({ id, nom, simbol, cursos }, n) => (\n                    <ListItem key={n} button className=\"no-padding-h-small\" component=\"a\" href={`#/programa/${id}`}>\n                      <ListItemAvatar>\n                        <Avatar src={`logos/mini/${simbol}`} alt={nom} />\n                      </ListItemAvatar>\n                      <ListItemText\n                        primary={nom}\n                        secondary={(titols && titols[id]) || `${cursos.length === 1 ? 'Curs' : 'Cursos'} ${cursos.sort().map(c => {\n                          const nc = notCert.has(`${id}|${c}`);\n                          hasNc = hasNc || nc;\n                          return `${c}${nc ? ' *' : ''}`;\n                        }).join(', ')}`}\n                      />\n                    </ListItem>\n                  ))}\n                </List>\n                {hasNc &&\n                  <>\n                    <br />\n                    <Typography>*: Pendent de certificació</Typography>\n                  </>\n                }\n              </Paper>\n            </section>\n            <MapSection {...{ data, programa: null, centre: codi, zona: null, currentPrograms, polygons, mapChanged, updateMap }} />\n          </>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default FitxaCentre;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport AppContext from '../AppContext';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport Avatar from '@material-ui/core/Avatar';\n//import WebIcon from '@material-ui/icons/Info';\nimport WebIcon from 'mdi-material-ui/Web';\nimport MailIcon from '@material-ui/icons/Mail';\nimport Error from './Error';\nimport MapSection from './MapSection';\nimport Typography from '@material-ui/core/Typography';\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\n\nfunction FitxaZona({ history, match: { params: { key } } }) {\n\n  return (\n    <AppContext.Consumer>\n      {({ data, cursos, currentPrograms, polygons, mapChanged, updateMap }) => {\n        // Find the specified program\n        const zona = data.poligons.get(key);\n        if (!zona)\n          return <Error {...{ error: `No hi ha cap zona amb el codi: ${key}`, history }} />\n\n        // Els camps id, nomCurt i color no s'utilitzen\n        const { tipus, nom, logo, cp, adreca, municipi, comarca, tel, fax, correu, web, centresInn, programes } = zona;\n        const programesArray = Array.from(programes).sort((a, b) => a.nom.localeCompare(b.nom));\n\n        const torna = () => history.goBack();\n\n        return (\n          <>\n            <Button className=\"torna\" aria-label=\"Torna\" onClick={torna} >\n              <ArrowBack className=\"left-icon\" />\n              Torna\n            </Button>\n            <section className=\"seccio zona\">\n              <Paper className=\"paper\">\n                <div className=\"logo-nom-seccio\">\n                  {logo && <img className={`seccio-logo ${tipus === 'ST' ? '' : 'se-logo'}`} src={logo} alt={nom} />}\n                  <div className=\"nom-seccio\">\n                    <Typography variant=\"h4\">{nom}</Typography>\n                  </div>\n                </div>\n                <div className=\"adreca\">\n                  <p>\n                    {adreca}<br />\n                    {`${cp} ${municipi} (${comarca})`}<br />\n                    {tel && <>{`Tel. ${tel}`}<br /></>}\n                    {fax && <>{`Fax. ${fax}`}<br /></>}\n                  </p>\n                </div>\n                <div id=\"info\">\n                  {web &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={web}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={web}\n                    >\n                      <WebIcon className=\"left-icon\" />\n                      Web\n                    </Button>\n                  }\n                  {correu &&\n                    <Button\n                      variant=\"contained\"\n                      className=\"info-btn\"\n                      href={`mailto:${correu}`}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      title={correu}\n                    >\n                      <MailIcon className=\"left-icon\" />\n                      Contacte\n                    </Button>\n                  }\n                </div>\n                <h4>Programes amb presència en aquest territori:</h4>\n                <br />\n                {programesArray.map((prog, n) => {\n                  const centres = prog.allCentres.filter(c => centresInn.has(c));\n                  const numCentres = centres.length;\n                  return (\n                    <ExpansionPanel key={n}>\n                      <ExpansionPanelSummary classes={{ root: 'small-padding-left', content: 'zona-prog' }} expandIcon={<ExpandMoreIcon />}>\n                        <Link className=\"zona-prog-logo\" to={`/programa/${prog.id}`}><Avatar src={`logos/mini/${prog.simbol}`} alt={prog.nom} /></Link>\n                        <Typography className=\"wider\">{prog.nom}</Typography>\n                        <Typography>{`${numCentres} centre${numCentres === 1 ? '' : 's'}`}</Typography>\n                      </ExpansionPanelSummary>\n                      <ExpansionPanelDetails className=\"small-padding-h\">\n                        <List>\n                          {centres.map(({ id, nom, municipi, titols, allPrograms }, n) => (\n                            <ListItem key={n} button component=\"a\" href={`#/centre/${id}`} className=\"small-padding-h\">\n                              <ListItemText\n                                primary={`${nom} (${municipi})`}\n                                secondary={(titols && titols[id] ? titols[id] : null)}\n                              />\n                            </ListItem>\n                          ))}\n                        </List>\n                      </ExpansionPanelDetails>\n                    </ExpansionPanel>\n                  )\n                })}\n              </Paper>\n            </section>\n            <MapSection {...{ data, programa: null, centre: null, zona: key, cursos, currentPrograms, polygons, mapChanged, updateMap }} />\n          </>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default FitxaZona;\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport Typography from '@material-ui/core/Typography';\n\n/**\n * Basic 'loading data...' page\n */\nfunction Loading() {\n  return (\n    <div className='err-msg'>\n      <Typography>S'estan carregant les dades...</Typography>\n      <CircularProgress className='progress' />\n    </div>\n  );\n}\n\nexport default Loading;\n","import React from 'react';\nimport Typography from '@material-ui/core/Typography';\nimport { title, version, repository, license } from '../../package.json';\n\nfunction Footer() {\n  return (\n    <footer>\n      <div className=\"footer-content\">\n        <a className=\"logo-gencat\" href=\"https://web.gencat.cat/\" title=\"Generalitat de Catalunya\" target=\"_top\">gencat.cat</a>\n        <Typography variant=\"body2\" className=\"copyright\">\n          <a href=\"https://innovacio.xtec.cat/\">{title} v{version}</a><br />\n          <a href=\"http://www.xtec.cat\">© 2019 Departament d'Educació de la Generalitat de Catalunya</a><br />\n          <a href={`https://spdx.org/licenses/${license}.html`}>Llicència Pública de la Unió Europea {license}</a><br />\n          <a href={repository.url}>{repository.url}</a><br />\n          <br />\n          <strong>Bústia de contacte</strong>: <a href=\"mailto:innovacio@xtec.cat\">innovacio@xtec.cat</a><br />\n          <br />\n          <a href=\"https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/\"><strong>Avís legal</strong></a>: D’acord amb l’article 17.1 de la Llei 19/2014, la ©Generalitat de Catalunya permet la reutilització dels continguts i de les dades sempre que se'n citi la font i la data d'actualització i que no es desnaturalitzi la informació (article 8 de la Llei 37/2007) i també que no es contradigui amb una llicència específica.\n        </Typography>\n      </div>\n    </footer>\n  );\n}\n\nexport default Footer;","import React from 'react';\nimport AppContext from '../AppContext';\nimport Paper from '@material-ui/core/Paper';\nimport Button from '@material-ui/core/Button';\nimport ArrowBack from '@material-ui/icons/ArrowBack';\nimport Avatar from '@material-ui/core/Avatar';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport ProgramIcon from '@material-ui/icons/Group';\nimport SchoolIcon from 'mdi-material-ui/MapMarker';\n\nconst DEFAULT_ITEMS_PER_PAGE = Number(process.env.REACT_APP_ITEMS_PER_PAGE || 25);\n\nfunction Cerca({ history, match: { params: { query } } }) {\n\n  const [page, setPage] = React.useState(0);\n  const [itemsPerPage, setItemsPerPage] = React.useState(DEFAULT_ITEMS_PER_PAGE);\n  const [queryResults, setQueryResults] = React.useState([]);\n  const [currentQuery, setCurrentQuery] = React.useState('');\n\n  return (\n    <AppContext.Consumer>\n      {({ fuseFuncs }) => {\n\n        if (query !== currentQuery) {\n          // Perform full text search using Fuse.js\n          // See `loadData` in App.js for details about how these functions are built\n          setCurrentQuery(query);\n          setQueryResults(fuseFuncs.reduce((qr, ff) => qr.concat(ff.search(query)), []));\n        }\n\n        const goToElement = (tipus, id) => ev => {\n          history.push(`/${tipus}/${id}`);\n        };\n\n        return (\n          <>\n            <Button\n              className=\"torna\"\n              aria-label=\"Torna\"\n              onClick={() => history.goBack()} >\n              <ArrowBack className=\"left-icon\" />\n              Torna\n            </Button>\n            <section className=\"seccio cerca\">\n              <Paper className=\"paper\">\n                <h2>Resultats de la cerca \"{currentQuery}\"</h2>\n                {(queryResults.length === 0 && <p>No s'ha trobat cap element coïncident amb el criteri de cerca!</p>) ||\n                  <div>\n                    <List component=\"ul\">\n                      {queryResults.slice(page * itemsPerPage, (page + 1) * itemsPerPage).map(({ item: { nom, id, tipus, simbol } }, n) => (\n                        <ListItem\n                          key={n}\n                          button\n                          onClick={goToElement(tipus, id)}\n                        >\n                          <ListItemIcon>\n                            {simbol ? <Avatar src={`logos/mini/${simbol}`} alt={nom} /> : tipus === 'programa' ? <ProgramIcon /> : <SchoolIcon />}\n                          </ListItemIcon>\n                          <ListItemText primary={nom} />\n                        </ListItem>\n                      ))}\n                    </List>\n                    <hr />\n                    <TablePagination\n                      classes={{ spacer: 'hidden', toolbar: 'no-padding' }}\n                      component=\"nav\"\n                      page={page}\n                      rowsPerPage={itemsPerPage}\n                      onChangeRowsPerPage={ev => setItemsPerPage(ev.target.value)}\n                      count={queryResults.length}\n                      onChangePage={(ev, p) => setPage(p)}\n                      labelDisplayedRows={({ from, to, count }) => `Resultats ${from} al ${to} de ${count}`}\n                      labelRowsPerPage=\"Resultats per pàgina:\"\n                    />\n                  </div>\n                }\n              </Paper>\n            </section>\n          </>\n        );\n      }}\n    </AppContext.Consumer>\n  );\n}\n\nexport default Cerca;","import React, { Component } from 'react';\nimport { HashRouter as Router, Route } from 'react-router-dom';\nimport CheckRouteChanges from './utils/CheckRouteChanges';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport MuiThemeProvider from '@material-ui/core/styles/MuiThemeProvider';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport color_error from '@material-ui/core/colors/red';\nimport Fuse from 'fuse.js';\n\nimport Utils from './utils/Utils';\nimport Header from './components/Header';\nimport Presentacio from './components/Presentacio';\nimport Programes from './components/Programes';\nimport FitxaPrograma from './components/FitxaPrograma';\nimport FitxaCentre from './components/FitxaCentre';\nimport FitxaZona from './components/FitxaZona';\nimport Error from './components/Error';\nimport Loading from './components/Loading';\nimport Footer from './components/Footer';\nimport Cerca from './components/Cerca';\nimport AppContext, { DEFAULT_STATE } from './AppContext';\n\n// Gencat dark gray\nconst color_primary = { 500: '#333' };\n\n// Gencat red\nconst color_secondary = { 500: '#c00000' };\n\n/**\n * Miscellanous values taken from environment variables\n * and from files: `.env`, `.env.development` and `.env.production`\n */\n//const API_ROOT = process.env.REACT_APP_API_ROOT || '../api';\nconst MAX_DENSITY = process.env.REACT_APP_MAX_DENSITY || 0.8;\nconst MIN_DENSITY = process.env.REACT_APP_MIN_DENSITY || 0.000001;\nconst MINMAX_DENSITY = process.env.REACT_APP_MINMAX_DENSITY || 0.4;\nconst DEBUG_GLOBAL_VAR = process.env.REACT_APP_DEBUG_GLOBAL_VAR || '';\n\n/**\n * Main Material-UI theme\n */\nconst theme = createMuiTheme({\n  palette: {\n    primary: { main: color_primary[500] },\n    secondary: { main: color_secondary[500] },\n    error: { main: color_error[500] },\n  },\n  typography: {\n    fontFamily: [\n      'Open Sans',\n      'Roboto',\n      '\"Helvetica Neue\"',\n      'Arial',\n      'sans-serif',\n    ].join(','),\n    useNextVariants: true,\n  },\n  overrides: {\n    \"MuiStepIcon\": {\n      completed: {\n        color: '#c00000 !important',\n      }\n    }\n  },\n});\n\n/**\n * Main React component\n */\nclass App extends Component {\n\n  static contextType = AppContext;\n\n  constructor() {\n    super();\n\n    // Current app sections\n    this.menuItems = [\n      {\n        id: 'presenta',\n        name: 'Presentació',\n        path: '/',\n      },\n      {\n        id: 'programes',\n        name: 'Programes',\n        path: '/programes',\n      },\n    ];\n\n    // Set the initial state\n    this.state = {\n      ...DEFAULT_STATE,\n      // Immutable attributes:\n      updateMap: this.updateMap,\n      // Functions used to perform full-text search with Fuse.js on 'centres' and 'programes', built after loading\n      fuseFuncs: [],\n      menuItems: this.menuItems,\n    };\n  }\n\n  setStateMod(values, callback = null) {\n    this.setState(values, () => {\n      if (DEBUG_GLOBAL_VAR)\n        window[DEBUG_GLOBAL_VAR] = this.state;\n      if (callback)\n        callback();\n    });\n  }\n\n\n  /**\n   * Load datasets from API or JSON files\n   */\n  loadData() {\n    this.setStateMod({ loading: true });\n    return Promise.all(\n      [\n        'data/programes.json', // `${API_ROOT}/programes/`\n        'data/instancies.json', // `${API_ROOT}/instancies/`\n        'data/centres.json',\n        'data/poligons.json',\n        'data/estudis.json',\n      ].map(uri => {\n        return fetch(uri, { method: 'GET', credentials: 'same-origin' })\n          .then(Utils.handleFetchErrors)\n          .then(response => response.json());\n      })\n    )\n      .then(([_programes, _instancies, _centres, _poligons, _estudis]) => {\n\n        // Sort data (step to be supressed with well ordered JSON sources!)\n        _centres = Utils.sortObjectArrayBy(_centres, ['sstt', 'municipi', 'nom']);\n        _programes = Utils.sortObjectArrayBy(_programes, 'nom');\n        _poligons = Utils.sortObjectArrayBy(_poligons, ['tipus', 'id', 'key']);\n\n        // Build an object with centre ids as keys, useful for optimizing searches\n        _centres.forEach(c => {\n          c.programes = {};\n          c.allPrograms = new Set();\n          c.notCert = new Set();\n        });\n\n        // Convert synthetic multi-point expressions into arrays of co-ordinates suitable for leaflet polygons\n        _poligons.forEach(p => {\n          p.poligons = p.poligons.map(pts => pts.split(',').map(pt => pt.split('|').map(vs => Number(vs))));\n          p.centresInn = new Set();\n          p.programes = new Set();\n          p.density = MIN_DENSITY;\n          p.estudisBase = {};\n          p.estudisPart = {};\n          p.centresPart = new Set();\n        });\n\n        // Prepare sets for auto-detected data\n        const currentPrograms = new Set();\n\n        // Guess missing fields in `programes`\n        // (to be supressed!)\n        _programes.forEach(p => {\n\n          // Set all programs initially selected\n          currentPrograms.add(p.id);\n\n          // Initialize `centres` and `allCentres` (to be filled later)\n          p.centres = {};\n          p.allCentres = new Set();\n\n          // Empty `tipus`? then try to guess them from title and description\n          if (p.tipus.length === 0) {\n            const str = `${p.nom} ${p.nomCurt} ${p.descripcio}`;\n            if (/(FP|fp|[pP]rofessio)/.test(str))\n              p.tipus = ['CFPM', 'CFPS'];\n            else if (/(infantil|primària|escola)/.test(str))\n              p.tipus = ['EINF2C', 'EPRI'];\n            else\n              p.tipus = ['EINF2C', 'EPRI', 'ESO'];\n          }\n        });\n\n        // Convert arrays to maps\n        const centres = new Map(_centres.map(c => [c.id, c]));\n        const programes = new Map(_programes.map(p => [p.id, p]));\n        const poligons = new Map(_poligons.map(p => [p.key, p]));\n\n        // Initialize arrays of `centres` for each program, and `programa` for each centre, by curs\n        _instancies.forEach(({ programa, centre, curs, titol, cert }) => {\n          const prog = programes.get(programa);\n          const cent = centres.get(centre);\n          if (prog && cent) {\n            (prog.centres[curs] = prog.centres[curs] || []).push(cent);\n            prog.allCentres.add(cent);\n            (cent.programes[curs] = cent.programes[curs] || []).push(prog);\n            cent.allPrograms.add(prog);\n            if (cent.sstt) {\n              const p = poligons.get(cent.sstt);\n              p.centresInn.add(cent);\n              p.programes.add(prog);\n            }\n            if (cent.se) {\n              const p = poligons.get(cent.se);\n              p.centresInn.add(cent);\n              p.programes.add(prog);\n            }\n            if (titol) {\n              if (!prog.titols)\n                prog.titols = {};\n              prog.titols[cent.id] = `${prog.titols[cent.id] ? `${prog.titols[cent.id]}, ` : ''}\"${titol}\" (${curs})`;\n              if (!cent.titols)\n                cent.titols = {};\n              cent.titols[prog.id] = `${cent.titols[prog.id] ? `${cent.titols[prog.id]}, ` : ''}\"${titol}\" (${curs})`;\n            }\n            if (!cert)\n              cent.notCert.add(`${programa}|${curs}`);\n          }\n          else\n            console.log(`WARNING: Instància amb programa o centre desconegut: ${programa} - ${centre} - ${curs}`);\n        });\n\n        // Summarize and order programs and centres\n        centres.forEach(c => {\n          c.allPrograms = Array.from(c.allPrograms).sort((a, b) => a.nom.localeCompare(b.nom));\n        });\n        programes.forEach(p => {\n          p.allCentres = Array.from(p.allCentres).sort((a, b) => a.nom.localeCompare(b.nom));\n        });\n\n\n        // Build the Fuse.js objects\n        // See: https://fusejs.io/\n        const fuseOptions = {\n          caseSensitive: false,\n          shouldSort: true,\n          tokenize: true,\n          matchAllTokens: true,\n          includeScore: true,\n          includeMatches: true,\n          threshold: 0.3,\n          location: 0,\n          distance: 4,\n          maxPatternLength: 32,\n          minMatchCharLength: 2,\n        };\n\n        const fuseFuncs = [\n          new Fuse(\n            _programes.map(({ id, nom, simbol, descripcio, titols, ambCurr, ambInn, arees, objectius, requisits, compromisos, contacte, normativa }) => ({\n              id,\n              nom,\n              simbol,\n              descripcio,\n              titols: titols ? Object.values(titols).join(', ') : '',\n              ambCurr: ambCurr.map(a => _estudis.ambitsCurr[a]).join(', '),\n              ambInn: ambInn.map(a => _estudis.ambitsInn[a]).join(', '),\n              arees: arees.join(', '),\n              objectius,\n              requisits,\n              compromisos,\n              contacte,\n              normativa,\n              tipus: 'programa',\n            })),\n            { ...fuseOptions, keys: ['id', 'nom', 'descripcio', 'titols', 'ambCurr', 'ambInn', 'arees', 'objectius', 'requisits', 'compromisos', 'contacte', 'normativa'] }),\n          new Fuse(\n            _centres.map(({ id, nom, municipi, comarca, titols }) => ({\n              id,\n              nom: `${nom} (${municipi})`,\n              comarca,\n              titols: titols ? Object.values(titols).join(', ') : '',\n              tipus: 'centre',\n            })),\n            { ...fuseOptions, keys: ['id', 'nom', 'comarca', 'titols'] }),\n        ];\n\n        // Update main data object\n        const data = {\n          ...this.state.data,\n          programes,\n          centres,\n          poligons,\n          estudis: new Map(Object.entries(_estudis.estudis)),\n          nivells: new Map(Object.entries(_estudis.nivells)),\n          ambitsCurr: new Map(Object.entries(_estudis.ambitsCurr)),\n          ambitsInn: new Map(Object.entries(_estudis.ambitsInn)),\n          cursosDisp: _estudis.cursos,\n        };\n\n        //this.updateLayersDensity(currentPrograms, null, data);\n\n        // Update the main state\n        this.setStateMod({\n          data,\n          dataLoaded: true,\n          polygons: [\n            { name: 'Serveis Territorials', shapes: _poligons.filter(p => p.tipus === 'ST') },\n            { name: 'Serveis Educatius de Zona', shapes: _poligons.filter(p => p.tipus === 'SEZ') },\n          ],\n          cursos: [...data.cursosDisp],\n          fuseFuncs,\n          currentPrograms,\n          loading: false,\n          error: false,\n        });\n      })\n      .catch(error => {\n        // Something wrong happened!\n        console.log(error);\n        this.setStateMod({ error: error.toString() });\n      });\n  }\n\n  /**\n   * Miscellaneous operations to be performed at startup\n   */\n  componentDidMount() {\n    // Load Google's \"Roboto\" font\n    //Utils.loadGFont('Roboto');\n    Utils.loadGFont('Open Sans');\n    // Load datasets\n    this.loadData()\n      .then(() => {\n        this.checkForLayerUpdate(window.location.hash ? window.location.hash.substr(1) : '/');\n      });\n  }\n\n  /**\n   * Update the state of the main component, scrolling to new sections when needed\n   * @param {object} state - The new settings for `state`\n   * @param {boolean} mapChanged - `true` when this change involves map points\n   */\n  updateMap = (state = {}, mapChanged = true, currentProgramsChanged = false) => {\n    this.setStateMod({ ...state, mapChanged, currentProgramsChanged });\n    window.requestAnimationFrame(() => {\n      if (currentProgramsChanged)\n        this.updateLayersDensity(this.state.programa ? new Set([this.state.programa]) : this.state.currentPrograms, this.state.cursos);\n      if (mapChanged)\n        window.setTimeout(() => this.setStateMod({ mapChanged: false }), 0);\n    });\n  }\n\n  /**\n   * Called from CheckRouteChanges when a new path is entered\n   * @param {object} props - New properties used, including a react-route location object\n   * @param {object} prevProps - Old properties, used for checking changes\n   */\n  contentUpdated = (props, prevProps) => {\n    if (props.location.pathname !== prevProps.location.pathname) {\n      this.checkForLayerUpdate(props.location.pathname);\n      window.scrollTo(0, 0);\n    }\n  };\n\n  /**\n   * Checks if the polygons density needs to be recalculated, based on the current path\n   * @param {string} pathname - Current path\n   */\n  checkForLayerUpdate = (pathname) => {\n    if (/^\\/(programes|programa\\/|centre\\/|zona\\/)/.test(pathname)) {\n      const check = /^\\/programa\\/(.*)$/.exec(pathname);\n      const programa = check && check.length === 2 ? check[1] : null;\n      this.updateMap({ programa }, true, true);\n    }\n  };\n\n  /**\n   * Update the `density` value on each polygon, based on the number of schools enroled to\n   * the current programs among the total number of schools on the polygon having at least\n   * one of the educational levels targeted by at least one of the current programs.\n   * Values can also be filtered by school year.\n   * @param {Set} currentPrograms - Set with the `id`s of the programs to be included on the calculation\n   * @param {string[]=} cursos - School years to be considered. Defaults to _null_, meaning all available years.\n   * @param {object=} data - Object containing the current datasets. Defaults to `data` in the current state.\n   */\n  updateLayersDensity = (currentPrograms, cursos = null, data = this.state.data) => {\n\n    const { poligons, programes } = data;\n\n    // Clear base arrays\n    poligons.forEach(poli => {\n      // Clear current density\n      poli.density = MIN_DENSITY;\n\n      // `estudisBase` will be filled with the number of \"school groups\" involved in at least\n      // one of the current programs, where each \"school group\" is an educational level inside a school.\n      // key: educational level (EINF2C, EPRI...)      \n      // value: number of \"school groups\" of this educational level on this polygon\n      poli.estudisBase = {};\n\n      // `estudisPart` will be filled with the total number of \"school groups\" participating in at least\n      // one of the current programs, where each \"school group\" is an educational level inside a school.\n      // key: educational level (EINF2C, EPRI...)      \n      // value: number of \"school groups\" of this type participating in the current programs on this polygon\n      poli.estudisPart = {};\n\n      poli.centresPart = new Set();\n    });\n\n    // Object with all `centres` participating in current programs\n    // key: school id\n    // value: school\n    const currentCentres = {};\n\n    // For program, fill `estudisBase` and `currentCentres`\n    currentPrograms.forEach(pid => {\n      const program = programes.get(pid);\n      if (program && program.tipus.length && Object.keys(program.centres).length) {\n        program.tipus.forEach(t => {\n          poligons.forEach(poli => {\n            poli.estudisBase[t] = poli.centres[t] || 0;\n          });\n        });\n\n        Object.keys(program.centres).forEach(ce => {\n          if (!cursos || cursos.includes(ce)) {\n            program.centres[ce].forEach(centre => {\n              currentCentres[centre.id] = centre;\n            });\n          }\n        });\n      }\n    });\n\n    // For each school, fill `estudisPart` on their associated polygons (ST and SZ)\n    Object.values(currentCentres).forEach(centre => {\n      const st = poligons.get(centre.sstt);\n      const se = poligons.get(centre.se);\n      centre.estudis.forEach(tipus => {\n        if (st && st.estudisBase[tipus]) {\n          st.estudisPart[tipus] = (st.estudisPart[tipus] ? st.estudisPart[tipus] + 1 : 1);\n          st.centresPart.add(centre.id);\n        }\n        if (se && se.estudisBase[tipus]) {\n          se.estudisPart[tipus] = (se.estudisPart[tipus] ? se.estudisPart[tipus] + 1 : 1);\n          se.centresPart.add(centre.id);\n        }\n      });\n    });\n\n    // Calculate the density of each polygon\n    // (ratio between the summations of `estudisPart` and `estudisBase`)\n    let maxDensityST = 0, maxDensitySE = 0;\n    poligons.forEach(poli => {\n      let n = 0, d = 0;\n      Object.keys(poli.estudisBase).forEach(tipus => {\n        if (poli.estudisBase[tipus]) {\n          n += (poli.estudisPart[tipus] || 0);\n          d += poli.estudisBase[tipus];\n        }\n      });\n      if (d > 0) {\n        poli.density = Math.max(MIN_DENSITY, n / d);\n        if (poli.tipus === 'ST')\n          maxDensityST = Math.max(maxDensityST, poli.density);\n        else\n          maxDensitySE = Math.max(maxDensitySE, poli.density);\n      }\n    });\n\n    // Compute correction factors\n    const factorST = (maxDensityST > MIN_DENSITY && maxDensityST < MINMAX_DENSITY)\n      ? MINMAX_DENSITY / maxDensityST\n      : maxDensityST > MAX_DENSITY\n        ? MAX_DENSITY / maxDensityST\n        : 1;\n    const factorSE = (maxDensitySE > MIN_DENSITY && maxDensitySE < MINMAX_DENSITY)\n      ? MINMAX_DENSITY / maxDensitySE\n      : maxDensitySE > MAX_DENSITY\n        ? MAX_DENSITY / maxDensitySE\n        : 1;\n\n    // Apply correction factors\n    poligons.forEach(poli => poli.density *= (poli.tipus === 'ST' ? factorST : factorSE));\n  }\n\n  /**\n   * Builds the App main component\n   */\n  render() {\n\n    const { error, loading } = this.state;\n\n    return (\n      <Router basename={window.location.pathname}>\n        <CssBaseline>\n          <MuiThemeProvider theme={theme}>\n            <AppContext.Provider value={this.state}>\n              <CheckRouteChanges updateHandler={this.contentUpdated}>\n                <Header />\n                <div id=\"filler\" />\n                <main>\n                  {\n                    (loading && <Loading />) ||\n                    (error && <Error {...{ error, refetch: this.loadData }} />) ||\n                    (<>\n                      <Route exact path=\"/\" component={Presentacio} />\n                      <Route path=\"/programes\" component={Programes} />\n                      <Route path=\"/centre/:codi\" component={FitxaCentre} />\n                      <Route path=\"/programa/:id\" component={FitxaPrograma} />\n                      <Route path=\"/zona/:key\" component={FitxaZona} />\n                      <Route path=\"/cerca/:query\" component={Cerca} />\n                    </>\n                    )\n                  }\n                </main>\n                <Footer />\n              </CheckRouteChanges>\n            </AppContext.Provider>\n          </MuiThemeProvider>\n        </CssBaseline>\n      </Router>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './main.css';\nimport '../node_modules/leaflet.markercluster/dist/MarkerCluster.css';\nimport '../node_modules/leaflet.markercluster/dist/MarkerCluster.Default.css';\nimport '../node_modules/react-leaflet-fullscreen/dist/styles.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\nserviceWorker.register();\n"],"sourceRoot":""}