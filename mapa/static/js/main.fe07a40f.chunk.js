(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{208:function(e,a,t){e.exports=t(354)},213:function(e,a,t){},354:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(14),o=t.n(c),l=(t(213),t(214),t(215),t(216),t(119)),i=t(20),s=t(44),m=t(77),u=t(49),d=t(83),p=t(78),f=t(50),g=t(84),E=t(23),h=t(63),v=function(e){function a(e){var t;return Object(m.a)(this,a),(t=Object(d.a)(this,Object(p.a)(a).call(this,e))).updateHandler=e.updateHandler,t}return Object(g.a)(a,e),Object(u.a)(a,[{key:"componentDidUpdate",value:function(e){this.updateHandler&&this.updateHandler(this.props,e)}},{key:"render",value:function(){return this.props.children}}]),a}(r.a.Component),b=Object(h.f)(v),y=t(137),w=t(437),N=t(427),C=t(438),k=t(188),j=t(136),O=t.n(j),x=t(172),S=t.n(x),M=t(173);function P(e){if(!e.ok)throw Error(e.statusText||"Error desconegut");return e}function I(e){return Object.values(e).reduce(function(e,a){return e+a},0)}function T(e){return 9===e.length?"".concat(e.substr(0,5)).concat(e.substr(7,2)):e}function z(e,a,t){return r.a.createElement(r.a.Fragment,null,e.map(function(n,c){var o=n.titol,l=n.fitxa,i=n.video,s=n.curs;return r.a.createElement("span",{key:c},l||i?r.a.createElement("span",null,r.a.createElement(E.b,{to:"/projecte/".concat(a,"|").concat(t,"|").concat(c)},'"'.concat(o,'"'))," (".concat(s,")")):r.a.createElement("span",null,'"'.concat(o,'" (').concat(s,")")),c<e.length-1&&r.a.createElement("span",null,", "))}))}function F(e){return!(!e||!e.find(function(e){return e.fitxa||e.video}))}var A=Object.entries({autoplay:0,cc_lang_pref:"ca",hl:"ca",fs:1,modestbranding:1,rel:0}).map(function(e){return"".concat(e[0],"=").concat(e[1])}).join("&");function B(e){var a=e.url,t=e.title,n=void 0===t?"":t,c=e.width,o=void 0===c?800:c,l=e.height,i=void 0===l?600:l,s=e.className,m=a||"",u=/(youtu\.be\/|[?&]v=)([^&]+)/.exec(a);if(u&&3===u.length){var d=u[2];m="https://www.youtube.com/embed/".concat(d,"?").concat(A)}else if((u=/vimeo\.com\/([\d]+)$/.exec(a))&&2===u.length){var p=u[1];m="https://player.vimeo.com/video/".concat(p)}return r.a.createElement("iframe",{className:s,title:n,src:m,width:o,height:i,type:"text/html",allowFullScreen:!0})}function R(e,a){return new M.Parser({fields:a.map(function(e){return e.name})}).parse(e.map(function(e){return a.reduce(function(a,t){return a[t.name]=e[t.id]||"",a},{})}))}function L(e,a,t){var n=new Blob(["\ufeff"+R(a,t)],{type:"text/csv;charset=utf-16;"});if(navigator.msSaveBlob)navigator.msSaveBlob(n,e);else{var r=document.createElement("a");if(void 0!==r.download){var c=URL.createObjectURL(n);r.setAttribute("href",c),r.setAttribute("download",e),r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r)}}}var D={programes:new Map,centres:new Map,poligons:new Map,estudis:new Map,nivells:new Map,ambitsCurr:new Map,ambitsInn:new Map,cursosDisp:[]},_={loading:!0,dataLoaded:!1,error:!1,polygons:[],currentPrograms:new Set,programa:null,cursos:[],mapChanged:!0,tabMode:!1,currentTab:0,currentPrjTab:0,dlgOpen:!1,updateMap:function(){return null},fuseFuncs:[],menuItems:[],data:D},q=r.a.createContext(_),U=t(406),W=t(407),Z=t(189),V=t(176),G=t.n(V),H=t(177),J=t.n(H),Y=t(110),$=t.n(Y),Q=t(87),X=t(430),K=t(175),ee=t.n(K);var ae=function(e){var a=e.closeFn,t=void 0===a?function(){return null}:a,n=e.history,c=e.mini,o=void 0!==c&&c,l=r.a.useState(""),s=Object(i.a)(l,2),m=s[0],u=s[1],d=function(e){e.preventDefault(),t(),n.push("/cerca/".concat(m)),u("")};return r.a.createElement("form",{className:"search-bar",onSubmit:d},r.a.createElement(Z.a,{className:"search-btn",color:"inherit","aria-label":"Cerca",title:"Cerca",onClick:d},r.a.createElement($.a,null)),r.a.createElement(X.a,{"aria-label":"Cerca text...",title:"Cerca text...",className:"search-text",value:m,InputProps:{disableUnderline:!0},onChange:function(e){return u(e.target.value)}}),!o&&r.a.createElement(Z.a,{className:"search-close",color:"inherit","aria-label":"Tanca",title:"Tanca",onClick:t},r.a.createElement(ee.a,null)))},te=t(440),ne=t(405),re=t(358),ce=t(409),oe=t(408);var le=Object(h.f)(function(e){var a=e.history,t=e.location,n=r.a.useState(!1),c=Object(i.a)(n,2),o=c[0],l=c[1],s=r.a.useState(!1),m=Object(i.a)(s,2),u=m[0],d=m[1];return r.a.createElement(q.Consumer,null,function(e){var n=e.menuItems,c=(e.searchFn,n&&n.length>0),i=function(e){return function(){l(!1),e.path&&a.push(e.path)}};return n.forEach(function(e){return e.current=e.path===t.pathname}),r.a.createElement(r.a.Fragment,null,r.a.createElement(U.a,{className:"header",position:"fixed"},r.a.createElement(W.a,{disableGutters:!0},c&&r.a.createElement(Z.a,{className:"main-menu-button",color:"inherit","aria-label":"Seccions",title:"Seccions",onClick:function(){return l(!0)}},r.a.createElement(G.a,null)),r.a.createElement("div",{className:"main-header-block"},r.a.createElement("div",{className:"top-bar"},r.a.createElement("a",{className:"logo-gencat",href:"https://web.gencat.cat/",title:"Generalitat de Catalunya",target:"_top"},"gencat.cat"),r.a.createElement(ae,{className:"search-bar",history:a,mini:!0})),r.a.createElement(Q.a,{className:"main-title",variant:"h6",color:"inherit",noWrap:!0},"Mapa de la innovaci\xf3 pedag\xf2gica"),r.a.createElement("ul",{className:"nav-bar"},n.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement("div",{className:"nav-label",role:"button",current:e.current?"true":"false",onClick:i(e)},e.name))}))),r.a.createElement(Z.a,{className:"search-btn-small",color:"inherit","aria-label":"Cerca",title:"Cerca",onClick:function(){return d(!u)}},r.a.createElement($.a,null))),u&&r.a.createElement(ae,{closeFn:function(){return d(!1)},history:a})),c&&r.a.createElement(te.a,{variant:"persistent",anchor:"left",open:o},r.a.createElement(ne.a,null,r.a.createElement(re.a,{component:"li",divider:!0,button:!0,onClick:function(){return l(!1)}},r.a.createElement(oe.a,null,r.a.createElement(J.a,null)),r.a.createElement(ce.a,{primary:"Tanca el men\xfa"})),n.map(function(e){return r.a.createElement(re.a,{component:"li",button:!0,key:e.id,onClick:i(e)},r.a.createElement(ce.a,{primary:e.name}))}))))})}),ie=t(86),se=t.n(ie),me=t(191),ue=t(410),de='\n<img src="logos/portada.png" style="max-width:100%;text-align:center;" alt="Mapa de la innovaci\xf3 pedag\xf2gica" />\n\n\xc9s voluntat del Departament d\u2019Educaci\xf3 acompanyar els centres educatius del pa\xeds en el proc\xe9s de\ntransformaci\xf3 educativa per donar resposta a les necessitats del segle XXI i recon\xe8ixer els esfor\xe7os\nque s\u2019estan fent en termes d\u2019innovaci\xf3 pedag\xf2gica.\n\nEl mapa de la innovaci\xf3 pedag\xf2gica de Catalunya \xe9s un instrument que situa en el territori i\nvisibilitza totes les iniciatives vinculades a la innovaci\xf3 i a la recerca educativa que es desenvolupa\nen els centres educatius i que han estat reconegudes pel Departament d\u2019Educaci\xf3 des del 2015, d\u2019acord\namb el <a href="http://xtec.gencat.cat/ca/innovacio/" target="_blank" rel="noopener noreferrer">Marc de la Innovaci\xf3 Pedag\xf2gica de Catalunya</a>. \n\nAmb el mapa de la innovaci\xf3 es pret\xe9n impulsar el treball en xarxa entre els centres que comparteixen\nobjectius al llarg del territori i posar en valor la informaci\xf3 que faciliti la presa de decisions a\ntota la comunitat educativa, a l\u2019administraci\xf3 i a altres agents. Aquesta presa de decisions ha de\npermetre promoure la inclusi\xf3, la cohesi\xf3 i l\u2019equitat, i facilitar la participaci\xf3 de tots els centres\nen l\u2019\xe8xit educatiu i la innovaci\xf3 per a la millora.\n\n',pe={escapeHtml:!1};var fe=function(e){var a=e.history;return r.a.createElement(q.Consumer,null,function(e){var t=e.data;return r.a.createElement("section",{className:"seccio presenta"},r.a.createElement(me.a,{className:"paper"},r.a.createElement(se.a,pe,de),r.a.createElement(ue.a,{className:"close-intro-btn",variant:"outlined",onClick:function(){return a.push("/programes")}},"Acc\xe9s al mapa"),r.a.createElement("div",{className:"hidden"},t.programes&&Array.from(t.programes.values()).map(function(e,a){return r.a.createElement("img",{alt:"",key:a,src:"logos/".concat(e.simbol)})}))))})},ge=t(170),Ee=t(167),he=t(134),ve=t(166),be=t(169),ye=t(168),we=t(165),Ne={osm:{attribution:'&amp;copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"},mapbox:{attribution:'Dades del mapa \xa9 contribu\xefdors de <a href="https://www.openstreetmap.org/">OpenStreetMap</a>, <a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imatges \xa9 <a href="https://www.mapbox.com/">Mapbox</a>',url:"https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token={accessToken}",id:"mapbox.streets",accessToken:"pk.eyJ1IjoiZnJuY2VzYyIsImEiOiJjanU1b3BkZ2owYThsNDR0M3A2MzBjczg2In0.5zKGaoSJeQOeiWZyOj8ByQ"},wikimedia:{attribution:'<a href="https://wikimediafoundation.org/wiki/Maps_Terms_of_Use">Wikimedia</a>',url:"https://maps.wikimedia.org/osm-intl/{z}/{x}/{y}{r}.png",minZoom:1,maxZoom:19}},Ce={};var ke=function(e){var a=e.type,t=void 0===a?"wikimedia":a;return Ce[t]||(Ce[t]=r.a.createElement(we.a,Ne[t])),Ce[t]},je=t(30),Oe=t(7),xe=t(8),Se=t.n(xe);t(351);var Me=function(e){function a(){return Object(m.a)(this,a),Object(d.a)(this,Object(p.a)(a).apply(this,arguments))}return Object(g.a)(a,e),Object(u.a)(a,[{key:"createLeafletElement",value:function(e){var a=e.clusterProps,t=void 0===a?{}:a,n=new Se.a.markerClusterGroup(Object(s.a)({},e,t));return this.contextValue=Object(s.a)({},e.leaflet,{layerContainer:n}),n}}]),a}(je.a),Pe=Object(Oe.d)(Me),Ie=t(178),Te=t.n(Ie),ze="wikimedia",Fe=!0,Ae=[[40.5,.15],[42.9,3.34]],Be=[[39.5,-.85],[43.9,4.34]],Re={showCoverageOnHover:!1,maxClusterRadius:30};function Le(e){var a,t=e.points,n=void 0===t?[]:t,c=e.polygons,o=void 0===c?[]:c,l=e.estudis,i=void 0===l?[]:l,s=e.programa,m=void 0===s?null:s,u=e.poli,d=void 0===u?null:u,p=e.zoom,f=void 0===p?8:p,g=e.maxZoom,h=void 0===g?13:g,v=e.updateMap,b=[{name:"Mostra la participaci\xf3 per zones",flag:"showDensity",default:!1},{name:"Mostra els centres",flag:"showCentres",default:!0}],y=window.localStorage,w=function(e){return"true"===y.getItem(e)},N=function(e,a){return y.setItem(e,a)},C=window.sessionStorage,k=Fe&&null===d,j=k&&function(){var e=C.getItem("mapBounds");if(!e)return null;var a=e.split(",");return 4!==a.length?null:[[Number(a[1]),Number(a[0])],[Number(a[3]),Number(a[2])]]}(),O=function(e){var a;k&&e.target&&e.target.getBounds&&(a=e.target.getBounds(),C.setItem("mapBounds",a.toBBoxString()))},x=function(e){return function(a){var t=b.findIndex(function(e){return e.name===a.name});if(t>=0){var n="add"===e;y.setItem(b[t].flag,n),0===t&&n&&v({},!1,!1)}}},S=(a="currentLayer",Number(y.getItem(a)));N("currentLayer",S),b.forEach(function(e){var a=y.getItem(e.flag);N(e.flag,null===a?e.default:a)});var M=function(e){var a=e.centresPart.size,t=I(e.estudisPart),n=I(e.estudisBase),c=(n>0?t/n*100:0).toFixed(1);return r.a.createElement(ge.a,null,r.a.createElement("h4",null,r.a.createElement(E.b,{to:"/zona/".concat(e.key)},e.nom)),a&&r.a.createElement("p",null,r.a.createElement("span",null,"Centres participants ".concat(m?"al programa seleccionat":"als programes seleccionats",": ").concat(a)),r.a.createElement("br",null),r.a.createElement("span",null,"\xcdndex de participaci\xf3: ".concat(c,"%")))||r.a.createElement("p",null,"No hi ha cap centre que participi als programes seleccionats."))};return r.a.createElement(Ee.a,Object.assign({className:"mapa markercluster-map"},{maxZoom:h,minZoom:f,bounds:d&&d.bounds||j||Ae,maxBounds:Be,onBaseLayerChange:function(e){var a=o.findIndex(function(a){return a.name===e.name});a>=0&&(N("currentLayer",a),w(b[0].flag)&&v({},!1))},onOverlayAdd:x("add"),onOverlayRemove:x("remove"),onZoomEnd:O,onMoveEnd:O}),r.a.createElement(ke,{type:ze}),r.a.createElement(he.b,{position:"topright"},o.map(function(e,a){return r.a.createElement(he.b.BaseLayer,{name:e.name,key:a,checked:null!==d?a===("SEZ"===d.tipus?1:0):a===S},r.a.createElement(ve.a,null,e.shapes.filter(function(e){return null===d||d===e}).map(function(e,a){return r.a.createElement(be.a,{key:a,positions:e.poligons,weight:2,fillOpacity:0},M(e))})))}),r.a.createElement(he.b.Overlay,{name:b[0].name,checked:null===d&&w(b[0].flag)},r.a.createElement(ve.a,null,o[S].shapes.filter(function(e){return null===d||d===e}).map(function(e,a){return r.a.createElement(be.a,{key:a,positions:e.poligons,weight:0,fillOpacity:e.density},M(e))}))),r.a.createElement(he.b.Overlay,{name:b[1].name,checked:null!==d||w(b[1].flag)},r.a.createElement(Pe,{clusterProps:Re},n.map(function(e){return r.a.createElement(ye.a,{key:e.id,position:[e.lat,e.lng]},(a=e,r.a.createElement(ge.a,null,r.a.createElement("h4",null,r.a.createElement(E.b,{to:"/centre/".concat(a.id)},a.nom)),r.a.createElement("p",null,a.adreca,r.a.createElement("br",null),r.a.createElement("a",{href:a.web,target:"_blank",rel:"noopener noreferrer"},a.web)),r.a.createElement("p",null,"".concat(a.estudis.map(function(e){return i.get(e)}).join(", "),".")))));var a})))),r.a.createElement(Te.a,{position:"topleft",title:"Mostra el mapa a pantalla completa",titleCancel:"Surt de la pantalla completa"}))}var De="wikimedia",_e=[[40.5,.15],[42.9,3.34]];function qe(e){var a=e.point,t=e.center,n=void 0===t?[41.7,1.8]:t,c=e.zoom,o=void 0===c?8:c,l=e.maxZoom,i=void 0===l?19:l;return r.a.createElement(Ee.a,Object.assign({className:"mapa-centre"},{center:n,zoom:o,maxZoom:i,minZoom:8,maxBounds:_e}),r.a.createElement(ke,{type:De}),r.a.createElement(ye.a,{key:a.id,position:[a.lat,a.lng]}))}var Ue=t(435),We=t(411),Ze=t(433);var Ve=function(e){var a=e.data,t=a.programes,n=a.centres,c=a.poligons,o=a.estudis,l=a.cursosDisp,i=e.programa,s=e.centre,m=e.zona,u=e.cursos,d=e.currentPrograms,p=e.polygons,f=e.mapChanged,g=e.updateMap,E=s?n.get(s):null,h=m?c.get(m):null,v=window.innerWidth,b=v<600?7:v<820?8:v<1300?7:8,y=function(e,a){var n=t.get(e);return n&&Object.keys(n.centres).forEach(function(e){u&&!u.includes(e)||n.centres[e].forEach(function(e){h&&!h.centresInn.has(e)||a.find(function(a){return a.id===e.id})||a.push(e)})}),a},w=[];return f||(E?w.push(E):i?y(i,w):d.forEach(function(e){return y(e,w)})),r.a.createElement("section",{className:"seccio smapa"},r.a.createElement(me.a,{className:E?"paper":"paper no-padding-top"},E&&r.a.createElement(qe,{point:E,center:[E.lat,E.lng],zoom:15,maxZoom:19})||r.a.createElement(r.a.Fragment,null,r.a.createElement(Ue.a,{className:"cursos",nonLinear:!0,alternativeLabel:!0,activeStep:null},l.map(function(e,a){return r.a.createElement(We.a,{key:e},r.a.createElement(Ze.a,{onClick:(t=e,function(e){var a=[];l.forEach(function(e){(t===e&&!u.includes(e)||t!==e&&u.includes(e))&&a.push(e)}),g({cursos:a},!0,!0)}),completed:u.includes(e)},T(e)));var t})),r.a.createElement(Le,{points:w,polygons:p,programa:i,poli:h,zoom:b,maxZoom:19,estudis:o,updateMap:g}))))},Ge=t(421),He=t(419),Je=t(422),Ye=t(420),$e=t(105),Qe=t(412),Xe=t(417),Ke=t(414),ea=t(413),aa=t(404),ta=t(439),na=t(429),ra=t(416),ca=t(434),oa=t(415);var la=function(e){var a=e.dlgOpen,t=e.data,n=t.programes,c=t.ambitsCurr,o=t.ambitsInn,l=t.nivells,m=e.updateMap,u=r.a.useState(""),d=Object(i.a)(u,2),p=d[0],f=d[1],g=r.a.useState(""),E=Object(i.a)(g,2),h=E[0],v=E[1],b=r.a.useState(Array.from(l).reduce(function(e,a){return e[Object(i.a)(a,1)[0]]=!0,e},{})),y=Object(i.a)(b,2),w=y[0],N=y[1],C=r.a.useState(new Set),k=Object(i.a)(C,2),j=k[0],O=k[1],x=function(){var e=new Set;n.forEach(function(a,t){""!==p&&!a.ambInn.includes(p)||""!==h&&!a.ambCurr.includes(h)||!Object.keys(w).find(function(e){return w[e]&&l.get(e).find(function(e){return a.tipus.includes(e)})})||e.add(t)}),O(e)};r.a.useMemo(x,[p,h,w]);var S=function(e){return function(a){e(a.target.value)}},M=function(e){return function(a){m(Object.assign({dlgOpen:!1},e&&{currentPrograms:j}||{}),!0,e)}};return r.a.createElement(Qe.a,{open:a,onEnter:x,"aria-labelledby":"dialog-title",classes:{paper:"stretch-dlg"}},r.a.createElement(ea.a,{id:"dialog-title"},"Tipus de programes"),r.a.createElement(Ke.a,{className:"dialog-content"},r.a.createElement("div",{className:"nivells"},Array.from(l).map(function(e){var a,t=Object(i.a)(e,1)[0];return r.a.createElement(oa.a,{key:t,className:"select-nivell",control:r.a.createElement(ca.a,{onChange:(a=t,function(e){N(Object(s.a)({},w,Object($e.a)({},a,e.target.checked)))}),value:t,checked:w[t]}),label:t})})),r.a.createElement(aa.a,{className:"select-list"},r.a.createElement(ta.a,{htmlFor:"select-ambit-curr"},"\xc0mbit curricular"),r.a.createElement(na.a,{value:h,onChange:S(v),inputProps:{name:"ambitCurr",id:"select-ambit-curr"}},r.a.createElement(ra.a,{value:""},r.a.createElement("em",null,"Tots els \xe0mbits")),Array.from(c.keys()).sort().map(function(e){return r.a.createElement(ra.a,{key:e,value:e},c.get(e))}))),r.a.createElement(aa.a,{className:"select-list"},r.a.createElement(ta.a,{htmlFor:"select-ambit-inn"},"\xc0mbit d'innovaci\xf3"),r.a.createElement(na.a,{value:p,onChange:S(f),inputProps:{name:"ambitInn",id:"select-ambit-inn"}},r.a.createElement(ra.a,{value:""},r.a.createElement("em",null,"Tots els \xe0mbits")),Array.from(o.keys()).sort().map(function(e){return r.a.createElement(ra.a,{key:e,value:e},o.get(e))}))),r.a.createElement(Q.a,{className:"info"},j.size," ",1===j.size?"programa seleccionat":"programes seleccionats")),r.a.createElement(Xe.a,null,r.a.createElement(ue.a,{onClick:M(!0),color:"primary"},"Aplica la selecci\xf3"),r.a.createElement(ue.a,{onClick:M(!1),color:"primary"},"Cancel\xb7la")))},ia=t(432),sa=t(418);var ma=function(e){var a=e.history;return r.a.createElement(q.Consumer,null,function(e){var t=e.data,n=e.data,c=n.programes,o=n.ambitsCurr,l=n.ambitsInn,i=n.nivells,s=e.cursos,m=e.currentPrograms,u=e.polygons,d=e.mapChanged,p=e.updateMap,f=e.tabMode,g=e.currentTab,E=e.dlgOpen,h=m.size===c.size,v=function(e){return function(){return a.push("/programa/".concat(e))}},b=function(e){return function(a){m[m.has(e)?"delete":"add"](e),p({currentPrograms:m,ambitCurr:"",ambitInn:"",nivell:""},!0,!0)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(la,{dlgOpen:E,data:{programes:c,ambitsCurr:o,ambitsInn:l,nivells:i},updateMap:p}),f&&r.a.createElement(ia.a,{className:"prog-tabs",value:g,onChange:function(e,a){return p({currentTab:a})},variant:"fullWidth"},r.a.createElement(sa.a,{label:"Mapa"}),r.a.createElement(sa.a,{label:"Programes"})),(!f||1===g)&&r.a.createElement("section",{className:"seccio programes"},r.a.createElement(me.a,{className:"paper"},r.a.createElement("div",{className:"select-progs"},r.a.createElement(ue.a,{variant:"outlined",color:"primary",onClick:function(){return p({dlgOpen:!0})}},"Selecciona per tipus"),r.a.createElement(oa.a,{className:"select-all",labelPlacement:"start",control:r.a.createElement(ca.a,{onChange:function(e){e.target.checked?c.forEach(function(e,a){return m.add(a)}):m.clear(),p({currentPrograms:m},!0,!0)},checked:h}),label:"Selecciona'ls tots"})),r.a.createElement(ne.a,{className:"prog-list"},Array.from(c.values()).map(function(e,a){var t=e.id,n=e.nom,c=e.simbol,o=e.centres;return r.a.createElement(re.a,{key:a,button:!0,className:"list-button"},r.a.createElement(He.a,null,r.a.createElement(Ye.a,{src:"logos/mini/".concat(c),alt:n})),r.a.createElement(ce.a,{primary:n,secondary:"Centres "+Object.keys(o).sort().map(function(e){return"".concat(T(e),": ").concat(o[e].length)}).join(", "),onClick:v(t)}),r.a.createElement(Ge.a,null,r.a.createElement(Je.a,{onChange:b(t),checked:m.has(t)})))})))),(!f||0===g)&&r.a.createElement(Ve,{data:t,programa:null,centre:null,zona:null,cursos:s,currentPrograms:m,polygons:u,mapChanged:d,updateMap:p}))})},ua=t(436),da=t(423),pa=t(424),fa=t(425),ga=t(98),Ea=t.n(ga),ha=t(39),va=t.n(ha),ba=t(117),ya=t.n(ba),wa=t(182),Na=t.n(wa),Ca=t(81),ka=t.n(Ca),ja=t(82),Oa=t.n(ja),xa=t(179),Sa=t.n(xa),Ma=t(180),Pa=t.n(Ma);var Ia=function(e){var a=e.error,t=e.history,n=e.refetch;return r.a.createElement("div",{className:"err-msg"},r.a.createElement(Q.a,null,r.a.createElement(Sa.a,{className:"err-icon",color:"secondary"}),a||"Error desconegut!"),n&&r.a.createElement(ue.a,{className:"action-btn","aria-label":"Reintenta",onClick:n,variant:"outlined"},r.a.createElement(Pa.a,{className:"left-icon"}),"Reintenta")||t&&t.length>1&&r.a.createElement(ue.a,{className:"action-btn","aria-label":"Torna",variant:"outlined",onClick:function(){return t.goBack()}},r.a.createElement(va.a,{className:"left-icon"}),"Torna"))},Ta="https://clic.xtec.cat/pub/fitxes/",za=["1001"],Fa=25,Aa={escapeHtml:!1};function Ba(e,a,t){return r.a.createElement(ua.a,{className:e},r.a.createElement(da.a,{className:"small-padding-h",expandIcon:r.a.createElement(Ea.a,null)},r.a.createElement(Q.a,{variant:"h6"},a)),r.a.createElement(pa.a,{className:"small-padding-h"},t))}function Ra(e,a,t){return Ba(e,a,r.a.createElement("div",null,r.a.createElement(se.a,Aa,t)))}var La=function(e){var a=e.history,t=e.match.params.id,n=r.a.useState(new Array(Fa).fill(za.includes(t),0,10)),c=Object(i.a)(n,2),o=c[0],l=c[1],s=function(e){return function(a){l(o.map(function(a,t){return t===e?!a:a}))}};return r.a.createElement(q.Consumer,null,function(e){var n=e.data,c=e.cursos,l=e.currentPrograms,i=e.polygons,m=e.mapChanged,u=e.updateMap,d=n.programes,p=n.estudis,f=n.ambitsCurr,g=n.ambitsInn,E=d.get(t);if(!E)return r.a.createElement(Ia,{error:"No hi ha cap programa amb el codi: ".concat(t),history:a});var h=E.nom,v=E.descripcio,b=E.link,y=E.ambCurr,w=E.ambInn,N=E.fitxa,C=E.video,k=E.objectius,j=E.requisits,O=E.compromisos,x=E.contacte,S=E.normativa,M=E.arees,P=E.simbol,I=E.tipus,T=E.centres;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(va.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio programa"},r.a.createElement(me.a,{className:"paper"},r.a.createElement("div",{className:"logo-nom-seccio"},P&&r.a.createElement("img",{className:"seccio-logo",src:"logos/".concat(P),alt:h}),r.a.createElement("div",{className:"nom-seccio"},r.a.createElement(Q.a,{variant:"h4"},h))),r.a.createElement("div",{id:"descripcio"},r.a.createElement(se.a,Aa,v)),r.a.createElement("div",{id:"info"},N&&r.a.createElement(ue.a,{variant:"contained",className:"info-btn",href:"".concat(/^http.?:\/\//.test(N)?"":Ta).concat(N),title:"Descarrega la fitxa del projecte"},r.a.createElement(ya.a,{className:"left-icon"}),"Fitxa"),b&&r.a.createElement(ue.a,{variant:"contained",className:"info-btn",href:b,target:"_blank",rel:"noopener noreferrer",title:b},r.a.createElement(Na.a,{className:"left-icon"}),"Web"),x&&r.a.createElement(ue.a,{variant:"contained",className:"info-btn",href:"mailto:".concat(x),target:"_blank",rel:"noopener noreferrer",title:x},r.a.createElement(ka.a,{className:"left-icon"}),"Contacte"),C&&r.a.createElement("div",{className:"prog-video"},r.a.createElement("br",null),r.a.createElement(se.a,Aa,C))),k&&Ra("prog-objectius","Objectius",k),j&&Ra("prog-requisits","Requisits",j),O&&Ra("prog-compromisos","Compromisos",O),S&&Ra("prog-normativa","Normativa",S),Ba("prog-ambits","\xc0mbits, \xe0rees i nivells",r.a.createElement("div",null,w.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"\xc0mbits d'innovaci\xf3:"),r.a.createElement("ul",null,w.map(function(e){return r.a.createElement("li",{key:e},g.get(e))}))),y.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"\xc0mbits curriculars:"),r.a.createElement("ul",null,y.map(function(e){return r.a.createElement("li",{key:e},f.get(e))}))),M.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"\xc0rees curriculars:"),r.a.createElement("ul",null,M.map(function(e,a){return r.a.createElement("li",{key:a},e)}))),I.length>0&&r.a.createElement("div",{className:"prog_ambits"},r.a.createElement("h4",null,"Nivells educatius:"),r.a.createElement("ul",null,I.map(function(e,a){return r.a.createElement("li",{key:a},p.get(e))}))))),r.a.createElement("br",null),Object.keys(T).sort().map(function(e,a){var n=!1;return r.a.createElement(ua.a,{key:a,expanded:o[a]},r.a.createElement(da.a,{className:"small-padding-h",expandIcon:r.a.createElement(Ea.a,null),onClick:s(a)},r.a.createElement(Q.a,{className:"wider"},"CURS ".concat(e)),r.a.createElement(Q.a,null,"".concat(T[e].length," ").concat(1===T[e].length?"centre":"centres"))),o[a]&&r.a.createElement(pa.a,{className:"small-padding-h flow-v"},r.a.createElement(ne.a,{className:"wider"},T[e].sort(function(e,a){return e.nom.localeCompare(a.nom)}).map(function(a,c){var o=a.id,l=a.nom,i=a.municipi,s=a.info,m=a.notCert,u=s&&F(s[t])?null:"#/centre/".concat(o),d=m.has("".concat(t,"|").concat(e));return n=n||d,r.a.createElement(re.a,{key:c,button:!0,component:u?"a":"div",href:u,className:"small-padding-h"},r.a.createElement(ce.a,{primary:"".concat(l," (").concat(i,")").concat(d?" *":""),secondary:s&&s[t]&&z(s[t],t,o)}))})),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(fa.a,null),r.a.createElement(Q.a,{className:"padding-one"},"*: Participaci\xf3 en curs, pendent de certificar"))))}),r.a.createElement("br",null),r.a.createElement(ue.a,{variant:"contained",className:"csv-btn",title:"Descarrega la llista de centres en format CSV",onClick:function(){return function(e){var a=e.centres,t=e.info,n=[{name:"CODI",id:"codi"},{name:"CENTRE",id:"centre"},{name:"CURS",id:"curs"},{name:"PROGRAMA",id:"programa"}];t&&(n.push({name:"TITOL",id:"titol"}),n.push({name:"INFO",id:"url"}));var r="".concat(window.location.origin).concat(window.location.pathname,"#"),c=Object.keys(a).reduce(function(n,c){return a[c].forEach(function(a){var o=t&&t[a.id]&&t[a.id].find(function(e){return e.curs===c});n.push({centre:"".concat(a.nom," (").concat(a.municipi,")"),codi:a.id,curs:c,programa:e.nom,titol:o?o.titol:"",url:o?"".concat(r,"/projecte/").concat(e.id,"|").concat(a.id,"|").concat(o.num||0):""})}),n},[]);return L("centres-".concat(e.nomCurt,".csv"),c,n)}(E)}},r.a.createElement(Oa.a,{className:"left-icon"}),"CSV"))),r.a.createElement(Ve,{data:n,programa:t,centre:null,zona:null,cursos:c,currentPrograms:l,polygons:i,mapChanged:m,updateMap:u}))})},Da=t(118),_a=t.n(Da),qa=t(183),Ua=t.n(qa),Wa="https://clic.xtec.cat/pub/logos/";var Za=function(e){var a=e.history,t=e.match.params.codi;return r.a.createElement(q.Consumer,null,function(e){var n=e.data,c=e.currentPrograms,o=e.polygons,l=e.mapChanged,i=e.updateMap,s=n.centres.get(t);if(!s)return r.a.createElement(Ia,{error:"No hi ha cap programa amb el codi: ".concat(t),history:a});var m=s.nom,u=s.municipi,d=s.comarca,p=s.estudis,f=s.adreca,g=s.web,h=s.logo,v=s.tel,b=s.mail,y=s.twitter,w=s.sstt,N=s.se,C=s.pb,k=s.programes,j=s.info,O=s.notCert,x=n.poligons.get(w),S=n.poligons.get(N),M=!1;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(va.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio centre"},r.a.createElement(me.a,{className:"paper"},r.a.createElement("div",{className:"logo-nom-seccio"},h&&r.a.createElement("img",{className:"seccio-logo",src:"".concat(/^http.?:\/\//.test(h)?"":Wa).concat(h),alt:m}),r.a.createElement("div",{className:"nom-seccio"},r.a.createElement(Q.a,{variant:"h4"},m),r.a.createElement("div",{id:"tipus"},"Centre ",C?"p\xfablic":"privat concertat"))),r.a.createElement("div",{className:"adreca"},r.a.createElement("p",null,f,r.a.createElement("br",null),"".concat(u," (").concat(d,")"),r.a.createElement("br",null),v&&r.a.createElement(r.a.Fragment,null,"Tel. ".concat(v)))),r.a.createElement("div",{id:"info"},g&&r.a.createElement(ue.a,{variant:"contained",className:"info-btn",href:g,target:"_blank",rel:"noopener noreferrer",title:g},r.a.createElement(_a.a,{className:"left-icon"}),"Web"),y&&r.a.createElement(ue.a,{variant:"contained",className:"info-btn",href:"https://twitter.com/".concat(y),target:"_blank",rel:"noopener noreferrer",title:y},r.a.createElement(Ua.a,{className:"left-icon"}),"Twitter"),b&&r.a.createElement(ue.a,{variant:"contained",className:"info-btn",href:"mailto:".concat(b),target:"_blank",rel:"noopener noreferrer",title:b},r.a.createElement(ka.a,{className:"left-icon"}),"Contacte")),r.a.createElement(Q.a,{variant:"h6"},"Estudis"),r.a.createElement("ul",null,p.map(function(e,a){return r.a.createElement("li",{key:a},n.estudis.get(e))})),r.a.createElement(Q.a,{variant:"h6"},"Zones"),r.a.createElement("ul",null,x&&r.a.createElement("li",null,r.a.createElement(E.b,{to:"/zona/".concat(w)},x.nom)),S&&r.a.createElement("li",null,r.a.createElement(E.b,{to:"/zona/".concat(N)},S.nom))),r.a.createElement("br",null),r.a.createElement(Q.a,{variant:"h6"},"Programes on participa"),r.a.createElement(ne.a,null,function(e){var a={};return Object.keys(e).forEach(function(t){e[t].forEach(function(e){a[e.id]||(a[e.id]={id:e.id,nom:e.nom,simbol:e.simbol,cursos:[]}),a[e.id].cursos.push(t)})}),Object.values(a).sort(function(e,a){return e.nom.localeCompare(a.nom)})}(k).map(function(e,a){var n=e.id,c=e.nom,o=e.simbol,l=e.cursos,i=j&&F(j[n])?null:"#/programa/".concat(n);return r.a.createElement(re.a,{key:a,button:!0,className:"no-padding-h-small",component:i?"a":"div",href:i},r.a.createElement(He.a,null,r.a.createElement(Ye.a,{src:"logos/mini/".concat(o),alt:c})),r.a.createElement(ce.a,{primary:c,secondary:j&&j[n]&&z(j[n],n,t)||"".concat(1===l.length?"Curs":"Cursos"," ").concat(l.sort().map(function(e){var a=O.has("".concat(n,"|").concat(e));return M=M||a,"".concat(e).concat(a?" *":"")}).join(", "))}))})),M&&r.a.createElement(r.a.Fragment,null,r.a.createElement("br",null),r.a.createElement(Q.a,null,"*: Participaci\xf3 en curs, pendent de certificar")),r.a.createElement("br",null),r.a.createElement(ue.a,{variant:"contained",className:"csv-btn",title:"Descarrega la llista de programes en format CSV",onClick:function(){return function(e){var a=e.programes,t=e.info,n=[{name:"CODI",id:"codi"},{name:"CENTRE",id:"centre"},{name:"CURS",id:"curs"},{name:"PROGRAMA",id:"programa"},{name:"INFO",id:"url"}];t&&n.push({name:"TITOL",id:"titol"});var r="".concat(window.location.origin).concat(window.location.pathname,"#"),c="".concat(e.nom," (").concat(e.municipi,")"),o=Object.keys(a).reduce(function(n,o){return a[o].forEach(function(a){var l=t&&t[a.id]&&t[a.id].find(function(e){return e.curs===o});n.push({centre:c,codi:e.id,curs:o,programa:a.nom,url:l?"".concat(r,"/projecte/").concat(a.id,"|").concat(e.id,"|").concat(l.num||0):"".concat(r,"/programa/").concat(a.id),titol:l?l.titol:""})}),n},[]);return L("programes-".concat(e.id,".csv"),o,n)}(s)}},r.a.createElement(Oa.a,{className:"left-icon"}),"CSV"))),r.a.createElement(Ve,{data:n,programa:null,centre:t,zona:null,currentPrograms:c,polygons:o,mapChanged:l,updateMap:i}))})};var Va=function(e){var a=e.history,t=e.match.params.key;return r.a.createElement(q.Consumer,null,function(e){var n=e.data,c=e.cursos,o=e.currentPrograms,l=e.polygons,i=e.mapChanged,s=e.updateMap,m=n.poligons.get(t);if(!m)return r.a.createElement(Ia,{error:"No hi ha cap zona amb el codi: ".concat(t),history:a});var u=m.tipus,d=m.nom,p=m.nomcurt,f=m.logo,g=m.cp,h=m.adreca,v=m.municipi,b=m.comarca,y=m.tel,w=m.fax,N=m.correu,C=m.web,k=m.centresInn,j=m.programes,O=Array.from(j).sort(function(e,a){return e.nom.localeCompare(a.nom)});return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(va.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio zona"},r.a.createElement(me.a,{className:"paper"},r.a.createElement("div",{className:"logo-nom-seccio"},f&&r.a.createElement("img",{className:"seccio-logo ".concat("ST"===u?"":"se-logo"),src:f,alt:d}),r.a.createElement("div",{className:"nom-seccio"},r.a.createElement(Q.a,{variant:"h4"},d))),r.a.createElement("div",{className:"adreca"},r.a.createElement("p",null,h,r.a.createElement("br",null),"".concat(g," ").concat(v," (").concat(b,")"),r.a.createElement("br",null),y&&r.a.createElement(r.a.Fragment,null,"Tel. ".concat(y),r.a.createElement("br",null)),w&&r.a.createElement(r.a.Fragment,null,"Fax. ".concat(w),r.a.createElement("br",null)))),r.a.createElement("div",{id:"info"},C&&r.a.createElement(ue.a,{variant:"contained",className:"info-btn",href:C,target:"_blank",rel:"noopener noreferrer",title:C},r.a.createElement(_a.a,{className:"left-icon"}),"Web"),N&&r.a.createElement(ue.a,{variant:"contained",className:"info-btn",href:"mailto:".concat(N),target:"_blank",rel:"noopener noreferrer",title:N},r.a.createElement(ka.a,{className:"left-icon"}),"Contacte")),r.a.createElement(Q.a,{variant:"h6"},"Programes amb pres\xe8ncia en aquest territori"),r.a.createElement("br",null),O.map(function(e,a){var t=e.allCentres.filter(function(e){return k.has(e)}),n=t.length;return r.a.createElement(ua.a,{key:a},r.a.createElement(da.a,{classes:{root:"small-padding-h",content:"zona-prog"},expandIcon:r.a.createElement(Ea.a,null)},r.a.createElement(E.b,{className:"zona-prog-logo",to:"/programa/".concat(e.id)},r.a.createElement(Ye.a,{src:"logos/mini/".concat(e.simbol),alt:e.nom})),r.a.createElement(Q.a,{className:"wider"},e.nom),r.a.createElement(Q.a,null,"".concat(n," centre").concat(1===n?"":"s"))),r.a.createElement(pa.a,{className:"small-padding-h"},r.a.createElement(ne.a,null,t.map(function(a,t){var n=a.id,c=a.nom,o=a.municipi,l=a.info,i=(a.allPrograms,l&&F(l[e.id])?null:"#/centre/".concat(n));return r.a.createElement(re.a,{key:t,button:!0,component:i?"a":"div",href:i,className:"small-padding-h"},r.a.createElement(ce.a,{primary:"".concat(c," (").concat(o,")"),secondary:l&&l[e.id]&&z(l[e.id],e.id,n)}))}))))}),r.a.createElement("br",null),r.a.createElement(ue.a,{variant:"contained",className:"csv-btn",title:"Descarrega la llista de programes i centres en format CSV",onClick:function(){return function(e,a,t){var n="".concat(window.location.origin).concat(window.location.pathname,"#"),r=e.reduce(function(e,t){var r=t.centres,c=t.info;return Object.keys(r).reduce(function(e,o){return r[o].filter(function(e){return a.has(e)}).forEach(function(a){var r=c&&c[a.id]&&c[a.id].find(function(e){return e.curs===o});e.push({centre:"".concat(a.nom," (").concat(a.municipi,")"),codi:a.id,curs:o,programa:t.nom,titol:r?r.titol:"",url:r?"".concat(n,"/projecte/").concat(t.id,"|").concat(a.id,"|").concat(r.num||0):""})}),e},e)},[]);return L("programes-".concat(t.trim().replace(/ /g,"_"),".csv"),r,[{name:"CODI",id:"codi"},{name:"CENTRE",id:"centre"},{name:"CURS",id:"curs"},{name:"PROGRAMA",id:"programa"},{name:"TITOL",id:"titol"},{name:"INFO",id:"url"}])}(O,k,p)}},r.a.createElement(Oa.a,{className:"left-icon"}),"CSV"))),r.a.createElement(Ve,{data:n,programa:null,centre:null,zona:t,cursos:c,currentPrograms:o,polygons:l,mapChanged:i,updateMap:s}))})},Ga=t(184),Ha=t.n(Ga),Ja="https://clic.xtec.cat/pub/logos/",Ya="https://clic.xtec.cat/pub/projectes/";var $a=function(e){var a=e.history,t=e.match.params.id,n=void 0===t?"":t;return r.a.createElement(q.Consumer,null,function(e){var t,c,o,l,s,m=e.data,u=e.currentPrjTab,d=e.updateMap,p=m.programes,f=m.centres,g=n.split("|"),h=Object(i.a)(g,3),v=h[0],b=h[1],y=h[2];if(!v||!b||!y||isNaN(l=Number(y))||!(t=p.get(v))||!(c=f.get(b))||!(o=t.info[b])||o.length<=l||!(s=o[l]))return r.a.createElement(Ia,{error:'No hi ha cap projecte amb el codi "'.concat(n,'"'),history:a});var w=s,N=w.titol,C=w.fitxa,k=w.video,j=w.curs,O=c,x=O.id,S=O.nom,M=O.municipi,P=O.logo,I=t,T=I.id,z=I.nom,F=I.simbol,A=!!C&&!!k;return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(va.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio projecte"},r.a.createElement(me.a,{className:"paper"},r.a.createElement(Q.a,{variant:"h4"},'Projecte "',N,'"'),r.a.createElement("div",{className:"info-proj"},r.a.createElement("img",{src:P?"".concat(/^http.?:\/\//.test(P)?"":Ja).concat(P):"logos/logo_".concat(S.startsWith("Escola")?"cole":"insti",".png"),alt:S}),r.a.createElement(Q.a,{variant:"h6"}," ",r.a.createElement(E.b,{to:"/centre/".concat(x)},S),r.a.createElement("br",null),M),r.a.createElement("img",{src:"logos/".concat(F),alt:z}),r.a.createElement(Q.a,{variant:"h6"}," ",r.a.createElement(E.b,{to:"/programa/".concat(T)},z),r.a.createElement("br",null),"Curs ",j)),r.a.createElement("div",{className:"proj-media"},A&&r.a.createElement(ia.a,{className:"proj-tabs",value:u,onChange:function(e,a){return d({currentPrjTab:a})},variant:"fullWidth"},r.a.createElement(sa.a,{label:"Video",icon:r.a.createElement(Ha.a,null)}),r.a.createElement(sa.a,{label:"Fitxa",icon:r.a.createElement(ya.a,null)})),k&&(!A||0===u)&&r.a.createElement(B,{className:"proj-video",title:"V\xeddeo del projecte",url:k}),C&&(!A||1===u)&&r.a.createElement("iframe",{className:"proj-pdf",title:"Fitxa del projecte",src:"".concat(/^https?:\/\//.test(C)?"":Ya).concat(C),width:"100%",height:"100%",type:"application/pdf",allowFullScreen:!0})))))})},Qa=t(426);var Xa=function(){return r.a.createElement("div",{className:"err-msg"},r.a.createElement(Q.a,null,"S'estan carregant les dades..."),r.a.createElement(Qa.a,{className:"progress"}))},Ka=t(69);var et=function(){return r.a.createElement("footer",null,r.a.createElement("div",{className:"footer-content"},r.a.createElement("a",{className:"logo-gencat",href:"https://web.gencat.cat/",title:"Generalitat de Catalunya",target:"_top"},"gencat.cat"),r.a.createElement(Q.a,{variant:"body2",className:"copyright"},r.a.createElement("a",{href:"https://innovacio.xtec.cat/"},Ka.c," v",Ka.d),r.a.createElement("br",null),r.a.createElement("a",{href:"http://www.xtec.cat"},"\xa9 2019 Departament d'Educaci\xf3 de la Generalitat de Catalunya"),r.a.createElement("br",null),r.a.createElement("a",{href:"https://spdx.org/licenses/".concat(Ka.a,".html")},"Llic\xe8ncia P\xfablica de la Uni\xf3 Europea ",Ka.a),r.a.createElement("br",null),r.a.createElement("a",{href:Ka.b.url},Ka.b.url),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("strong",null,"B\xfastia de contacte"),": ",r.a.createElement("a",{href:"mailto:innovacio@xtec.cat"},"innovacio@xtec.cat"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("a",{href:"https://web.gencat.cat/ca/menu-ajuda/ajuda/avis_legal/"},r.a.createElement("strong",null,"Av\xeds legal")),": D\u2019acord amb l\u2019article 17.1 de la Llei 19/2014, la \xa9Generalitat de Catalunya permet la reutilitzaci\xf3 dels continguts i de les dades sempre que se'n citi la font i la data d'actualitzaci\xf3 i que no es desnaturalitzi la informaci\xf3 (article 8 de la Llei 37/2007) i tamb\xe9 que no es contradigui amb una llic\xe8ncia espec\xedfica.")))},at=t(431),tt=t(185),nt=t.n(tt),rt=t(186),ct=t.n(rt),ot=Number("25");var lt=function(e){var a=e.history,t=e.match.params.query,n=void 0===t?"":t;n=n.trim();var c=r.a.useState(0),o=Object(i.a)(c,2),l=o[0],s=o[1],m=r.a.useState(ot),u=Object(i.a)(m,2),d=u[0],p=u[1],f=r.a.useState([]),g=Object(i.a)(f,2),E=g[0],h=g[1],v=r.a.useState(""),b=Object(i.a)(v,2),y=b[0],w=b[1];return r.a.createElement(q.Consumer,null,function(e){var t=e.fuseFuncs;n!==y&&(w(n),h(t.reduce(function(e,a){return e.concat(a.search(n))},[])));var c=function(e,t){return function(n){a.push("/".concat(e,"/").concat(t))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(ue.a,{className:"torna","aria-label":"Torna",onClick:function(){return a.goBack()}},r.a.createElement(va.a,{className:"left-icon"}),"Torna"),r.a.createElement("section",{className:"seccio cerca"},r.a.createElement(me.a,{className:"paper"},r.a.createElement("h2",null,'Resultats de la cerca "',y,'"'),0===E.length&&r.a.createElement("p",null,"No s'ha trobat cap element co\xefncident amb el criteri de cerca!")||r.a.createElement("div",null,r.a.createElement(ne.a,{component:"ul"},E.slice(l*d,(l+1)*d).map(function(e,a){var t=e.item,n=t.nom,o=t.id,l=t.tipus,i=t.simbol;return r.a.createElement(re.a,{key:a,button:!0,onClick:c(l,o)},r.a.createElement(oe.a,null,i?r.a.createElement(Ye.a,{src:"logos/mini/".concat(i),alt:n}):"programa"===l?r.a.createElement(nt.a,null):r.a.createElement(ct.a,null)),r.a.createElement(ce.a,{primary:n}))})),r.a.createElement("hr",null),r.a.createElement(at.a,{classes:{spacer:"hidden",toolbar:"wrap"},component:"nav",page:l,rowsPerPage:d,onChangeRowsPerPage:function(e){return p(e.target.value)},count:E.length,onChangePage:function(e,a){return s(a)},labelDisplayedRows:function(e){var a=e.from,t=e.to,n=e.count;return"Resultats ".concat(a," al ").concat(t," de ").concat(n)},labelRowsPerPage:"Resultats per p\xe0gina:"})))))})},it=Object(C.a)(Object(k.a)({palette:{primary:{main:"#333"},secondary:{main:"#c00000"},error:{main:"#f44336"}},typography:{fontFamily:'"Open Sans", Roboto, "Helvetica Neue", Arial, sans-serif'},overrides:{MuiStepIcon:{completed:{color:"#c00000 !important"}}}}));y.a.initialize("UA-140680188-1");var st=function(e){function a(){var e;return Object(m.a)(this,a),(e=Object(d.a)(this,Object(p.a)(a).call(this))).menuItems=[{id:"presenta",name:"Presentaci\xf3",path:"/"},{id:"programes",name:"Programes",path:"/programes"},{id:"projectes",name:"Projectes",path:"/programa/1001"}],e.state=Object(s.a)({},_,{updateMap:e.updateMap.bind(Object(f.a)(e)),fuseFuncs:[],menuItems:e.menuItems}),e.firstView=!0,e}return Object(g.a)(a,e),Object(u.a)(a,[{key:"setStateMod",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.setState(e,function(){a&&a()})}},{key:"loadData",value:function(){var e=this;return this.setStateMod({loading:!0}),Promise.all(["data/programes.json","data/instancies.json","data/centres.json","data/poligons.json","data/estudis.json"].map(function(e){return fetch(e,{method:"GET",credentials:"same-origin"}).then(P).then(function(e){return e.json()})})).then(function(a){var t=Object(i.a)(a,5),n=t[0],r=t[1],c=t[2],o=t[3],m=t[4];c.forEach(function(e){e.programes={},e.allPrograms=new Set,e.notCert=new Set}),o.forEach(function(e){e.poligons=e.poligons.map(function(e){return e.split(",").map(function(e){return e.split("|").map(function(e){return Number(e)})})}),e.centresInn=new Set,e.programes=new Set,e.density="0.000001",e.estudisBase={},e.estudisPart={},e.centresPart=new Set});var u=new Set;n.forEach(function(e){u.add(e.id),e.centres={},e.allCentres=new Set});var d=new Map(c.map(function(e){return[e.id,e]})),p=new Map(n.map(function(e){return[e.id,e]})),f=new Map(o.map(function(e){return[e.key,e]}));r.forEach(function(e){var a=e.programa,t=e.centre,n=e.curs,r=e.titol,c=e.cert,o=e.fitxa,l=e.video,i=p.get(a),s=d.get(t);if(i&&s){if((i.centres[n]=i.centres[n]||[]).push(s),i.allCentres.add(s),(s.programes[n]=s.programes[n]||[]).push(i),s.allPrograms.add(i),s.sstt){var m=f.get(s.sstt);m.centresInn.add(s),m.programes.add(i)}if(s.se){var u=f.get(s.se);u.centresInn.add(s),u.programes.add(i)}if(r){var g={titol:r,curs:n};o&&(g.fitxa=o),l&&(g.video=l),i.info||(i.info={}),i.info[s.id]||(i.info[s.id]=[]),i.info[s.id].push(g),s.info||(s.info={}),s.info[i.id]||(s.info[i.id]=[]),s.info[i.id].push(g)}c||s.notCert.add("".concat(a,"|").concat(n))}else console.log("WARNING: Inst\xe0ncia amb programa o centre desconegut: ".concat(a," - ").concat(t," - ").concat(n))}),d.forEach(function(e){e.allPrograms=Array.from(e.allPrograms).sort(function(e,a){return e.nom.localeCompare(a.nom)})}),p.forEach(function(e){e.allCentres=Array.from(e.allCentres).sort(function(e,a){return e.nom.localeCompare(a.nom)})});var g={caseSensitive:!1,shouldSort:!0,tokenize:!0,matchAllTokens:!0,includeScore:!0,includeMatches:!0,threshold:.3,location:0,distance:4,maxPatternLength:32,minMatchCharLength:2},E=[new O.a(n.map(function(e){var a=e.id,t=e.nom,n=e.simbol,r=e.descripcio,c=e.info,o=e.ambCurr,l=e.ambInn,i=e.arees,s=e.objectius,u=e.requisits,d=e.compromisos,p=e.contacte,f=e.normativa;return{id:a,nom:t,simbol:n,descripcio:r,info:c?Object.values(c).map(function(e){return e.map(function(e){return e.titol})}).join(", "):"",ambCurr:o.map(function(e){return m.ambitsCurr[e]}).join(", "),ambInn:l.map(function(e){return m.ambitsInn[e]}).join(", "),arees:i.join(", "),objectius:s,requisits:u,compromisos:d,contacte:p,normativa:f,tipus:"programa"}}),Object(s.a)({},g,{keys:["id","nom","descripcio","info","ambCurr","ambInn","arees","objectius","requisits","compromisos","contacte","normativa"]})),new O.a(c.map(function(e){var a=e.id,t=e.nom,n=e.municipi,r=e.comarca,c=e.info;return{id:a,nom:"".concat(t," (").concat(n,")"),comarca:r,info:c?Object.values(c).map(function(e){return e.map(function(e){return e.titol})}).join(", "):"",tipus:"centre"}}),Object(s.a)({},g,{keys:["id","nom","comarca","info"]}))],h=Object(s.a)({},e.state.data,{programes:p,centres:d,poligons:f,estudis:new Map(Object.entries(m.estudis)),nivells:new Map(Object.entries(m.nivells)),ambitsCurr:new Map(Object.entries(m.ambitsCurr)),ambitsInn:new Map(Object.entries(m.ambitsInn)),cursosDisp:m.cursos});e.setStateMod({data:h,dataLoaded:!0,polygons:[{name:"Serveis Territorials",shapes:o.filter(function(e){return"ST"===e.tipus})},{name:"Serveis Educatius de Zona",shapes:o.filter(function(e){return"SEZ"===e.tipus})}],cursos:Object(l.a)(h.cursosDisp),fuseFuncs:E,currentPrograms:u,loading:!1,error:!1})}).catch(function(a){console.log(a),e.setStateMod({error:a.toString()})})}},{key:"checkTabMode",value:function(){var e=window.matchMedia("(max-width: 840px)").matches;return this.state.tabMode!==e&&this.updateMap({tabMode:e}),e}},{key:"componentDidMount",value:function(){var e=this;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Roboto",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"300,400,500,600",t=document.createElement("link");t.href="https://fonts.googleapis.com/css?family=".concat(e,":").concat(a),t.rel="stylesheet",document.head.appendChild(t),new S.a(e).load().then(function(){return document.documentElement.classList.add(e.replace(" ","-").toLowerCase())}).catch(function(a){return console.error("Unable to load ".concat(e," font due to: ").concat(a))})}("Open Sans"),this.loadData().then(function(){e.checkTabMode(),window.addEventListener("resize",e.checkTabMode.bind(e)),window.setTimeout(function(){e.checkForLayerUpdate(window.location.hash?window.location.hash.substr(1):"/")},0)})}},{key:"updateMap",value:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.setStateMod(Object(s.a)({},a,{mapChanged:t,currentProgramsChanged:n}),r),window.requestAnimationFrame(function(){n&&e.updateLayersDensity(e.state.programa?new Set([e.state.programa]):e.state.currentPrograms,e.state.cursos),t&&window.setTimeout(function(){return e.setStateMod({mapChanged:!1})},0)})}},{key:"contentUpdated",value:function(e,a){var t=e.location.pathname!==a.location.pathname;(t||this.firstView)&&(this.firstView=!1,y.a.pageview(e.location.pathname)),t&&(this.checkForLayerUpdate(e.location.pathname),window.scrollTo(0,0))}},{key:"checkForLayerUpdate",value:function(e){if(/^\/(programes|programa\/|centre\/|zona\/)/.test(e)){var a=/^\/programa\/(.*)$/.exec(e),t=a&&2===a.length?a[1]:null;this.updateMap({programa:t},!0,!0)}}},{key:"updateLayersDensity",value:function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.data,n=t.poligons,r=t.programes;n.forEach(function(e){e.density="0.000001",e.estudisBase={},e.estudisPart={},e.centresPart=new Set});var c={};e.forEach(function(e){var t=r.get(e);t&&t.tipus.length&&Object.keys(t.centres).length&&(t.tipus.forEach(function(e){n.forEach(function(a){a.estudisBase[e]=a.centres[e]||0})}),Object.keys(t.centres).forEach(function(e){a&&!a.includes(e)||t.centres[e].forEach(function(e){c[e.id]=e})}))}),Object.values(c).forEach(function(e){var a=n.get(e.sstt),t=n.get(e.se);e.estudis.forEach(function(n){a&&a.estudisBase[n]&&(a.estudisPart[n]=a.estudisPart[n]?a.estudisPart[n]+1:1,a.centresPart.add(e.id)),t&&t.estudisBase[n]&&(t.estudisPart[n]=t.estudisPart[n]?t.estudisPart[n]+1:1,t.centresPart.add(e.id))})});var o=0,l=0;n.forEach(function(e){var a=0,t=0;Object.keys(e.estudisBase).forEach(function(n){e.estudisBase[n]&&(a+=e.estudisPart[n]||0,t+=e.estudisBase[n])}),t>0&&(e.density=Math.max("0.000001",a/t),"ST"===e.tipus?o=Math.max(o,e.density):l=Math.max(l,e.density))});var i=o>"0.000001"&&o<"0.4"?"0.4"/o:o>"0.8"?"0.8"/o:1,s=l>"0.000001"&&l<"0.4"?"0.4"/l:l>"0.8"?"0.8"/l:1;n.forEach(function(e){return e.density*="ST"===e.tipus?i:s})}},{key:"render",value:function(){var e=this.state,a=e.error,t=e.loading;return r.a.createElement(E.a,{basename:window.location.pathname},r.a.createElement(N.a,{theme:it},r.a.createElement(w.a,null,r.a.createElement(q.Provider,{value:this.state},r.a.createElement(b,{updateHandler:this.contentUpdated.bind(this)},r.a.createElement(le,null),r.a.createElement("div",{className:"filler"}),r.a.createElement("main",null,t&&r.a.createElement(Xa,null)||a&&r.a.createElement(Ia,{error:a,refetch:this.loadData.bind(this)})||r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",component:fe}),r.a.createElement(h.b,{path:"/programes",component:ma}),r.a.createElement(h.b,{path:"/centre/:codi",component:Za}),r.a.createElement(h.b,{path:"/programa/:id",component:La}),r.a.createElement(h.b,{path:"/projecte/:id",component:$a}),r.a.createElement(h.b,{path:"/zona/:key",component:Va}),r.a.createElement(h.b,{path:"/cerca/:query",component:lt}),r.a.createElement(h.a,{to:"/"}))),r.a.createElement(et,null))))))}}]),a}(n.Component);st.contextType=q;var mt=st,ut=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function dt(e,a){return navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;null!=t&&(t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),a&&a.onUpdate&&a.onUpdate(e)):(console.log("Content is cached for offline use."),a&&a.onSuccess&&a.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(r.a.createElement(mt,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var a="".concat(".","/service-worker.js").concat(window.location.search.indexOf("debug")>=0?"?debug":"");ut?(function(e,a){fetch(e).then(function(t){var n=t.headers.get("content-type");404===t.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):dt(e,a)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(a,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")})):dt(a,e)})}}()},69:function(e){e.exports={c:"Mapa de la innovaci\xf3 pedag\xf2gica de Catalunya",d:"1.1.1",b:{type:"git",url:"https://github.com/projectestac/mapa-innovacio-edu"},a:"EUPL-1.2"}}},[[208,1,2]]]);
//# sourceMappingURL=main.fe07a40f.chunk.js.map