(this["webpackJsonpwp-show"]=this["webpackJsonpwp-show"]||[]).push([[0],{138:function(e,t,a){},139:function(e,t,a){},232:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),c=a(12),r=a.n(c),o=(a(138),a(51)),i=a(15),l=a(23),d=(a(139),a(82)),u=a(109),g=a(57);d.a.use(u.a).use(g.e).init({detection:{order:["querystring","localStorage","navigator"]},resources:{en:{translation:{title:"Carousel of WordPress posts and pages",desc1:"This app displays a carousel of posts and pages of any website running with WordPress, like XTEC-Blocs or \xc0gora-Nodes.",desc2:"Enter the main URL of the website to show, wait for data loading (can be long!) and adjust parameters like time range, categories, labels or pages to be shown. You can also check or uncheck each post or page individually to indicate if they must be included on the carousel.",desc3:"Once you have selected the desired content, indicate the time lapse to wait between pages, and if you want to show the pages randomly or ordered by date of publication.",desc4:'Finally, click on "Create an HTML file" to obtain an autonomous file ready to be opened at any moment, or on "Start show" to see the pages automatically appearing on the main window. Use F11 if you want to display this main window at full screen size.',url:"Site URL",connect:"Connect",error:"Error",loading:"Loading site data...",date_range:"Date range for posts",initial_date:"Initial date",end_date:"End date",first_date:"Date of first post is:",date_err1:"Error: The start date must be before or equal to the end date",categories:"Categories",categories_select_all:"Select all categories",categories_selected:"selected categories",tags:"Tags",tags_select_all:"Select all tags",tags_selected:"selected tags",posts:"Posts",posts_select_all:"Select all posts",posts_selected:"selected posts",pages:"Pages",pages_select_all:"Select all pages",pages_selected:"selected pages",show_options:"Show options",selected_elements:"You have selected {{count}} item to display.",selected_elements_plural:"You have selected {{count}} items to display.",timelapse:"Time between pages",seconds:"seconds",random:"Show pages and posts in random order",include_category_pages:"Include category pages (courses, groups, sections...)",include_tag_pages:"Include tag pages (projects, activities, campaigns...)",start:"Start showing",export:"Create an HTML file",copyright:"\xa9 2019 Catalonia's Education Telematic Network (XTEC)",license:"European Union Public License"}},ca:{translation:{title:"Carrusel d'articles i p\xe0gines WordPress",desc1:"Aquesta aplicaci\xf3 permet mostrar de manera autom\xe0tica el contingut d'un lloc web que funcioni amb WordPress, com ara XTEC-Blocs o \xc0gora-Nodes.",desc2:"Introdu\xefu l'URL del lloc web que vulgueu mostrar, espereu que es carreguin les dades (pot trigar!) i seleccioneu par\xe0metres com ara el rang de dates, les categories, etiquetes o p\xe0gines que vulgueu mostrar. Tamb\xe9 podeu marcar i desmarcar individualment cada un dels articles i p\xe0gines per indicar si han d'apar\xe8ixer al carrusel.",desc3:"Un cop seleccionat el contingut a mostrar indiqueu el temps d'espera entre una p\xe0gina i la seg\xfcent, aix\xed com si voleu que es mostrin les p\xe0gines a l'atzar o b\xe9 ordenades per data de publicaci\xf3.",desc4:'Finalment, feu clic al bot\xf3 "Crea un fitxer HTML" per obtenir un fitxer aut\xf2nom que podreu obrir en qualsevol moment, o a "Inicia la presentaci\xf3" per veure com les p\xe0gines es van mostrant de manera autom\xe0tica a la finestra principal, que podeu posar en mode de pantalla completa amb la tecla F11.',url:"URL del lloc web",connect:"Connecta",error:"Error",loading:"S'estan descarregant les dades del lloc...",date_range:"Interval de dates per als articles",initial_date:"Data inicial",end_date:"Data final",first_date:"La data del primer article \xe9s:",date_err1:"Error: La data inicial ha de ser anterior o igual a la final",categories:"Categories",categories_select_all:"Selecciona totes les categories",categories_selected:"categories seleccionades",tags:"Etiquetes",tags_select_all:"Selecciona totes les etiquetes",tags_selected:"etiquetes seleccionades",posts:"Articles",posts_select_all:"Selecciona tots els articles",posts_selected:"articles seleccionats",pages:"P\xe0gines",pages_select_all:"Selecciona totes les p\xe0gines",pages_selected:"p\xe0gines seleccionades",show_options:"Presentaci\xf3",selected_elements:"Heu seleccionat {{count}} element per mostrar.",selected_elements_plural:"Heu seleccionat {{count}} elements per mostrar.",timelapse:"Temps entre p\xe0gines",seconds:"segons",random:"Mostra les p\xe0gines i els articles en ordre aleatori",include_category_pages:"Mostra les p\xe0gines de les categories (cursos, grups, seccions...)",include_tag_pages:"Mostra les p\xe0gines de les etiquetes (projectes, activitats, campanyes...)",start:"Inicia la visualitzaci\xf3",export:"Crea un fitxer HTML",copyright:"\xa9 2019 Xarxa Telem\xe0tica Educativa de Catalunya (XTEC)",license:"Llic\xe8ncia P\xfablica de la Uni\xf3 Europea"}},es:{translation:{title:"Carrusel de art\xedculos y p\xe1ginas WordPress",desc1:"Esta aplicaci\xf3n permite mostrar de manera autom\xe1tica el conmtenido de un sitio web WordPress, como XTEC-Blocs o \xc0gora-Nodes.",desc2:"Introduzca el URL del sitio que desee mostrar, espere a que se carguen los datos (puede tardar bastante!) y seleccione par\xe1metros como el periodo de tiempo, las categor\xedas, etiquetas o p\xe1ginas que desee mostrar. Tambi\xe9n puede marcar y desmarcar individualmente cada uno de los art\xedculos y p\xe1ginas para indicar si deben aparecer o no en el carrusel.",desc3:"Cuando haya seleccionado el contenido a mostrar indique el tiempo de espera entre una p\xe1gina y la sig\xfciente, as\xed como si desea que se muestren las p\xe1ginas al azar o bien ordenadas por fecha de publicaci\xf3n.",desc4:'Finalmente, haga clic en el bot\xf3n "Crear un archivo HTML" para obtener un archivo aut\xf3nomo que podr\xe1 abrir en cualquier momento, o en "Iniciar la presentaci\xf3n" para ver como las p\xe1ginas se van mostrando de manera autom\xe1tica en la ventana principal, que puede poner en modo de pantalla completa usando la tecla F11.',url:"URL del sitio web",connect:"Conectar",error:"Error",loading:"Se est\xe1n descargando los datos del sitio...",date_range:"Intervalo de fechas para los art\xedculos",initial_date:"Fecha inicial",end_date:"Fecha final",first_date:"La fecha del primer art\xedculo es:",date_err1:"Error: La fecha inicial debe ser anterior o igual a la final",categories:"Categor\xedas",categories_select_all:"Seleccionar todas las categor\xedas",categories_selected:"categor\xedas seleccionadas",tags:"Etiquetas",tags_select_all:"Seleccionar todas las etiquetas",tags_selected:"etiquetas seleccionadas",posts:"Art\xedculos",posts_select_all:"Seleccionar todos los art\xedculos",posts_selected:"art\xedculos seleccionados",pages:"P\xe1ginas",pages_select_all:"Seleccionar todas las p\xe1ginas",pages_selected:"p\xe1ginas seleccionadas",show_options:"Presentaci\xf3n",selected_elements:"Ha seleccionado {{count}} elemento para mostrar.",selected_elements_plural:"Ha seleccionado {{count}} elementos para mostrar.",timelapse:"Tiempo entre p\xe1ginas",seconds:"segundos",random:"Muestra las p\xe1ginas y los art\xedculos en orden aleatorio",include_category_pages:"Muestra las p\xe1ginas de categor\xedas (cursos, grupos, secciones...)",include_tag_pages:"Muestra las p\xe1ginas de etiquetas (proyectos, actividades, campa\xf1as...)",start:"Iniciar la visualizaci\xf3n",export:"Crear un archivo HTML",copyright:"\xa9 2019 Red Telem\xe1tica Educativa de Catalu\xf1a (XTEC)",license:"Licencia P\xfablica de la Uni\xf3n Europea"}}},fallbackLng:"en",interpolation:{escapeValue:!1}});var p=d.a,m=a(274),f=a(112),j=a.n(f),h=a(2);var b=function(e){var t=e.urls,a=e.interval,s=Object(n.useState)(0),c=Object(l.a)(s,2),r=c[0],o=c[1];return window.setTimeout((function(){o((r+1)%t.length)}),1e3*a),Object(h.jsx)("div",{className:"fullFrame",children:Object(h.jsx)("iframe",{className:"pageView",name:"view",title:"Page view",allowFullScreen:!0,src:t[r],onLoad:function(){return window.scrollTo(0,0)},children:Object(h.jsx)("p",{children:"Your browser does not support iframes!"})})})},O=a(44),v=a(115),x=a.n(v),y=a(271),_=a(265),w=a(266),C=a(257);var P=function(e){var t=e.t;return Object(h.jsxs)("div",{className:"waiting",children:[Object(h.jsx)("h4",{children:t("loading")}),Object(h.jsx)(C.a,{className:"wheel"})]})},S=a(262),T=a(263),E=a(264),L=a(261),k=a(273),N=a(52);var q=function(e){var t=e.conf.categories,a=e.selectPostsByDateAndCategory,n=e.t,c=s.a.useState(!1),r=Object(l.a)(c,2),o=r[0],i=r[1];return Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:n("categories")}),Object(h.jsx)(L.a,{control:Object(h.jsx)(k.a,{checked:o,onChange:function(){t.forEach((function(e){e.selected=!o})),a(),i(!o)}}),label:n("categories_select_all")}),Object(h.jsx)(S.a,{className:"catList",component:"nav",children:t.map((function(e,t){return Object(h.jsx)(T.a,{selected:e.selected,onClick:(n=e,function(){n.selected=!n.selected,n.selected||i(!1),a()}),children:Object(h.jsx)(E.a,{children:Object(h.jsx)("span",{dangerouslySetInnerHTML:{__html:e.name}})})},t);var n}))}),Object(h.jsxs)(N.a,{variant:"body2",children:[t.filter((function(e){return e.selected})).length,"/",t.length," ",n("categories_selected")]})]})};var D=function(e){var t=e.conf.tags,a=e.selectPostsByDateAndCategory,n=e.t,c=s.a.useState(!1),r=Object(l.a)(c,2),o=r[0],i=r[1],d=function(e){return function(){e.selected=!e.selected,e.selected||i(!1),a()}};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:n("tags")}),Object(h.jsx)(L.a,{control:Object(h.jsx)(k.a,{checked:o,onChange:function(){t.forEach((function(e){e.selected=!o})),a(),i(!o)}}),label:n("tags_select_all")}),Object(h.jsx)(S.a,{className:"catList",component:"nav",children:t.map((function(e,t){return Object(h.jsx)(T.a,{selected:e.selected,onClick:d(e),children:Object(h.jsx)(E.a,{children:Object(h.jsx)("span",{dangerouslySetInnerHTML:{__html:e.name}})})},t)}))}),Object(h.jsxs)(N.a,{variant:"body2",children:[t.filter((function(e){return e.selected})).length,"/",t.length," ",n("tags_selected")]})]})};var U=function(e){var t=e.conf.posts,a=e.countUrls,n=e.t,c=s.a.useState(!1),r=Object(l.a)(c,2),o=r[0],i=r[1],d=function(e){return function(){e.selected=!e.selected,e.selected||i(!1),a()}};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:n("posts")}),Object(h.jsx)(L.a,{control:Object(h.jsx)(k.a,{checked:o,onChange:function(){t.forEach((function(e){e.selected=!o})),a(),i(!o)}}),label:n("posts_select_all")}),Object(h.jsx)(S.a,{component:"nav",className:"postList",children:t.filter((function(e){return e.inRange})).map((function(e,t){return Object(h.jsx)(T.a,{selected:e.selected,onClick:d(e),children:Object(h.jsx)(E.a,{primary:Object(h.jsx)("span",{dangerouslySetInnerHTML:{__html:e.title.rendered}}),secondary:e.modified.toLocaleString()})},t)}))}),Object(h.jsxs)(N.a,{variant:"body2",children:[t.filter((function(e){return e.selected})).length,"/",t.filter((function(e){return e.inRange})).length," ",n("posts_selected")]})]})};var F=function(e){var t=e.conf.pages,a=e.countUrls,n=e.t,c=s.a.useState(!1),r=Object(l.a)(c,2),o=r[0],i=r[1],d=function(e){return function(){e.selected=!e.selected,e.selected||i(!1),a()}};return Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:n("pages")}),Object(h.jsx)(L.a,{control:Object(h.jsx)(k.a,{checked:o,onChange:function(){t.forEach((function(e){e.selected=!o})),a(),i(!o)}}),label:n("pages_select_all")}),Object(h.jsx)(S.a,{className:"pagesList",component:"nav",children:t.filter((function(e){return e.inRange})).map((function(e,t){return Object(h.jsx)(T.a,{selected:e.selected,onClick:d(e),children:Object(h.jsx)(E.a,{primary:Object(h.jsx)("span",{dangerouslySetInnerHTML:{__html:e.title.rendered}}),secondary:e.modified.toLocaleString()})},t)}))}),Object(h.jsxs)(N.a,{variant:"body2",children:[t.filter((function(e){return e.inRange&&e.selected})).length,"/",t.filter((function(e){return e.inRange})).length," ",n("pages_selected")]})]})},I=a(46),M=a.n(I),R=a(114),A=(a(146),a(147),a(19)),B=a(269);var H=function(e){var t=e.conf,a=e.setConf,n=e.selectPostsByDateAndCategory,s=e.t,c=e.i18n,r=t.dateFrom,o=t.dateTo,l=t.dateFirst,d=function(e){return function(c){var l="from"===e?c.toDate():r,d="to"===e?c.toDate():o;l>d?a(Object(i.a)(Object(i.a)({},t),{},{err:s("date_err1")})):n(l,d)}};return Object(h.jsx)(A.a,{libInstance:M.a,utils:R.a,locale:c.language,children:Object(h.jsxs)("div",{children:[Object(h.jsx)("h3",{children:s("date_range")}),Object(h.jsx)(B.a,{className:"date",label:s("initial_date"),format:"DD/MM/yyyy",value:t.dateFrom,onChange:d("from")}),Object(h.jsx)(B.a,{className:"date",label:s("end_date"),format:"DD/MM/yyyy",value:t.dateTo,onChange:d("to")}),Object(h.jsxs)("p",{className:"dateFirstNote",children:[s("first_date")," ",l.toLocaleDateString()]})]})})},W=a(267),X=a(268);var z=function(e){var t=e.conf,a=e.setConf,n=e.t,s=function(e){a(Object(i.a)(Object(i.a)({},t),{},Object(O.a)({},e.target.id,!0===e.target.checked)))};return Object(h.jsxs)("div",{className:"options",children:[Object(h.jsx)("h3",{children:n("show_options")}),Object(h.jsx)("p",{children:n("selected_elements",{count:t.numUrls})}),Object(h.jsx)(y.a,{id:"interval",label:n("timelapse"),className:"intervalInput",variant:"outlined",type:"number",value:t.interval,InputLabelProps:{shrink:!0},onChange:function(e){var n=e.target.value;n>0&&n<100&&a(Object(i.a)(Object(i.a)({},t),{},Object(O.a)({},e.target.id,n)))},InputProps:{endAdornment:Object(h.jsx)(W.a,{position:"end",children:n("seconds")})}}),Object(h.jsx)(L.a,{control:Object(h.jsx)(X.a,{id:"randomOrder",checked:t.randomOrder,onChange:s}),label:n("random")}),Object(h.jsx)(L.a,{control:Object(h.jsx)(X.a,{id:"includeCategoryPages",checked:t.includeCategoryPages,onChange:s}),label:n("include_category_pages")}),Object(h.jsx)(L.a,{control:Object(h.jsx)(X.a,{id:"includeTagPages",checked:t.includeTagPages,onChange:s}),label:n("include_tag_pages")})]})};var J=function(e){var t=e.conf,a=e.setConf,n=e.checkSite,s=e.selectPostsByDateAndCategory,c=e.countUrls,r=e.t,o=e.i18n;return Object(h.jsxs)(_.a,{className:"main",children:[Object(h.jsxs)("div",{className:"sitePrompt",children:[Object(h.jsx)(y.a,{id:"wpSite",label:r("url"),value:t.wpSite,onChange:function(e){return a(Object(i.a)(Object(i.a)({},t),{},Object(O.a)({},e.target.id,e.target.value)))},margin:"normal"}),Object(h.jsx)(w.a,{variant:"contained",color:"primary",onClick:n,disabled:!x.a.isURL(t.wpSite),children:r("connect")})]}),t.loading&&Object(h.jsx)(P,{t:r}),t.err&&Object(h.jsx)("p",{className:"error",children:"".concat(r("error"),": ").concat(t.err)}),t.posts&&Object(h.jsx)(H,{conf:t,setConf:a,selectPostsByDateAndCategory:s,t:r,i18n:o}),t.categories&&Object(h.jsx)(q,{conf:t,setConf:a,selectPostsByDateAndCategory:s,t:r}),t.tags&&Object(h.jsx)(D,{conf:t,setConf:a,selectPostsByDateAndCategory:s,t:r}),t.posts&&Object(h.jsx)(U,{conf:t,countUrls:c,t:r}),t.pages&&Object(h.jsx)(F,{conf:t,countUrls:c,t:r}),t.categories&&Object(h.jsx)(z,{conf:t,setConf:a,t:r})]})};var Y=function(e){var t=e.t,a=e.i18n;function n(e){var t=e.language,n=e.code;return Object(h.jsx)("li",{onClick:function(){return a.changeLanguage(n)},className:n===a.language?"curLang":"",title:t,children:n})}return Object(h.jsxs)("header",{className:"head",children:[Object(h.jsx)("nav",{className:"langSelector",children:Object(h.jsxs)("ul",{children:[Object(h.jsx)(n,{language:"catal\xe0",code:"ca"}),Object(h.jsx)(n,{language:"espa\xf1ol",code:"es"}),Object(h.jsx)(n,{language:"English",code:"en"})]})}),Object(h.jsxs)("h2",{children:[Object(h.jsx)("img",{src:"ico/icon64.png",alt:"Logotip",className:"logo"}),t("title")]}),Object(h.jsx)("p",{children:t("desc1")}),Object(h.jsx)("p",{children:t("desc2")}),Object(h.jsx)("p",{children:t("desc3")}),Object(h.jsx)("p",{children:t("desc4")})]})},V=a(117),G=a.n(V),K=a(116),Q=a.n(K);var Z=function(e){var t=e.conf,a=e.saveSettings,n=e.i18n,s=e.t,c=e.getUrls,r=e.setPlaying;return Object(h.jsxs)("div",{className:"playBtn",children:[Object(h.jsxs)(w.a,{variant:"contained",color:"primary",onClick:function(){a();var e="show.html",s='<!DOCTYPE html>\n<html lang="'.concat(n.language,'">\n<head>\n  <meta charset="utf-8" />\n  <title>Page Carousel</title>\n  <meta name="description" content="Generated with WP-Show"/>\n  <meta name="url" content="http://projectestac.github.io/wpshow/"/>\n</head>\n<body style="padding:0;margin:0">\n  <div style="width:100%;height:100vh;margin:0;padding:0;overflow:hidden;">\n    <iframe src="" style="width:100%;height:100%;" name="view" title="Page view" allowFullScreen="true"\n      onLoad="window.scrollTo(0, 0)">\n      <p>Your browser does not support iframes!</p>\n    </iframe>\n  </div>\n  <script>\n    const urls = ').concat(JSON.stringify(c()).replace(/","/g,'",\n      "'),";\n    const interval = ").concat(t.interval,";\n    let currentPage = 0;\n    const iframe = document.querySelector('iframe');\n    iframe.setAttribute('src', urls[0]);\n    window.setInterval(() => {\n      currentPage = (currentPage + 1) % urls.length;\n      iframe.setAttribute('src', urls[currentPage]);\n    }, interval * 1000);\n  <\/script>\n</body>\n</html>"),r=new Blob([s],{type:"text/html;charset=utf-8;"});if(navigator.msSaveBlob)navigator.msSaveBlob(r,e);else{var o=document.createElement("a");if(void 0!==o.download){var i=URL.createObjectURL(r);o.setAttribute("href",i),o.setAttribute("download",e),o.style.visibility="hidden",document.body.appendChild(o),o.click(),document.body.removeChild(o)}}},disabled:0===t.numUrls,children:[s("export"),Object(h.jsx)(Q.a,{className:"leftIcon"})]}),Object(h.jsxs)(w.a,{variant:"contained",color:"primary",onClick:function(){a(),r(!0)},disabled:0===t.numUrls,children:[s("start"),Object(h.jsx)(G.a,{className:"leftIcon"})]})]})},$=a(41);var ee=function(e){var t=e.t;return Object(h.jsx)("footer",{className:"foot",children:Object(h.jsxs)("p",{children:[Object(h.jsxs)("a",{href:$.b.url,children:[$.c," v",$.d]}),Object(h.jsx)("br",{}),Object(h.jsx)("a",{href:"http://www.xtec.cat",children:t("copyright")}),Object(h.jsx)("br",{}),Object(h.jsxs)("a",{href:"https://spdx.org/licenses/".concat($.a,".html"),children:[t("license")," ",$.a]}),Object(h.jsx)("br",{}),Object(h.jsx)("a",{href:$.b.url,children:$.b.url})]})})},te=JSON.parse(localStorage.getItem("wpShow")||"{}");var ae=function(){var e=Object(m.a)().t,t=Object(n.useState)({wpSite:te.wpSite||"",interval:te.interval||10,ready:!1,err:null,loading:!1,categories:null,tags:null,pages:null,posts:null,dateFrom:new Date(te.from||Date.now()),dateTo:new Date(te.to||Date.now()),dateFirst:new Date,includeCategoryPages:!(!1===te.includeCategoryPages),includeTagPages:!0===te.includeTagPages,randomOrder:!(!1===te.randomOrder),numUrls:0}),a=Object(l.a)(t,2),s=a[0],c=a[1],r=Object(n.useState)(!1),d=Object(l.a)(r,2),u=d[0],g=d[1],f=function(e){if(!e.ok)throw Error(e.statusText||"Error desconegut");return e},O=function e(t,a,n){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,l="".concat(t,"/wp-json/wp/v2/").concat(a,"/?page=").concat(++r,"&per_page=").concat(c,"&_envelope=1&").concat(n.map((function(e){return"_fields[]=".concat(e)})).join("&"));console.log("Fetching page ".concat(r,"/").concat(i," of ").concat(l));var d=function(){return r<i?e(t,a,n,s,c,r,i):s};return j()(l,{jsonpCallback:"_jsonp",timeout:7e3}).then((function(e){return f(e)})).then((function(e){return e.json()})).then((function(e){return e.headers&&e.headers["X-WP-TotalPages"]&&(i=e.headers["X-WP-TotalPages"]),e.body&&s.push.apply(s,Object(o.a)(e.body)),d()})).catch((function(e){return console.log("Error fetching page ".concat(r," of ").concat(a,": ").concat(e)),d()}))},v=function(){var e=s.posts,t=s.pages,a=s.categories,n=s.tags,c=s.includeCategoryPages,r=s.includeTagPages,i=s.randomOrder,l=[];return l.push.apply(l,Object(o.a)(e.filter((function(e){return e.selected})).map((function(e){return e.link})))),l.push.apply(l,Object(o.a)(t.filter((function(e){return e.selected})).map((function(e){return e.link})))),c&&l.push.apply(l,Object(o.a)(a.filter((function(e){return e.selected})).map((function(e){return e.link})))),r&&l.push.apply(l,Object(o.a)(n.filter((function(e){return e.selected})).map((function(e){return e.link})))),i?_(l):l},x=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=y(s);return e&&c(Object(i.a)(Object(i.a)({},s),{},{numUrls:t})),t},y=function(e){var t=e.pages,a=e.posts,n=e.categories,s=e.tags,c=e.includeCategoryPages,r=e.includeTagPages;return t.filter((function(e){return e.selected})).length+a.filter((function(e){return e.selected})).length+(c?n.filter((function(e){return e.selected})).length:0)+(r?s.filter((function(e){return e.selected})).length:0)},_=function(e){for(var t=e.length;0!==t;){var a=Math.floor(Math.random()*t),n=e[t-=1];e[t]=e[a],e[a]=n}return e};return Object(h.jsxs)("div",{className:"App",children:[!u&&Object(h.jsxs)("div",{children:[Object(h.jsx)(Y,{t:e,i18n:p}),Object(h.jsx)(J,{conf:s,setConf:c,checkSite:function(){for(var e=s.wpSite;e.endsWith("/");)e=e.substr(0,e.length-1);c(Object(i.a)(Object(i.a)({},s),{},{wpSite:e,err:null,loading:!0,categories:null,pages:null,posts:null,numUrls:0}));var t=[],a=[],n=[],r=[];Promise.all([O(e,"categories",["id","link","name","count"],t),O(e,"tags",["id","link","name","count"],a),O(e,"pages",["id","link","modified","type","status","title"],r),O(e,"posts",["id","link","modified","type","status","title","categories","tags"],n)]).then((function(){if(0===t.length)throw new Error("No s'ha trobat cap categoria! Podria ser que l'adre\xe7a fos incorrecta, que ara mateix no estigui funcionant o que no es tracti d'un lloc WordPress");t=t.filter((function(e){return e.count>0})).sort((function(e,t){return e.name<t.name?-1:1})),a=a.filter((function(e){return e.count>0})).sort((function(e,t){return e.name<t.name?-1:1})),e!==te.wpSite&&Object.assign(te,{categories:[],tags:[],pages:[],posts:[]});var o=[te.categories,te.tags,te.pages,te.posts];[t,a,r,n].forEach((function(e,t){return e.forEach((function(e){return e.selected=o[t].includes(e.id)}))}));var l=new Date;[r,n].forEach((function(e){e.forEach((function(e){e.modified=new Date(e.modified),e.modified<l&&(l=e.modified)})),e.sort((function(e,t){return e.modified>t.modified?-1:e.modified<t.modified?1:e.title<t.title?-1:1}))}));var d=te.from||l-864e5;n.forEach((function(e){return e.inRange="post"===e.type&&"publish"===e.status&&e.modified>=d})),r.forEach((function(e){return e.inRange="page"===e.type&&"publish"===e.status}));var u=s.includeCategoryPages,g=s.includeTagPages;c(Object(i.a)(Object(i.a)({},s),{},{loading:!1,categories:t,tags:a,pages:r,posts:n,dateFirst:new Date(l),dateFrom:new Date(d),dateTo:new Date,numUrls:y({pages:r,posts:n,categories:t,tags:a,includeCategoryPages:u,includeTagPages:g}),err:null}))})).catch((function(e){console.log("Error fetching data: ".concat(e.message)),c(Object(i.a)(Object(i.a)({},s),{},{loading:!1,err:e.message}))}))},selectPostsByDateAndCategory:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s.dateFrom,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:s.dateTo,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s.posts,n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=s.categories.filter((function(e){return e.selected})).map((function(e){return e.id})),o=s.tags.filter((function(e){return e.selected})).map((function(e){return e.id}));a.forEach((function(a){var n=a.categories,s=a.tags,c=a.modified,i=a.type,l=a.status;a.inRange=c>=e&&c<=t&&"post"===i&&"publish"===l,a.selected=a.inRange&&(n.map((function(e){return r.includes(e)})).includes(!0)||s.map((function(e){return o.includes(e)})).includes(!0))})),n&&c(Object(i.a)(Object(i.a)({},s),{},{dateFrom:e,dateTo:t,err:null,numUrls:x(!1)}))},countUrls:x,t:e,i18n:p}),Object(h.jsx)(Z,{conf:s,saveSettings:function(){Object.assign(te,{wpSite:s.wpSite,interval:s.interval,from:s.dateFrom.getTime(),to:s.dateTo.getTime(),includeCategoryPages:s.includeCategoryPages,includeTagPages:s.includeTagPages,randomOrder:s.randomOrder,categories:s.categories.filter((function(e){return e.selected})).map((function(e){return e.id})),tags:s.tags.filter((function(e){return e.selected})).map((function(e){return e.id})),pages:s.pages.filter((function(e){return e.selected})).map((function(e){return e.id})),posts:s.posts.filter((function(e){return e.selected})).map((function(e){return e.id}))}),localStorage.setItem("wpShow",JSON.stringify(te))},i18n:p,t:e,getUrls:v,setPlaying:g}),Object(h.jsx)(ee,{t:e})]}),u&&Object(h.jsx)(b,{urls:v(),interval:s.interval})]})},ne=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,277)).then((function(t){var a=t.getCLS,n=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;a(e),n(e),s(e),c(e),r(e)}))};r.a.render(Object(h.jsx)(s.a.StrictMode,{children:Object(h.jsx)(ae,{})}),document.getElementById("root")),ne()},41:function(e){e.exports=JSON.parse('{"c":"WP Show","d":"2.7.0","b":{"type":"git","url":"https://github.com/projectestac/wp-show"},"a":"EUPL-1.2"}')}},[[232,1,2]]]);
//# sourceMappingURL=main.c0ca6680.chunk.js.map